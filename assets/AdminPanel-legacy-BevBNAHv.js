System.register(["./index-legacy-DCdsU0e-.js","./react-vendor-legacy-CC-5X576.js","./icons-legacy-BwBbydQ_.js","./supabaseData-legacy-Zg4XEwCS.js"],function(e,t){"use strict";var r,s,l,a,n,i,o,d,c,u,p,x,m,h,g,b,f,y,v,j,N,w,k,_,S,C,P,E,z,O,A,D,T,q,I,M,L,$,R,F,B,U,V,G,H,W,J,Y,Q,Z,K,X,ee,te,re,se,le,ae,ne,ie,oe,de;return{setters:[e=>{r=e.u,s=e.s,l=e.j,a=e.a,n=e._,i=e.b,o=e.P},e=>{d=e.r,c=e.a},e=>{u=e.g,p=e.X,x=e.h,m=e.V,h=e.i,g=e.T,b=e.j,f=e.k,y=e.S,v=e.B,j=e.U,N=e.l,w=e.m,k=e.E,_=e.n,S=e.L,C=e.o,P=e.p,E=e.q,z=e.r,O=e.f,A=e.H,D=e.M,T=e.a,q=e.b,I=e.s,M=e.t,L=e.u,$=e.v,R=e.w,F=e.D,B=e.C,U=e.x,V=e.y,G=e.A,H=e.z,W=e.F,J=e.J,Y=e.K,Q=e.N,Z=e.O,K=e.Q,X=e.R,ee=e.c,te=e.W,re=e.Z,se=e._},e=>{le=e.getVideos,ae=e.addVideo,ne=e.updateVideo,ie=e.deleteVideo,oe=e.reorderVideos,de=e.getSettings}],execute:function(){var ce=Object.defineProperty,ue=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,ge=(e,t,r)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const fe=["ðŸ˜Š","ðŸ˜‚","ðŸ¥°","ðŸ˜","ðŸ¤—","ðŸ˜˜","ðŸ˜Ž","ðŸ¤©","ðŸ¥³","ðŸ‘","ðŸ‘","ðŸ™Œ","ðŸ’ª","ðŸ™","â¤ï¸","ðŸ’–","ðŸ’•","ðŸŽµ","ðŸŽ¶","ðŸŽ¤","âœ¨","â­","ðŸŒŸ","ðŸ”¥","ðŸ’¯","ðŸŽ‰"],ye=()=>{try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e;"suspended"===t.state&&t.resume();const r=t.createOscillator(),s=t.createGain();r.connect(s),s.connect(t.destination),r.frequency.value=800,r.type="sine",s.gain.setValueAtTime(.3,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2),r.onended=()=>{t.close()}}catch(e){console.log("Audio notification error:",e)}},ve=({currentUser:e,videos:t=[]})=>{var a;const{profilePicture:n}=r(),[i,o]=d.useState(!1),[c,v]=d.useState([]),[j,N]=d.useState(""),[w,k]=d.useState(!1),[_,S]=d.useState(!1),[C,P]=d.useState(""),[E,z]=d.useState(null),[O,A]=d.useState(""),[D,T]=d.useState(0),[q,I]=d.useState(null),M=d.useRef(null),L=d.useRef(null),$="artist"===e.role?"Editor":"Esther Reign";d.useEffect(()=>{R(),F(),W(),J()},[]),d.useEffect(()=>{i&&M.current&&(M.current.scrollIntoView({behavior:"smooth"}),T(0))},[c,i]);const R=()=>be(void 0,null,function*(){try{const{data:t,error:r}=yield s.from("chat_messages").select("*").order("timestamp",{ascending:!0});if(r)throw r;if(v(t||[]),!i){const r=(t||[]).filter(t=>t.sender_id!==e.id).length;T(Math.min(r,9))}}catch(t){console.error("Error loading messages:",t)}}),F=()=>{const t=s.channel("admin_chat_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_messages"},t=>{if("INSERT"===t.eventType){const r=t.new;v(e=>e.find(e=>e.id===r.id)?e:[...e,r]),r.sender_id!==e.id&&(ye(),i||T(e=>Math.min(e+1,9)))}else"DELETE"===t.eventType?v(e=>e.filter(e=>e.id!==t.old.id)):"UPDATE"===t.eventType&&v(e=>e.map(e=>e.id===t.new.id?t.new:e))}).subscribe();return()=>{s.removeChannel(t)}},B=()=>be(void 0,null,function*(){if(!j.trim()&&!C)return;const r=C?t.find(e=>e.id===C):null,l=j.trim()||(C&&r?`ðŸ“¹ Referencing: ${r.title}`:"ðŸ“¹ Video reference"),a={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender_id:e.id,sender_name:e.name,message:l,timestamp:(new Date).toISOString(),video_id:C||null,edited:!1};console.log("ðŸ“¤ Sending message:",a);try{const e=(n=((e,t)=>{for(var r in t||(t={}))me.call(t,r)&&ge(e,r,t[r]);if(xe)for(var r of xe(t))he.call(t,r)&&ge(e,r,t[r]);return e})({},a),i={timestamp:(new Date).toISOString()},ue(n,pe(i)));v(t=>[...t,e]),N(""),P(""),S(!1);const{data:t,error:r}=yield s.from("chat_messages").insert([a]).select().single();if(r)throw console.error("âŒ Error sending message:",r),v(e=>e.filter(e=>e.id!==a.id)),r;console.log("âœ… Message sent successfully:",t)}catch(o){console.error("âŒ Failed to send message:",o),alert("Failed to send message: "+o.message)}var n,i}),U=()=>{z(null),A("")},V=e=>be(void 0,null,function*(){if(O.trim())try{const{error:t}=yield s.from("chat_messages").update({message:O.trim(),edited:!0,timestamp:(new Date).toISOString()}).eq("id",e);if(t)throw t;z(null),A("")}catch(t){console.error("Error editing message:",t),alert("Failed to edit message")}}),G=e=>t.find(t=>t.id===e),H=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),s=Math.floor(r/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:t.toLocaleDateString()},W=()=>be(void 0,null,function*(){try{const{data:e,error:t}=yield s.from("chat_clear_requests").select("*").eq("status","pending").order("created_at",{ascending:!1}).limit(1).single();if(t&&"PGRST116"!==t.code)throw t;I(e||null)}catch(e){console.error("Error loading clear request:",e)}}),J=()=>{const e=s.channel("clear_requests_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_clear_requests"},e=>{if("INSERT"===e.eventType||"UPDATE"===e.eventType){const t=e.new;"pending"===t.status?I(t):"approved"===t.status?(v([]),I(null),ye()):I(null)}else"DELETE"===e.eventType&&I(null)}).subscribe();return()=>{s.removeChannel(e)}};return i?l.jsxs("div",{className:"fixed inset-0 lg:inset-auto lg:fixed lg:right-4 lg:bottom-4 lg:w-[380px] lg:h-[580px] max-w-full max-h-full bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] backdrop-blur-2xl rounded-none lg:rounded-3xl shadow-2xl flex flex-col border-0 lg:border border-purple-500/30 z-[9999]",style:{zIndex:999999,position:"fixed"},children:[l.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-purple-600/30 to-purple-700/30 p-4 flex items-center justify-between border-b border-purple-500/30 rounded-t-2xl lg:rounded-t-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[n||(null==e?void 0:e.profilePicture)?l.jsx("img",{src:n||(null==e?void 0:e.profilePicture)||"",alt:"Profile",className:"w-10 h-10 rounded-full object-cover shadow-lg"}):l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:$.charAt(0)}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-bold text-sm md:text-base",children:$}),l.jsx("p",{className:"text-xs text-purple-300",children:"Online"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[!q&&l.jsx("button",{onClick:()=>be(void 0,null,function*(){if(confirm(`Request to clear all messages? ${$} must approve.`))try{const{data:t,error:r}=yield s.from("chat_clear_requests").insert([{requested_by:e.id,requested_by_name:e.name,requested_by_role:e.role,status:"pending"}]).select().single();if(r)throw r;I(t),alert("Clear request sent. Waiting for approval...")}catch(t){console.error("Error requesting clear:",t),alert("Failed to send clear request")}}),className:"px-3 py-1 text-xs bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg transition-colors",title:"Request to clear all messages",children:"Clear Chat"}),l.jsx("button",{onClick:()=>o(!1),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-purple-500/20 rounded-full transition-colors",children:l.jsx(p,{size:20})})]})]}),q&&q.requested_by!==e.id&&l.jsx("div",{className:"flex-shrink-0 p-4 bg-yellow-500/20 border-b border-yellow-500/50",children:l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-semibold text-sm",children:"Clear Chat Request"}),l.jsxs("p",{className:"text-yellow-200 text-xs mt-1",children:[q.requested_by_name," wants to clear all messages"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>be(void 0,null,function*(){if(q&&confirm("Approve clearing all messages? This cannot be undone."))try{const{error:e}=yield s.from("chat_clear_requests").update({status:"approved"}).eq("id",q.id);if(e)throw e;const{error:t}=yield s.from("chat_messages").delete().neq("id","00000000-0000-0000-0000-000000000000");if(t)throw t;v([]),I(null),alert("Chat cleared successfully!")}catch(e){console.error("Error approving clear:",e),alert("Failed to clear chat")}}),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded-lg transition-colors",children:"Approve"}),l.jsx("button",{onClick:()=>be(void 0,null,function*(){if(q)try{const{error:e}=yield s.from("chat_clear_requests").update({status:"rejected"}).eq("id",q.id);if(e)throw e;I(null),alert("Clear request rejected")}catch(e){console.error("Error rejecting clear:",e),alert("Failed to reject request")}}),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded-lg transition-colors",children:"Reject"})]})]})}),q&&q.requested_by===e.id&&l.jsx("div",{className:"flex-shrink-0 p-3 bg-blue-500/20 border-b border-blue-500/50",children:l.jsxs("p",{className:"text-blue-200 text-xs text-center",children:["â³ Waiting for ",$," to approve clear request..."]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[c.map(t=>{const r=t.sender_id===e.id,a=t.video_id?G(t.video_id):null;return E===t.id?l.jsx("div",{className:"flex "+(r?"justify-end":"justify-start"),children:l.jsxs("div",{className:"max-w-[85%] bg-purple-500/20 rounded-xl p-3 border border-purple-500/30",children:[l.jsx("input",{type:"text",value:O,onChange:e=>A(e.target.value),className:"w-full bg-transparent text-white outline-none text-sm mb-2",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&V(t.id),"Escape"===e.key&&U()}}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>V(t.id),className:"px-3 py-1 bg-purple-600 rounded-lg text-white text-xs hover:bg-purple-700",children:l.jsx(x,{size:12})}),l.jsx("button",{onClick:U,className:"px-3 py-1 bg-gray-600 rounded-lg text-white text-xs hover:bg-gray-700",children:l.jsx(p,{size:12})})]})]})},t.id):l.jsx("div",{className:"flex "+(r?"justify-end":"justify-start"),children:l.jsxs("div",{className:`max-w-[85%] ${r?"bg-gradient-to-br from-purple-600 to-purple-700":"bg-purple-500/20"} rounded-xl p-3 border ${r?"border-purple-500/50":"border-purple-500/30"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-purple-100",children:t.sender_name}),t.edited&&l.jsx("span",{className:"text-xs text-purple-300",children:"(edited)"})]}),a&&l.jsxs("div",{className:"mb-2 p-2 bg-white/10 rounded-lg flex items-center gap-2",children:[l.jsx(m,{size:14,className:"text-purple-200"}),l.jsx("span",{className:"text-xs text-purple-200 truncate",children:a.title})]}),l.jsx("p",{className:"text-white text-sm whitespace-pre-wrap break-words",children:t.message}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:"text-xs text-purple-200",children:H(t.timestamp)}),r&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{return z((e=t).id),void A(e.message);var e},className:"p-1 hover:bg-purple-500/30 rounded transition-colors",title:"Edit",children:l.jsx(h,{size:12,className:"text-purple-200"})}),l.jsx("button",{onClick:()=>{return e=t.id,be(void 0,null,function*(){if(confirm("Are you sure you want to delete this message?"))try{const{error:t}=yield s.from("chat_messages").delete().eq("id",e);if(t)throw t}catch(t){console.error("Error deleting message:",t),alert("Failed to delete message")}});var e},className:"p-1 hover:bg-red-500/30 rounded transition-colors",title:"Delete",children:l.jsx(g,{size:12,className:"text-red-300"})})]})]})]})},t.id)}),l.jsx("div",{ref:M})]}),l.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-purple-500/30 bg-[#2d1b4e]/80 rounded-b-2xl lg:rounded-b-3xl",children:[_&&l.jsxs("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 max-h-32 overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs font-semibold text-purple-200",children:"Select Video"}),l.jsx("button",{onClick:()=>S(!1),className:"text-purple-300 hover:text-white",children:l.jsx(p,{size:14})})]}),l.jsx("div",{className:"space-y-1",children:0===t.length?l.jsx("p",{className:"text-xs text-purple-300",children:"No videos available"}):t.map(e=>l.jsx("button",{onClick:()=>{P(e.id),S(!1)},className:"w-full text-left p-2 rounded-lg text-xs transition-colors "+(C===e.id?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-200 hover:bg-purple-500/20"),children:e.title},e.id))})]}),w&&l.jsx("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 grid grid-cols-8 gap-1 max-h-32 overflow-y-auto",children:fe.map(e=>l.jsx("button",{onClick:()=>(e=>{var t;N(t=>t+e),k(!1),null==(t=L.current)||t.focus()})(e),className:"text-xl hover:bg-purple-500/20 rounded-lg p-1 transition-colors",children:e},e))}),C&&l.jsxs("div",{className:"mb-2 p-2 bg-purple-600/20 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(m,{size:14,className:"text-purple-300"}),l.jsx("span",{className:"text-xs text-purple-200 truncate",children:(null==(a=G(C))?void 0:a.title)||"Video selected"})]}),l.jsx("button",{onClick:()=>P(""),className:"text-purple-300 hover:text-white",children:l.jsx(p,{size:14})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>S(!_),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Attach Video",children:l.jsx(b,{size:18,className:"text-purple-300"})}),l.jsx("button",{onClick:()=>k(!w),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Emoji",children:l.jsx(f,{size:18,className:"text-purple-300"})}),l.jsx("input",{ref:L,type:"text",value:j,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())},placeholder:"Type a message...",className:"flex-1 px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white placeholder-purple-400 text-sm focus:outline-none focus:border-purple-500"}),l.jsx("button",{onClick:B,disabled:!j.trim()&&!C,className:"p-2 bg-gradient-to-br from-purple-600 to-purple-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:l.jsx(y,{size:18,className:"text-white"})})]})]})]}):l.jsxs("button",{onClick:()=>o(!0),className:"fixed right-4 bottom-4 w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-700 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-purple-500/50 transition-all z-[9999] hover:scale-110",style:{zIndex:999999,position:"fixed"},children:[l.jsx(u,{size:24}),D>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold",children:D})]})};var je=Object.defineProperty,Ne=Object.defineProperties,we=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Ce=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pe=(e,t)=>{for(var r in t||(t={}))_e.call(t,r)&&Ce(e,r,t[r]);if(ke)for(var r of ke(t))Se.call(t,r)&&Ce(e,r,t[r]);return e},Ee=(e,t)=>Ne(e,we(t));const ze=({currentUser:e,onNotificationClick:t,externalUnreadCount:r=0})=>{const[a,n]=d.useState([]),[i,o]=d.useState(0),[c,x]=d.useState(!1);d.useEffect(()=>{r>0&&o(r)},[r]),d.useEffect(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]);const m=d.useCallback(e=>{n(t=>t.some(t=>t.id===e.id)?t:[e,...t].slice(0,50)),o(e=>e+1)},[]),h=d.useCallback((e,t,r)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t,icon:r||"/icons/ios/128.png",badge:"/icons/ios/128.png",tag:"esther-reign-admin",requireInteraction:!1})},[]),g=d.useCallback(()=>{try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e;"suspended"===t.state&&t.resume();const r=t.createOscillator(),s=t.createGain();r.connect(s),s.connect(t.destination),r.frequency.value=800,r.type="sine",s.gain.setValueAtTime(.3,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2),r.onended=()=>{t.close()}}catch(e){console.log("Audio notification error:",e);try{const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGW57+OeTQ8MT6Xh8LZjHAY4kdfyzHksBSR3x/DdkEAKFF606euoVRQKRp/g8r5sIQUrgc7y2Yk2CBhlue/jnk0PDE+l4fC2YxwGOJHX8sx5LAUkd8fw3ZBAC");e.volume=.3,e.play().catch(()=>{})}catch(t){console.log("Fallback audio failed")}}},[]);d.useEffect(()=>{if(!e)return;const t=s.channel("admin_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"admin_logins"},t=>{const r=t.new;if(r.user_id!==e.id){const e="artist"===r.user_role?"Esther Reign":"Editor",t={id:`login_${Date.now()}`,type:"login",title:`${e} logged in`,message:`${e} just logged into the admin panel`,timestamp:new Date,read:!1,userId:r.user_id};m(t),g(),h(`${e} logged in`,`${e} just logged into the admin panel`)}}).subscribe();return()=>{s.removeChannel(t)}},[e,g,h,m]),d.useEffect(()=>{if(!e)return;const t=s.channel("chat_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},t=>{const r=t.new;if(r.sender_id!==e.id){const e=r.sender_name||"Someone",t={id:`message_${r.id}`,type:"message",title:`New message from ${e}`,message:r.message.substring(0,50)+(r.message.length>50?"...":""),timestamp:new Date(r.timestamp),read:!1,userId:r.sender_id};m(t),g(),h(`New message from ${e}`,r.message.substring(0,100))}}).subscribe();return()=>{s.removeChannel(t)}},[e,g,h,m]);const b=e=>{const t=(new Date).getTime()-e.getTime(),r=Math.floor(t/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:e.toLocaleDateString()},f=e=>{switch(e){case"login":return l.jsx(j,{size:18,className:"text-blue-400"});case"message":return l.jsx(u,{size:18,className:"text-purple-400"});default:return l.jsx(v,{size:18,className:"text-green-400"})}};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>x(!c),className:"relative p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:[l.jsx(v,{size:20,className:"text-purple-300"}),i>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold text-white",children:i>9?"9+":i})]}),c&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>x(!1)}),l.jsxs("div",{className:"absolute right-0 top-12 w-80 md:w-96 bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-2xl border border-purple-500/30 z-50 max-h-[500px] flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/30",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:"Notifications"}),i>0&&l.jsx("button",{onClick:()=>{n(e=>e.map(e=>Ee(Pe({},e),{read:!0}))),o(0)},className:"text-xs text-purple-300 hover:text-purple-200",children:"Mark all as read"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:0===a.length?l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(v,{size:48,className:"mx-auto mb-4 text-purple-400 opacity-50"}),l.jsx("p",{className:"text-purple-300",children:"No notifications"})]}):l.jsx("div",{className:"divide-y divide-purple-500/20",children:a.map(e=>l.jsx("div",{className:"p-4 hover:bg-purple-500/10 transition-colors cursor-pointer "+(e.read?"":"bg-purple-500/5"),onClick:()=>{var r;r=e.id,n(e=>e.map(e=>e.id===r?Ee(Pe({},e),{read:!0}):e)),o(e=>Math.max(0,e-1)),null==t||t(e),x(!1)},children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-1",children:f(e.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx("h4",{className:"text-sm font-semibold text-white",children:e.title}),!e.read&&l.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full flex-shrink-0 mt-1"})]}),l.jsx("p",{className:"text-xs text-purple-300 mt-1 line-clamp-2",children:e.message}),l.jsx("p",{className:"text-xs text-purple-400 mt-2",children:b(e.timestamp)})]}),l.jsx("button",{onClick:t=>{var r;t.stopPropagation(),r=e.id,n(e=>{const t=e.find(e=>e.id===r);return t&&!t.read&&o(e=>Math.max(0,e-1)),e.filter(e=>e.id!==r)})},className:"flex-shrink-0 p-1 hover:bg-purple-500/20 rounded transition-colors",children:l.jsx(p,{size:14,className:"text-purple-400"})})]})},e.id))})})]})]})]})},Oe=(e,t)=>{return r=void 0,s=null,l=function*(){if(!e.type.startsWith("video/"))throw new Error("Invalid file type. Please upload a video file.");if(e.size>209715200)throw new Error(`File size exceeds 200MB limit. Your file is ${(e.size/1048576).toFixed(2)}MB`);return new Promise(r=>{let s=0;const l=setInterval(()=>{if(s+=5,null==t||t(s),s>=100){clearInterval(l);const t=URL.createObjectURL(e);r(t)}},100)})},new Promise((e,t)=>{var a=e=>{try{i(l.next(e))}catch(r){t(r)}},n=e=>{try{i(l.throw(e))}catch(r){t(r)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);i((l=l.apply(r,s)).next())});var r,s,l};var Ae=Object.defineProperty,De=Object.defineProperties,Te=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Le=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&Le(e,r,t[r]);if(qe)for(var r of qe(t))Me.call(t,r)&&Le(e,r,t[r]);return e},Re=(e,t)=>De(e,Te(t)),Fe=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const Be=({onVideoChange:e})=>{const[t,r]=d.useState([]),[s,a]=d.useState(null),[n,i]=d.useState(!1),[o,u]=d.useState(!0),[x,m]=d.useState(null),[h,b]=d.useState("link"),[f,y]=d.useState(!1),[v,j]=d.useState(0),E=d.useRef(null);d.useEffect(()=>{z()},[]);const z=()=>Fe(void 0,null,function*(){u(!0);const e=yield le();r(e),u(!1)}),O=()=>Fe(void 0,null,function*(){if(null!==x)try{yield oe(t),null==e||e()}catch(r){console.error("Error reordering videos:",r),yield z()}m(null)});return o?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):l.jsxs("div",{className:"p-6 bg-[#2d1b4e]/50 backdrop-blur-xl rounded-2xl border border-purple-500/20",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Video Management"}),l.jsxs("button",{onClick:()=>{const e={id:`temp_${Date.now()}`,title:"",video_link:"",thumbnail_url:"",status:"pending",template_type:"default",order_index:t.length,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};a(e),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[l.jsx(N,{size:20}),"Add Video"]})]}),l.jsxs("div",{className:"space-y-4",children:[t.map((s,n)=>l.jsx("div",{draggable:!0,onDragStart:()=>(e=>{m(e)})(n),onDragOver:e=>((e,s)=>{if(e.preventDefault(),null===x||x===s)return;const l=[...t],a=l[x];l.splice(x,1),l.splice(s,0,a);const n=l.map((e,t)=>Re($e({},e),{order_index:t}));r(n),m(s)})(e,n),onDragEnd:O,className:"p-4 border border-purple-500/20 rounded-lg cursor-move transition-all bg-purple-500/10 hover:bg-purple-500/20 "+(x===n?"opacity-50":""),children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[l.jsx(w,{size:20,className:"text-purple-300 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-semibold text-white truncate",children:s.title||"Untitled Video"}),l.jsxs("p",{className:"text-sm text-purple-300 truncate",children:["Status: ",s.status," â€¢ Order: ",s.order_index]}),s.video_link&&l.jsxs("a",{href:s.video_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-purple-400 hover:text-purple-300 transition-colors mt-1",children:[l.jsx(k,{size:14}),"View Video"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-8 sm:ml-0",children:[l.jsx("button",{onClick:()=>{a(s),i(!1)},className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:l.jsx(_,{size:16,className:"text-purple-300"})}),l.jsx("button",{onClick:()=>{return l=s.id,Fe(void 0,null,function*(){if(confirm("Are you sure you want to delete this video?"))try{(yield ie(l))&&(r(t.filter(e=>e.id!==l)),null==e||e())}catch(s){console.error("Error deleting video:",s),alert("Failed to delete video. Please try again.")}});var l},className:"p-2 rounded hover:bg-red-500/20 transition-colors",children:l.jsx(g,{size:16,className:"text-red-400"})})]})]})},s.id)),0===t.length&&l.jsx("div",{className:"text-center py-8 text-purple-300",children:'No videos yet. Click "Add Video" to get started.'})]}),s&&c.createPortal(l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:l.jsx("div",{className:"w-full max-w-md bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:n?"Add New Video":"Edit Video"}),l.jsx("button",{onClick:()=>{a(null),i(!1)},className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:l.jsx(p,{size:20,className:"text-purple-300"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Title *"}),l.jsx("input",{type:"text",value:s.title,onChange:e=>a(Re($e({},s),{title:e.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"Enter video title"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Upload Method"}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsxs("button",{type:"button",onClick:()=>b("link"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all "+("link"===h?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[l.jsx(S,{size:16}),"Link"]}),l.jsxs("button",{type:"button",onClick:()=>b("file"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all "+("file"===h?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[l.jsx(C,{size:16}),"Upload File (Max 200MB)"]})]})]}),"link"===h&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video Link"}),l.jsx("input",{type:"url",value:s.video_link||"",onChange:e=>a(Re($e({},s),{video_link:e.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://youtube.com/watch?v=... or https://cloudinary.com/..."})]}),"file"===h&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video File (Max 200MB)"}),l.jsx("input",{ref:E,type:"file",accept:"video/*",onChange:e=>Fe(void 0,null,function*(){var t;const r=null==(t=e.target.files)?void 0:t[0];if(r)if(r.size>209715200)alert(`File size exceeds 200MB limit. Your file is ${(r.size/1048576).toFixed(2)}MB`);else{y(!0),j(0);try{const e=yield Oe(r,e=>{j(e)});a(Re($e({},s),{video_link:e})),y(!1),j(0),alert("Video uploaded successfully! (Note: Using local preview URL)")}catch(l){console.error("Upload error:",l),alert(l.message||"Failed to upload video"),y(!1),j(0)}}}),className:"hidden"}),l.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=E.current)?void 0:e.click()},disabled:f,className:"w-full px-4 py-3 border-2 border-dashed rounded-lg transition-all "+(f?"border-purple-400 bg-purple-500/10":"border-purple-500/30 bg-purple-500/10 hover:border-purple-500 hover:bg-purple-500/20"),children:f?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-300",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-300"}),l.jsxs("span",{children:["Uploading... ",v,"%"]})]}),l.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden bg-purple-500/20",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-700 transition-all duration-300",style:{width:`${v}%`}})})]}):l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(C,{size:24,className:"text-purple-300"}),l.jsx("span",{className:"text-purple-200",children:"Click to select video file"}),l.jsx("span",{className:"text-xs text-purple-400",children:"Max size: 200MB"})]})}),s.video_link&&"file"===h&&l.jsxs("p",{className:"mt-2 text-xs text-purple-400",children:["Video URL: ",s.video_link.substring(0,50),"..."]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Thumbnail URL"}),l.jsx("input",{type:"url",value:s.thumbnail_url||"",onChange:e=>a(Re($e({},s),{thumbnail_url:e.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://img.youtube.com/vi/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),l.jsxs("select",{value:s.status,onChange:e=>a(Re($e({},s),{status:e.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white",children:[l.jsx("option",{value:"pending",className:"bg-[#2d1b4e]",children:"Pending"}),l.jsx("option",{value:"completed",className:"bg-[#2d1b4e]",children:"Completed"})]})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{a(null),i(!1)},className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg transition-colors text-purple-200 hover:bg-purple-500/20",children:"Cancel"}),l.jsxs("button",{onClick:()=>Fe(void 0,null,function*(){if(s)try{if(n){const e=s,{id:l,created_at:a,updated_at:n}=e,i=((e,t)=>{var r={};for(var s in e)Ie.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&qe)for(var s of qe(e))t.indexOf(s)<0&&Me.call(e,s)&&(r[s]=e[s]);return r})(e,["id","created_at","updated_at"]),o=yield ae(i);o&&r([...t,o])}else(yield ne(s.id,s))&&r(t.map(e=>e.id===s.id?s:e));a(null),i(!1),null==e||e(),yield z()}catch(l){console.error("Error saving video:",l),alert("Failed to save video. Please try again.")}}),disabled:!s.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(P,{size:16}),n?"Add Video":"Save Changes"]})]})]})})}),document.body)]})},Ue=({videoUpdates:e,loginFrequency:t,siteVisits:r})=>{const[s,a]=d.useState(!1);d.useEffect(()=>{setTimeout(()=>a(!0),100)},[]);const n=Math.max(...e.map(e=>e.value),...t.map(e=>e.value),...r.map(e=>e.value),1),i=(e,t,r,a)=>{if(0===e.length)return l.jsx("div",{className:"flex items-center justify-center h-48 text-purple-300",children:l.jsx("p",{children:"No data available"})});const i=e.map((t,r)=>({x:r/(e.length-1||1)*100,y:100-t.value/n*80})),o=i.map((e,t)=>`${0===t?"M":"L"} ${e.x},${e.y}`).join(" "),d=`${o} L ${i[i.length-1].x},100 L 0,100 Z`;return l.jsxs("div",{className:"relative h-48",children:[l.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:r,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.4"}),l.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.05"})]})}),l.jsx("path",{d:d,fill:`url(#${r})`,className:s?"animate-fade-in":"opacity-0",style:{animation:s?"drawPath 1.5s ease-out forwards":"none",strokeDasharray:s?"0":"1000",strokeDashoffset:s?"0":"1000"}}),l.jsx("path",{d:o,fill:"none",stroke:t,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",className:s?"animate-fade-in":"opacity-0",style:{animation:s?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:s?"1000":"0",strokeDashoffset:s?"0":"1000"}}),i.map((e,r)=>l.jsxs("g",{children:[l.jsx("circle",{cx:e.x,cy:e.y,r:"1.5",fill:t,className:s?"animate-scale-in":"opacity-0",style:{animation:s?`fadeInScale 0.3s ease-out ${.5+.1*r}s forwards`:"none"}}),l.jsx("circle",{cx:e.x,cy:e.y,r:"3",fill:t,fillOpacity:"0.2",className:s?"animate-pulse":"opacity-0",style:{animation:s?`fadeInScale 0.3s ease-out ${.5+.1*r}s forwards, pulse 2s ease-in-out infinite ${1+.1*r}s`:"none"}})]},r))]}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-purple-300 px-2",children:e.map((e,t)=>{const r=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});return l.jsx("span",{className:"transform -rotate-45 origin-left",style:{opacity:s?1:0,transition:`opacity 0.3s ${.8+.1*t}s`},children:r},t)})})]})};return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        @keyframes pulse {\n          0%, 100% {\n            opacity: 0.2;\n            transform: scale(1);\n          }\n          50% {\n            opacity: 0.4;\n            transform: scale(1.2);\n          }\n        }\n      "}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:l.jsx(m,{size:20,className:"text-purple-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-white",children:"Video Updates"}),l.jsx("p",{className:"text-xs text-purple-300",children:"Last 7 days"})]})]}),l.jsx("div",{className:"mb-2",children:l.jsx("p",{className:"text-2xl font-black text-white",children:e.reduce((e,t)=>e+t.value,0)})}),i(e,"#9333ea","gradient-purple")]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/20",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:l.jsx(E,{size:20,className:"text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-white",children:"Login Frequency"}),l.jsx("p",{className:"text-xs text-blue-300",children:"Last 7 days"})]})]}),l.jsx("div",{className:"mb-2",children:l.jsx("p",{className:"text-2xl font-black text-white",children:t.reduce((e,t)=>e+t.value,0)})}),i(t,"#3b82f6","gradient-blue")]}),l.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-2xl p-6 border border-green-500/20 md:col-span-2 lg:col-span-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center",children:l.jsx(z,{size:20,className:"text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-white",children:"Site Visits"}),l.jsx("p",{className:"text-xs text-green-300",children:"Last 7 days"})]})]}),l.jsx("div",{className:"mb-2",children:l.jsx("p",{className:"text-2xl font-black text-white",children:r.reduce((e,t)=>e+t.value,0)})}),i(r,"#10b981","gradient-green")]})]})]})};var Ve=Object.defineProperty,Ge=Object.defineProperties,He=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Qe=(e,t,r)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ze=(e,t)=>{for(var r in t||(t={}))Je.call(t,r)&&Qe(e,r,t[r]);if(We)for(var r of We(t))Ye.call(t,r)&&Qe(e,r,t[r]);return e},Ke=(e,t)=>Ge(e,He(t)),Xe=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const et=()=>{const{profilePicture:e,updateProfilePicture:s}=r(),[i,o]=d.useState({hero_image:"/Estherreign.jpg",about_image:"/IMG-20250915-WA0023.jpg",about_text:"I am an emerging gospel artist with a deep passion for worship and praise...",phone:"+234 818 019 4269",email:"contact@estherreign.com",location:"Lagos, Nigeria",social_links:{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),[c,u]=d.useState(""),[p,x]=d.useState(!1),[m,h]=d.useState({hero:!1,about:!1});d.useEffect(()=>{g()},[]);const g=()=>Xe(void 0,null,function*(){const{getSettings:e}=yield n(()=>t.import("./supabaseData-legacy-Zg4XEwCS.js"),void 0),r=yield e();r&&(o({hero_image:r.hero_image||"/Estherreign.jpg",about_image:r.about_image||"/IMG-20250915-WA0023.jpg",about_text:r.about_text||"I am an emerging gospel artist with a deep passion for worship and praise...",phone:r.contact_phone||"+234 818 019 4269",email:r.contact_email||"contact@estherreign.com",location:"Lagos, Nigeria",social_links:r.social_links||{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),u(r.hero_description||"Lifting voices in worship through powerful gospel music. Experience the presence of God through every note."))}),b=(e,t)=>Xe(void 0,null,function*(){var r;const s=null==(r=t.target.files)?void 0:r[0];if(s)if(s.size>5242880)alert("Image size should be less than 5MB");else try{h(t=>Ke(Ze({},t),{[e]:!0}));const t=yield a(s,e);if(!t)return void alert("Upload failed. Please try again.");o(Ke(Ze({},i),"hero"===e?{hero_image:t}:{about_image:t})),alert('Image uploaded! Remember to hit "Save All Settings".')}catch(l){console.error("Error uploading image:",l),alert("Upload failed. Please try again.")}finally{h(t=>Ke(Ze({},t),{[e]:!1}))}});return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black mb-2 text-white",children:"Site Settings"}),l.jsx("p",{className:"text-gray-400",children:"Manage your website content and appearance"})]}),l.jsxs("div",{className:"grid gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-blue-500/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Profile Picture"}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("div",{className:"relative",children:e?l.jsx("img",{src:e,alt:"Profile",className:"w-24 h-24 rounded-xl object-cover shadow-lg"}):l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:l.jsx("span",{className:"text-white font-black text-4xl",children:"E"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Upload Profile Picture"}),l.jsx("input",{type:"file",accept:"image/*",disabled:p,onChange:e=>Xe(void 0,null,function*(){var t;const r=null==(t=e.target.files)?void 0:t[0];if(r)if(r.size>5242880)alert("Image size should be less than 5MB");else if(r.type.startsWith("image/"))try{x(!0);const e=yield a(r,"profile");if(!e)return void alert("Upload failed: No URL returned. Please check your Supabase Storage configuration.");s(e);const t=localStorage.getItem("admin_session");if(t){const r=JSON.parse(t);r.user.profilePicture=e,localStorage.setItem("admin_session",JSON.stringify(r))}alert("Profile picture updated successfully!")}catch(l){console.error("Error uploading profile picture:",l);const e=(null==l?void 0:l.message)||(null==l?void 0:l.toString())||"Unknown error occurred";alert(`Upload failed: ${e}\n\nPlease check:\n1. Supabase Storage bucket "media" exists\n2. Bucket has public access enabled\n3. RLS policies allow uploads`)}finally{x(!1)}else alert("Please select a valid image file (JPG, PNG, etc.)")}),className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/20 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-gradient-to-r file:from-purple-600 file:to-blue-600 file:text-white hover:file:shadow-lg file:cursor-pointer "+(p?"opacity-60 cursor-not-allowed":"")}),l.jsx("p",{className:"text-xs text-gray-400 mt-2",children:p?"Uploading image...":"Max size: 5MB. Recommended: Square image (500x500px)"})]})]})]}),l.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Images"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Image"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"file",accept:"image/*",disabled:m.hero,onChange:e=>b("hero",e),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer "+(m.hero?"opacity-60 cursor-not-allowed":"")}),l.jsx("input",{type:"url",value:i.hero_image.startsWith("data:")?"":i.hero_image,onChange:e=>o(Ke(Ze({},i),{hero_image:e.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),i.hero_image&&l.jsx("img",{src:i.hero_image,alt:"Hero",className:"mt-2 w-full h-32 object-cover rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Image"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"file",accept:"image/*",disabled:m.about,onChange:e=>b("about",e),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer "+(m.about?"opacity-60 cursor-not-allowed":"")}),l.jsx("input",{type:"url",value:i.about_image.startsWith("data:")?"":i.about_image,onChange:e=>o(Ke(Ze({},i),{about_image:e.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),i.about_image&&l.jsx("img",{src:i.about_image,alt:"About",className:"mt-2 w-full h-32 object-cover rounded-lg"})]})]})]}),l.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Hero Section"}),l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Description"}),l.jsx("textarea",{value:c,onChange:e=>u(e.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Brief description for hero section..."})]}),l.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"About Section"}),l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Text"}),l.jsx("textarea",{value:i.about_text,onChange:e=>o(Ke(Ze({},i),{about_text:e.target.value})),rows:6,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Tell your story..."})]}),l.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Contact Information"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Phone"}),l.jsx("input",{type:"tel",value:i.phone,onChange:e=>o(Ke(Ze({},i),{phone:e.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"+234..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Email"}),l.jsx("input",{type:"email",value:i.email,onChange:e=>o(Ke(Ze({},i),{email:e.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"contact@..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Location"}),l.jsx("input",{type:"text",value:i.location,onChange:e=>o(Ke(Ze({},i),{location:e.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"City, Country"})]})]})]}),l.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Social Media Links"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Instagram"}),l.jsx("input",{type:"url",value:i.social_links.instagram,onChange:e=>o(Ke(Ze({},i),{social_links:Ke(Ze({},i.social_links),{instagram:e.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://instagram.com/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"YouTube"}),l.jsx("input",{type:"url",value:i.social_links.youtube,onChange:e=>o(Ke(Ze({},i),{social_links:Ke(Ze({},i.social_links),{youtube:e.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://youtube.com/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"TikTok"}),l.jsx("input",{type:"url",value:i.social_links.tiktok,onChange:e=>o(Ke(Ze({},i),{social_links:Ke(Ze({},i.social_links),{tiktok:e.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://tiktok.com/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Facebook"}),l.jsx("input",{type:"url",value:i.social_links.facebook,onChange:e=>o(Ke(Ze({},i),{social_links:Ke(Ze({},i.social_links),{facebook:e.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://facebook.com/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Twitter"}),l.jsx("input",{type:"url",value:i.social_links.twitter,onChange:e=>o(Ke(Ze({},i),{social_links:Ke(Ze({},i.social_links),{twitter:e.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://twitter.com/..."})]})]})]}),l.jsxs("button",{onClick:()=>Xe(void 0,null,function*(){try{const{updateSettings:e}=yield n(()=>t.import("./supabaseData-legacy-Zg4XEwCS.js"),void 0);(yield e({hero_image:i.hero_image,hero_description:c,about_image:i.about_image,about_text:i.about_text,contact_email:i.email,contact_phone:i.phone,social_links:i.social_links}))?(alert("Settings saved successfully! Changes will appear immediately."),window.dispatchEvent(new Event("storage"))):alert("Failed to save settings. Please try again.")}catch(e){console.error("Error saving settings:",e),alert("Error saving settings. Please check console for details.")}}),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 flex items-center justify-center gap-2",children:[l.jsx(P,{size:20}),"Save All Settings"]})]})]})};(()=>{const e=localStorage.getItem("current_sync_code")||Math.random().toString(36).substring(2,8).toUpperCase();localStorage.getItem("current_sync_code")||localStorage.setItem("current_sync_code",e),window.location.origin,window.location.pathname})();var tt=Object.defineProperty,rt=Object.defineProperties,st=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,it=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ot=(e,t)=>{for(var r in t||(t={}))at.call(t,r)&&it(e,r,t[r]);if(lt)for(var r of lt(t))nt.call(t,r)&&it(e,r,t[r]);return e},dt=(e,t)=>rt(e,st(t)),ct=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const ut=()=>{const[e,t]=d.useState([]),[r,a]=d.useState(!0),[n,i]=d.useState(null),[o,u]=d.useState(""),[x,m]=d.useState("all"),[h,b]=d.useState(0);d.useEffect(()=>{f()},[]);const f=()=>ct(void 0,null,function*(){a(!0);try{const{data:e,error:r}=yield s.from("fan_messages").select("*").order("created_at",{ascending:!1});if(r)throw r;t(e||[])}catch(e){console.error("Error loading messages:",e)}a(!1)}),v=e.filter(e=>"all"===x||("unread"===x?"unread"===e.status:e.message_type===x)),j=e.filter(e=>"unread"===e.status).length;return r?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-white",children:"Fan Messages"}),l.jsxs("p",{className:"text-sm text-purple-300",children:[j," unread messages"]})]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 w-full md:w-auto scrollbar-hide",children:["all","unread","prayer_request","testimony"].map(e=>l.jsx("button",{onClick:()=>m(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all whitespace-nowrap "+(x===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:e.replace("_"," ")},e))})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[v.map(r=>{const a=(o=r.message_type,{prayer_request:A,testimony:D,song_request:T,booking_inquiry:q,general:O}[o]||O);var o;const d=(e=>({prayer_request:"pink",testimony:"green",song_request:"purple",booking_inquiry:"blue",general:"gray"}[e]||"gray"))(r.message_type);return l.jsx("div",{className:"p-4 md:p-6 rounded-xl border transition-all cursor-pointer "+("unread"===r.status?"bg-purple-900/30 border-purple-500/50":"bg-purple-500/10 border-purple-500/20"),onClick:()=>{const l=document.querySelector(".flex-1.overflow-y-auto");var a;l&&b(l.scrollTop),i(r),"unread"===r.status&&(a=r.id,ct(void 0,null,function*(){try{const{error:r}=yield s.from("fan_messages").update({status:"read"}).eq("id",a);if(r)throw r;t(e.map(e=>e.id===a?dt(ot({},e),{status:"read"}):e))}catch(r){console.error("Error marking as read:",r)}}))},children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[l.jsx("div",{className:`p-3 rounded-lg bg-${d}-100 flex-shrink-0`,children:l.jsx(a,{size:24,className:`text-${d}-600`})}),l.jsxs("div",{className:"sm:hidden flex-1",children:[l.jsx("h3",{className:"text-lg font-bold text-white line-clamp-1",children:r.subject||"No Subject"}),l.jsx("p",{className:"text-xs text-purple-400",children:new Date(r.created_at).toLocaleString()})]})]}),l.jsxs("div",{className:"flex-1 min-w-0 w-full",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${d}-100 text-${d}-700`,children:r.message_type.replace("_"," ")}),"unread"===r.status&&l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"New"}),r.is_prayed_for&&l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:"ðŸ™ Prayed"}),r.is_featured&&l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-700",children:"â­ Featured"})]}),l.jsx("h3",{className:"hidden sm:block text-lg font-bold mb-1 text-white",children:r.subject||"No Subject"}),l.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["From: ",r.is_anonymous?"Anonymous":r.from_name]}),l.jsx("p",{className:"text-sm line-clamp-2 text-purple-200",children:r.message}),l.jsx("p",{className:"hidden sm:block text-xs mt-2 text-purple-400",children:new Date(r.created_at).toLocaleString()})]}),l.jsxs("div",{className:"flex sm:flex-col gap-2 w-full sm:w-auto mt-2 sm:mt-0 justify-end",children:["prayer_request"===r.message_type&&!r.is_prayed_for&&l.jsx("button",{onClick:l=>{var a;l.stopPropagation(),a=r.id,ct(void 0,null,function*(){try{const{error:r}=yield s.from("fan_messages").update({is_prayed_for:!0}).eq("id",a);if(r)throw r;t(e.map(e=>e.id===a?dt(ot({},e),{is_prayed_for:!0}):e))}catch(r){console.error("Error marking as prayed:",r)}})},className:"flex-1 sm:flex-none px-3 py-2 sm:py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 text-center",children:"Mark Prayed"}),l.jsx("button",{onClick:l=>{var a;l.stopPropagation(),a=r.id,ct(void 0,null,function*(){if(confirm("Are you sure you want to delete this message? This action cannot be undone."))try{const{error:r}=yield s.from("fan_messages").delete().eq("id",a);if(r)throw r;t(e.filter(e=>e.id!==a)),(null==n?void 0:n.id)===a&&i(null),alert("Message deleted successfully")}catch(r){console.error("Error deleting message:",r),alert("Failed to delete message")}})},className:"p-2 rounded hover:bg-red-500/20 transition-colors self-end",title:"Delete message",children:l.jsx(g,{size:18,className:"text-red-400 hover:text-red-300"})})]})]})},r.id)}),0===v.length&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(O,{size:48,className:"mx-auto mb-4 text-purple-400"}),l.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No messages yet"})]})]})]}),n&&c.createPortal(l.jsx("div",{className:"message-modal-overlay fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] overflow-y-auto",children:l.jsx("div",{className:"flex justify-center",style:{paddingTop:`${h}px`,paddingBottom:"2rem"},children:l.jsx("div",{className:"w-full max-w-2xl bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:n.subject||"Message Details"}),l.jsx("button",{onClick:()=>i(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:l.jsx(p,{size:20,className:"text-purple-300"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"From"}),l.jsxs("p",{className:"text-white",children:[n.is_anonymous?"Anonymous":n.from_name,n.from_email&&` (${n.from_email})`]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Message"}),l.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:n.message})]}),n.response&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Your Response"}),l.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:n.response})]}),"responded"!==n.status&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Send Response"}),l.jsx("textarea",{value:o,onChange:e=>u(e.target.value),rows:4,className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg resize-none text-white placeholder-purple-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type your response..."}),l.jsxs("button",{onClick:()=>ct(void 0,null,function*(){if(n&&o.trim())try{const{error:r}=yield s.from("fan_messages").update({status:"responded",response:o,responded_at:(new Date).toISOString()}).eq("id",n.id);if(r)throw r;t(e.map(e=>e.id===n.id?dt(ot({},e),{status:"responded",response:o,responded_at:(new Date).toISOString()}):e)),i(null),u(""),alert("Response sent!")}catch(r){console.error("Error sending response:",r),alert("Failed to send response")}}),disabled:!o.trim(),className:"mt-2 flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50",children:[l.jsx(y,{size:16}),"Send Response"]})]})]}),l.jsx("div",{className:"flex gap-3 mt-6",children:l.jsx("button",{onClick:()=>i(null),className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg text-purple-200 hover:bg-purple-500/20 transition-colors",children:"Close"})})]})})})}),document.body)]})};var pt=Object.defineProperty,xt=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,ft=(e,t,r)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yt=(e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&ft(e,r,t[r]);if(ht)for(var r of ht(t))bt.call(t,r)&&ft(e,r,t[r]);return e},vt=(e,t)=>xt(e,mt(t)),jt=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const Nt=()=>{const[e,t]=d.useState([]),[r,a]=d.useState(!0),[n,i]=d.useState(null),[o,u]=d.useState("all"),[x,m]=d.useState("votes");d.useEffect(()=>{h()},[]);const h=()=>jt(void 0,null,function*(){a(!0);try{const{data:e,error:r}=yield s.from("song_requests").select("*").order("votes",{ascending:!1});if(r)throw r;t(e||[])}catch(e){console.error("Error loading song requests:",e)}a(!1)}),b=(r,l)=>jt(void 0,null,function*(){try{const{error:a}=yield s.from("song_requests").update({status:l,updated_at:(new Date).toISOString()}).eq("id",r);if(a)throw a;t(e.map(e=>e.id===r?vt(yt({},e),{status:l}):e))}catch(a){console.error("Error updating status:",a)}}),f=e=>({new:"blue",considering:"yellow",planned:"purple",recording:"orange",completed:"green",declined:"red"}[e]||"gray"),y=[...e.filter(e=>"all"===o||e.status===o)].sort((e,t)=>"votes"===x?t.votes-e.votes:"priority"===x?t.priority_score-e.priority_score:new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return r?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-white",children:"Song Requests"}),l.jsx("p",{className:"text-sm text-purple-300",children:"Manage fan song requests"})]}),l.jsx("div",{className:"flex gap-2",children:["all","new","considering","planned"].map(e=>l.jsx("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(o===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:e},e))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"text-sm text-purple-300",children:"Sort by:"}),["votes","recent","priority"].map(e=>l.jsx("button",{onClick:()=>m(e),className:"px-3 py-1 rounded text-sm font-medium capitalize "+(x===e?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 border border-purple-500/30"),children:e},e))]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.map(r=>{return l.jsxs("div",{className:"p-6 rounded-xl border transition-all bg-black/40 backdrop-blur-xl border-purple-500/30 hover:border-purple-500/50",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(T,{size:20,className:"text-purple-500"}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${f(r.status)}-100 text-${f(r.status)}-700`,children:r.status}),r.difficulty&&l.jsx("span",{className:"text-xs font-medium "+(a=r.difficulty,"easy"===a?"text-green-500":"medium"===a?"text-yellow-500":"hard"===a?"text-red-500":"text-gray-500"),children:r.difficulty})]}),l.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:r.song_title}),r.original_artist&&l.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["by ",r.original_artist]}),r.reason&&l.jsxs("p",{className:"text-sm mb-3 text-purple-200",children:['"',r.reason,'"']}),r.requested_by_name&&l.jsxs("p",{className:"text-xs mb-2 text-purple-400",children:["Requested by ",r.requested_by_name]}),r.genre_tags&&r.genre_tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:r.genre_tags.map((e,t)=>l.jsx("span",{className:"px-2 py-1 rounded text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",children:e},t))}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>{return l=r.id,jt(void 0,null,function*(){try{const r=e.find(e=>e.id===l);if(!r)return;const{error:a}=yield s.from("song_requests").update({votes:r.votes+1,priority_score:r.priority_score+1,updated_at:(new Date).toISOString()}).eq("id",l);if(a)throw a;t(e.map(e=>e.id===l?vt(yt({},e),{votes:e.votes+1,priority_score:e.priority_score+1}):e))}catch(r){console.error("Error voting:",r)}});var l},className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700",children:[l.jsx(I,{size:16}),l.jsx("span",{className:"font-bold",children:r.votes}),l.jsx("span",{children:"votes"})]}),r.priority_score>0&&l.jsxs("div",{className:"flex items-center gap-1 text-sm text-yellow-600",children:[l.jsx(M,{size:16}),l.jsx("span",{children:r.priority_score})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:()=>i(r),className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:l.jsx(_,{size:16,className:"text-purple-300"})}),l.jsx("button",{onClick:()=>{return l=r.id,jt(void 0,null,function*(){if(confirm("Delete this song request?"))try{const{error:r}=yield s.from("song_requests").delete().eq("id",l);if(r)throw r;t(e.filter(e=>e.id!==l))}catch(r){console.error("Error deleting request:",r)}});var l},className:"p-2 rounded hover:bg-red-100",children:l.jsx(g,{size:16,className:"text-red-600"})})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:["new"===r.status&&l.jsx("button",{onClick:()=>b(r.id,"considering"),className:"flex-1 px-3 py-1 text-xs bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Consider"}),"considering"===r.status&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>b(r.id,"planned"),className:"flex-1 px-3 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"Plan"}),l.jsx("button",{onClick:()=>b(r.id,"declined"),className:"flex-1 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Decline"})]}),"planned"===r.status&&l.jsx("button",{onClick:()=>b(r.id,"recording"),className:"flex-1 px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Start Recording"}),"recording"===r.status&&l.jsx("button",{onClick:()=>b(r.id,"completed"),className:"flex-1 px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Complete"})]})]},r.id);var a}),0===y.length&&l.jsxs("div",{className:"col-span-2 text-center py-12",children:[l.jsx(T,{size:48,className:"mx-auto mb-4 text-purple-500/50"}),l.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No song requests yet"})]})]}),n&&c.createPortal(l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:l.jsx("div",{className:"w-full max-w-lg bg-black/95 backdrop-blur-xl rounded-lg shadow-xl max-h-[90vh] overflow-y-auto border border-purple-500/30",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Edit Song Request"}),l.jsx("button",{onClick:()=>i(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:l.jsx(p,{size:20,className:"text-purple-300"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),l.jsxs("select",{value:n.status,onChange:e=>i(vt(yt({},n),{status:e.target.value})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",children:[l.jsx("option",{value:"new",children:"New"}),l.jsx("option",{value:"considering",children:"Considering"}),l.jsx("option",{value:"planned",children:"Planned"}),l.jsx("option",{value:"recording",children:"Recording"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"declined",children:"Declined"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Difficulty"}),l.jsxs("select",{value:n.difficulty||"",onChange:e=>i(vt(yt({},n),{difficulty:e.target.value})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",children:[l.jsx("option",{value:"",children:"Not set"}),l.jsx("option",{value:"easy",children:"Easy"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"hard",children:"Hard"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Priority Score"}),l.jsx("input",{type:"number",value:n.priority_score,onChange:e=>i(vt(yt({},n),{priority_score:Number(e.target.value)})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Estimated Production Days"}),l.jsx("input",{type:"number",value:n.estimated_production_days||"",onChange:e=>i(vt(yt({},n),{estimated_production_days:Number(e.target.value)||void 0})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., 7"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"YouTube Reference"}),l.jsx("input",{type:"url",value:n.youtube_reference_url||"",onChange:e=>i(vt(yt({},n),{youtube_reference_url:e.target.value})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"https://youtube.com/..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Notes"}),l.jsx("textarea",{value:n.notes||"",onChange:e=>i(vt(yt({},n),{notes:e.target.value})),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"Add notes about this request..."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>i(null),className:"flex-1 px-4 py-2 border rounded-lg border-purple-500/30 text-purple-300 hover:bg-purple-500/20 transition-colors",children:"Cancel"}),l.jsxs("button",{onClick:()=>jt(void 0,null,function*(){if(n)try{const{error:r}=yield s.from("song_requests").update(n).eq("id",n.id);if(r)throw r;t(e.map(e=>e.id===n.id?n:e)),i(null)}catch(r){console.error("Error saving request:",r),alert("Failed to save request")}}),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700",children:[l.jsx(P,{size:16}),"Save Changes"]})]})]})})}),document.body)]})};var wt=Object.defineProperty,kt=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,Et=(e,t,r)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zt=(e,t)=>{for(var r in t||(t={}))Ct.call(t,r)&&Et(e,r,t[r]);if(St)for(var r of St(t))Pt.call(t,r)&&Et(e,r,t[r]);return e},Ot=(e,t)=>kt(e,_t(t)),At=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const Dt=()=>{const{theme:e}=i(),[t,r]=d.useState([]),[a,n]=d.useState(!0),[o,u]=d.useState(null),[x,m]=d.useState(!1),[h,b]=d.useState("all");d.useState("list"),d.useEffect(()=>{f()},[]);const f=()=>At(void 0,null,function*(){n(!0);try{const{data:e,error:t}=yield s.from("content_calendar").select("*").order("target_publish_date",{ascending:!0});if(t)throw t;r(e||[])}catch(e){console.error("Error loading content calendar:",e)}n(!1)}),y=e=>({idea:"gray",planning:"blue",recording:"purple",editing:"yellow",review:"orange",scheduled:"green",published:"emerald",cancelled:"red"}[e]||"gray"),v=t.filter(e=>"all"===h||("upcoming"===h?e.target_publish_date&&new Date(e.target_publish_date)>new Date:"in-progress"!==h||["planning","recording","editing","review"].includes(e.status)));return a?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-white",children:"Content Calendar"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Plan and schedule your content"})]}),l.jsxs("div",{className:"flex gap-2",children:[["all","upcoming","in-progress"].map(t=>l.jsx("button",{onClick:()=>b(t),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(h===t?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===e?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:t.replace("-"," ")},t)),l.jsxs("button",{onClick:()=>{const e={id:"",title:"",content_type:"cover",platforms:[],status:"idea",priority:"medium",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};u(e),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[l.jsx(N,{size:20}),"Add Content"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[v.map(a=>{const n=a.target_publish_date?Math.ceil((new Date(a.target_publish_date).getTime()-(new Date).getTime())/864e5):null;return l.jsx("div",{className:"p-6 rounded-xl border transition-all "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xl",children:(i=a.priority,"urgent"===i?"ðŸ”´":"high"===i?"ðŸŸ ":"medium"===i?"ðŸŸ¡":"ðŸŸ¢")}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${y(a.status)}-100 text-${y(a.status)}-700`,children:a.status}),l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize "+("dark"===e?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:a.content_type.replace("_"," ")})]}),l.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:a.title}),a.scripture_reference&&l.jsxs("p",{className:"text-sm mb-2 "+("dark"===e?"text-purple-400":"text-purple-600"),children:["ðŸ“– ",a.scripture_reference]}),a.notes&&l.jsx("p",{className:"text-sm mb-3 text-gray-400",children:a.notes}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.platforms.map(t=>l.jsx("span",{className:"px-2 py-1 rounded text-xs "+("dark"===e?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:t},t))}),a.target_publish_date&&l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(L,{size:16,className:"text-gray-400"}),l.jsxs("span",{className:"text-gray-400",children:[new Date(a.target_publish_date).toLocaleDateString(),null!==n&&l.jsxs("span",{className:n<0?"text-red-500":n<7?"text-orange-500":"",children:[" ","(",n>0?`in ${n} days`:0===n?"today":`${Math.abs(n)} days overdue`,")"]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{u(a),m(!1)},className:"p-2 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:l.jsx(_,{size:16,className:"text-gray-400"})}),l.jsx("button",{onClick:()=>{return e=a.id,At(void 0,null,function*(){if(confirm("Delete this content item?"))try{const{error:l}=yield s.from("content_calendar").delete().eq("id",e);if(l)throw l;r(t.filter(t=>t.id!==e))}catch(l){console.error("Error deleting item:",l)}});var e},className:"p-2 rounded hover:bg-red-100",children:l.jsx(g,{size:16,className:"text-red-600"})})]})]})},a.id);var i}),0===v.length&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx(q,{size:48,className:"mx-auto mb-4 text-gray-400"}),l.jsx("p",{className:"text-lg font-medium text-gray-400",children:"No content planned yet"}),l.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Content" to start planning'})]})]}),o&&c.createPortal(l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:l.jsx("div",{className:`w-full max-w-2xl ${"dark"===e?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl max-h-[90vh] overflow-y-auto`,children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:x?"Add Content":"Edit Content"}),l.jsx("button",{onClick:()=>{u(null),m(!1)},className:"p-1 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:l.jsx(p,{size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Title *"}),l.jsx("input",{type:"text",value:o.title,onChange:e=>u(Ot(zt({},o),{title:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Amazing Grace Cover"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Content Type"}),l.jsxs("select",{value:o.content_type,onChange:e=>u(Ot(zt({},o),{content_type:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[l.jsx("option",{value:"cover",children:"Cover"}),l.jsx("option",{value:"original",children:"Original"}),l.jsx("option",{value:"worship_moment",children:"Worship Moment"}),l.jsx("option",{value:"testimony",children:"Testimony"}),l.jsx("option",{value:"bts",children:"Behind the Scenes"}),l.jsx("option",{value:"live",children:"Live Performance"}),l.jsx("option",{value:"collaboration",children:"Collaboration"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Status"}),l.jsxs("select",{value:o.status,onChange:e=>u(Ot(zt({},o),{status:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[l.jsx("option",{value:"idea",children:"Idea"}),l.jsx("option",{value:"planning",children:"Planning"}),l.jsx("option",{value:"recording",children:"Recording"}),l.jsx("option",{value:"editing",children:"Editing"}),l.jsx("option",{value:"review",children:"Review"}),l.jsx("option",{value:"scheduled",children:"Scheduled"}),l.jsx("option",{value:"published",children:"Published"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),l.jsxs("select",{value:o.priority,onChange:e=>u(Ot(zt({},o),{priority:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"urgent",children:"Urgent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),l.jsx("input",{type:"date",value:o.target_publish_date||"",onChange:e=>u(Ot(zt({},o),{target_publish_date:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Scripture Reference"}),l.jsx("input",{type:"text",value:o.scripture_reference||"",onChange:e=>u(Ot(zt({},o),{scripture_reference:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Psalm 23:1-6"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Platforms"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:["YouTube","Instagram","TikTok","Facebook"].map(e=>l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:o.platforms.includes(e),onChange:t=>{t.target.checked?u(Ot(zt({},o),{platforms:[...o.platforms,e]})):u(Ot(zt({},o),{platforms:o.platforms.filter(t=>t!==e)}))},className:"rounded"}),l.jsx("span",{className:"text-sm text-gray-300",children:e})]},e))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),l.jsx("textarea",{value:o.notes||"",onChange:e=>u(Ot(zt({},o),{notes:e.target.value})),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or ideas..."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{u(null),m(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===e?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),l.jsxs("button",{onClick:()=>At(void 0,null,function*(){if(o&&o.title.trim())try{if(x){const e=o,{id:l,created_at:a,updated_at:n}=e,i=((e,t)=>{var r={};for(var s in e)Ct.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&St)for(var s of St(e))t.indexOf(s)<0&&Pt.call(e,s)&&(r[s]=e[s]);return r})(e,["id","created_at","updated_at"]),{data:d,error:c}=yield s.from("content_calendar").insert([i]).select().single();if(c)throw c;d&&r([...t,d])}else{const{error:e}=yield s.from("content_calendar").update(o).eq("id",o.id);if(e)throw e;r(t.map(e=>e.id===o.id?o:e))}u(null),m(!1)}catch(e){console.error("Error saving item:",e),alert("Failed to save item")}}),disabled:!o.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(P,{size:16}),x?"Add Content":"Save Changes"]})]})]})})}),document.body)]})};var Tt=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const qt=(e,t)=>Tt(void 0,null,function*(){try{const{error:r}=yield s.from("goals").update(t).eq("id",e);if(r)throw r;return!0}catch(r){return console.error("Error updating goal:",r),!1}}),It=(e,t)=>Tt(void 0,null,function*(){try{let t=s.from("revenue_expenses").select("*").order("transaction_date",{ascending:!1});e&&(t=t.gte("transaction_date",e));const{data:r,error:l}=yield t;if(l)throw l;return r||[]}catch(t){return console.error("Error fetching revenue/expenses:",t),[]}});var Mt=Object.defineProperty,Lt=Object.defineProperties,$t=Object.getOwnPropertyDescriptors,Rt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,Ut=(e,t,r)=>t in e?Mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vt=(e,t)=>{for(var r in t||(t={}))Ft.call(t,r)&&Ut(e,r,t[r]);if(Rt)for(var r of Rt(t))Bt.call(t,r)&&Ut(e,r,t[r]);return e},Gt=(e,t)=>Lt(e,$t(t)),Ht=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const Wt=()=>{const{theme:e}=i(),[t,r]=d.useState([]),[a,n]=d.useState(!0),[o,c]=d.useState(null),[u,x]=d.useState(!1),[m,h]=d.useState("all"),[b,f]=d.useState("30d"),[y,v]=d.useState({totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}});d.useEffect(()=>{j()},[b]);const j=()=>Ht(void 0,null,function*(){n(!0);try{const e="30d"===b?30:"90d"===b?90:365,t=new Date;t.setDate(t.getDate()-e);const s=yield It(t.toISOString().split("T")[0]);r(s);const l=yield(e=>Tt(void 0,null,function*(){try{const t=yield It(e),r=t.filter(e=>"revenue"===e.type),s=t.filter(e=>"expense"===e.type),l=r.reduce((e,t)=>e+t.amount,0),a=s.reduce((e,t)=>e+t.amount,0),n={};r.forEach(e=>{n[e.category]=(n[e.category]||0)+e.amount});const i={};return s.forEach(e=>{i[e.category]=(i[e.category]||0)+e.amount}),{totalRevenue:l,totalExpenses:a,netProfit:l-a,revenueByCategory:n,expensesByCategory:i}}catch(t){return console.error("Error calculating financial summary:",t),{totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}}}}))(t.toISOString().split("T")[0]);v(l)}catch(e){console.error("Error loading financial data:",e)}n(!1)}),N=e=>{const t={id:"",transaction_date:(new Date).toISOString().split("T")[0],type:e,category:"",amount:0,currency:"NGN",is_recurring:!1,created_at:(new Date).toISOString()};c(t),x(!0)},w=e=>Ht(void 0,null,function*(){if(!confirm("Delete this transaction?"))return;const l=yield(e=>Tt(void 0,null,function*(){try{const{error:t}=yield s.from("revenue_expenses").delete().eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Error deleting transaction:",t),!1}}))(e);l&&(r(t.filter(t=>t.id!==e)),yield j())}),k=t.filter(e=>"all"===m||e.type===m);return a?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-white",children:"Financial Dashboard"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Track revenue and expenses"})]}),l.jsx("div",{className:"flex gap-2",children:["30d","90d","year"].map(t=>l.jsx("button",{onClick:()=>f(t),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(b===t?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===e?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:"30d"===t?"30 Days":"90d"===t?"90 Days":"Year"},t))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Revenue"}),l.jsx($,{size:20,className:"text-green-500"})]}),l.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["â‚¦",y.totalRevenue.toLocaleString()]})]}),l.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Expenses"}),l.jsx(R,{size:20,className:"text-red-500"})]}),l.jsxs("p",{className:"text-3xl font-bold text-red-500",children:["â‚¦",y.totalExpenses.toLocaleString()]})]}),l.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Net Profit"}),l.jsx(F,{size:20,className:y.netProfit>=0?"text-green-500":"text-red-500"})]}),l.jsxs("p",{className:"text-3xl font-bold "+(y.netProfit>=0?"text-green-500":"text-red-500"),children:["â‚¦",y.netProfit.toLocaleString()]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[l.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Revenue by Category"}),l.jsxs("div",{className:"space-y-3",children:[Object.entries(y.revenueByCategory).map(([t,r])=>{const s=y.totalRevenue>0?r/y.totalRevenue*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("span",{className:"text-sm text-gray-300",children:t}),l.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["â‚¦",r.toLocaleString()," (",s.toFixed(1),"%)"]})]}),l.jsx("div",{className:"h-2 rounded-full overflow-hidden "+("dark"===e?"bg-gray-700":"bg-gray-200"),children:l.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600",style:{width:`${s}%`}})})]},t)}),0===Object.keys(y.revenueByCategory).length&&l.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No revenue recorded yet"})]})]}),l.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[l.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Expenses by Category"}),l.jsxs("div",{className:"space-y-3",children:[Object.entries(y.expensesByCategory).map(([t,r])=>{const s=y.totalExpenses>0?r/y.totalExpenses*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("span",{className:"text-sm text-gray-300",children:t}),l.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["â‚¦",r.toLocaleString()," (",s.toFixed(1),"%)"]})]}),l.jsx("div",{className:"h-2 rounded-full overflow-hidden "+("dark"===e?"bg-gray-700":"bg-gray-200"),children:l.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600",style:{width:`${s}%`}})})]},t)}),0===Object.keys(y.expensesByCategory).length&&l.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No expenses recorded yet"})]})]})]}),l.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:"Recent Transactions"}),l.jsxs("div",{className:"flex gap-2",children:[["all","revenue","expense"].map(t=>l.jsx("button",{onClick:()=>h(t),className:"px-3 py-1 rounded text-sm font-medium capitalize "+(m===t?"bg-purple-600 text-white":"dark"===e?"bg-gray-800 text-gray-100":"bg-black text-gray-100"),children:t},t)),l.jsx("button",{onClick:()=>N("revenue"),className:"px-3 py-1 rounded text-sm font-medium bg-green-600 text-white hover:bg-green-700",children:"+ Revenue"}),l.jsx("button",{onClick:()=>N("expense"),className:"px-3 py-1 rounded text-sm font-medium bg-red-600 text-white hover:bg-red-700",children:"+ Expense"})]})]}),l.jsxs("div",{className:"space-y-2",children:[k.slice(0,20).map(t=>l.jsxs("div",{className:"p-4 rounded-lg border flex items-center justify-between "+("dark"===e?"bg-gray-700 border-gray-600":"bg-gray-800/50 border-purple-500/20"),children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("revenue"===t.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:t.type}),l.jsx("span",{className:"text-sm font-medium text-white",children:t.category})]}),t.description&&l.jsx("p",{className:"text-sm text-gray-400",children:t.description}),l.jsx("p",{className:"text-xs text-gray-500",children:new Date(t.transaction_date).toLocaleDateString()})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"text-lg font-bold "+("revenue"===t.type?"text-green-500":"text-red-500"),children:["revenue"===t.type?"+":"-","â‚¦",t.amount.toLocaleString()]}),l.jsx("button",{onClick:()=>w(t.id),className:"p-2 rounded hover:bg-red-100",children:l.jsx(g,{size:16,className:"text-red-600"})})]})]},t.id)),0===k.length&&l.jsx("p",{className:"text-center py-8 text-gray-500",children:"No transactions yet"})]})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:`w-full max-w-md ${"dark"===e?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl`,children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Add ","revenue"===o.type?"Revenue":"Expense"]}),l.jsx("button",{onClick:()=>{c(null),x(!1)},className:"p-1 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:l.jsx(p,{size:20})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category *"}),l.jsxs("select",{value:o.category,onChange:e=>c(Gt(Vt({},o),{category:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[l.jsx("option",{value:"",children:"Select category"}),("revenue"===o.type?["YouTube Ad Revenue","Bookings","Donations","Merchandise","Streaming","Teaching","Sponsorships"]:["Equipment","Software","Studio Rental","Travel","Marketing","Website","Production","Costumes","Professional Services"]).map(e=>l.jsx("option",{value:e,children:e},e))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Amount (â‚¦) *"}),l.jsx("input",{type:"number",value:o.amount,onChange:e=>c(Gt(Vt({},o),{amount:Number(e.target.value)})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Date"}),l.jsx("input",{type:"date",value:o.transaction_date,onChange:e=>c(Gt(Vt({},o),{transaction_date:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Description"}),l.jsx("textarea",{value:o.description||"",onChange:e=>c(Gt(Vt({},o),{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add details..."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{c(null),x(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===e?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),l.jsxs("button",{onClick:()=>Ht(void 0,null,function*(){var e;if(!o||!o.category||o.amount<=0)alert("Please fill in all required fields");else try{if(u){const l=o,{id:a,created_at:n}=l,i=((e,t)=>{var r={};for(var s in e)Ft.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&Rt)for(var s of Rt(e))t.indexOf(s)<0&&Bt.call(e,s)&&(r[s]=e[s]);return r})(l,["id","created_at"]),d=yield(e=i,Tt(void 0,null,function*(){try{const{data:t,error:r}=yield s.from("revenue_expenses").insert([e]).select().single();if(r)throw r;return t}catch(t){return console.error("Error adding transaction:",t),null}}));d&&(r([d,...t]),yield j())}c(null),x(!1)}catch(l){console.error("Error saving transaction:",l),alert("Failed to save transaction")}}),disabled:!o.category||o.amount<=0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(P,{size:16}),"Save"]})]})]})})})]})};var Jt=Object.defineProperty,Yt=Object.defineProperties,Qt=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,er=(e,t,r)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tr=(e,t)=>{for(var r in t||(t={}))Kt.call(t,r)&&er(e,r,t[r]);if(Zt)for(var r of Zt(t))Xt.call(t,r)&&er(e,r,t[r]);return e},rr=(e,t)=>Yt(e,Qt(t)),sr=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const lr=()=>{const{theme:e}=i(),[t,r]=d.useState([]),[a,n]=d.useState(!0),[o,u]=d.useState(null),[x,m]=d.useState(!1),[h,b]=d.useState("all");d.useEffect(()=>{f()},[]);const f=()=>sr(void 0,null,function*(){n(!0);const e=yield Tt(void 0,null,function*(){try{const{data:e,error:t}=yield s.from("goals").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(e){return console.error("Error fetching goals:",e),[]}});r(e),n(!1)}),y=e=>sr(void 0,null,function*(){if(!confirm("Delete this goal?"))return;const l=yield(e=>Tt(void 0,null,function*(){try{const{error:t}=yield s.from("goals").delete().eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Error deleting goal:",t),!1}}))(e);l&&r(t.filter(t=>t.id!==e))}),v=t.filter(e=>"all"===h||e.status===h),j=e=>({content:"purple",growth:"blue",ministry:"pink",financial:"green",engagement:"orange",learning:"indigo",personal:"red"}[e]||"gray");return a?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-white",children:"Goals Tracker"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Set and track your ministry goals"})]}),l.jsxs("div",{className:"flex gap-2",children:[["all","active","completed"].map(t=>l.jsx("button",{onClick:()=>b(t),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(h===t?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===e?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:t},t)),l.jsxs("button",{onClick:()=>{const e={id:"",title:"",category:"content",target_value:0,current_value:0,start_date:(new Date).toISOString().split("T")[0],priority:"medium",status:"active",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};u(e),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[l.jsx(N,{size:20}),"Add Goal"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.map(s=>{const a=s.target_value>0?s.current_value/s.target_value*100:0,n="completed"===s.status,i=s.target_date?Math.ceil((new Date(s.target_date).getTime()-(new Date).getTime())/864e5):null;return l.jsxs("div",{className:`p-6 rounded-xl border transition-all ${"dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"} ${n?"opacity-75":""}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${j(s.category)}-100 text-${j(s.category)}-700`,children:s.category}),l.jsx("span",{className:`text-xs font-medium ${o=s.priority,{low:"text-gray-500",medium:"text-yellow-500",high:"text-red-500"}[o]||"text-gray-500"}`,children:s.priority})]}),l.jsx("h3",{className:"text-lg font-bold text-white",children:s.title}),s.notes&&l.jsx("p",{className:"text-sm mt-1 text-gray-400",children:s.notes})]}),l.jsx("div",{className:"flex items-center gap-2",children:n?l.jsx(B,{size:24,className:"text-green-500"}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{u(s),m(!1)},className:"p-2 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:l.jsx(_,{size:16,className:"text-gray-400"})}),l.jsx("button",{onClick:()=>y(s.id),className:"p-2 rounded hover:bg-red-100",children:l.jsx(g,{size:16,className:"text-red-600"})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Progress"}),l.jsxs("span",{className:"text-sm font-bold text-white",children:[s.current_value," / ",s.target_value," ",s.unit||""]})]}),l.jsx("div",{className:"h-3 rounded-full overflow-hidden "+("dark"===e?"bg-gray-700":"bg-gray-200"),children:l.jsx("div",{className:"h-full transition-all "+(n?"bg-green-500":"bg-gradient-to-r from-purple-600 to-pink-600"),style:{width:`${Math.min(a,100)}%`}})}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:[a.toFixed(1),"% complete"]}),!n&&l.jsx("input",{type:"number",value:s.current_value,onChange:e=>((e,s)=>sr(void 0,null,function*(){const l=rr(tr({},e),{current_value:s});s>=e.target_value&&"active"===e.status&&(l.status="completed"),(yield qt(e.id,l))&&r(t.map(t=>t.id===e.id?l:t))}))(s,Number(e.target.value)),className:"w-20 px-2 py-1 text-xs rounded border "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),null!==i&&!n&&l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(L,{size:16,className:"text-gray-400"}),l.jsx("span",{className:"text-gray-400",children:i>0?`${i} days left`:0===i?"Due today":`${Math.abs(i)} days overdue`})]})]},s.id);var o}),0===v.length&&l.jsxs("div",{className:"col-span-2 text-center py-12",children:[l.jsx(U,{size:48,className:"mx-auto mb-4 text-gray-400"}),l.jsxs("p",{className:"text-lg font-medium text-gray-400",children:["No ","all"!==h?h:""," goals yet"]}),l.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Goal" to create your first goal'})]})]}),o&&c.createPortal(l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:l.jsx("div",{className:`w-full max-w-lg ${"dark"===e?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl max-h-[90vh] overflow-y-auto`,children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:x?"Add New Goal":"Edit Goal"}),l.jsx("button",{onClick:()=>{u(null),m(!1)},className:"p-1 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:l.jsx(p,{size:20,className:"text-gray-400"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Goal Title *"}),l.jsx("input",{type:"text",value:o.title,onChange:e=>u(rr(tr({},o),{title:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Upload 10 videos this month"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category"}),l.jsxs("select",{value:o.category,onChange:e=>u(rr(tr({},o),{category:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[l.jsx("option",{value:"content",children:"Content"}),l.jsx("option",{value:"growth",children:"Growth"}),l.jsx("option",{value:"ministry",children:"Ministry"}),l.jsx("option",{value:"financial",children:"Financial"}),l.jsx("option",{value:"engagement",children:"Engagement"}),l.jsx("option",{value:"learning",children:"Learning"}),l.jsx("option",{value:"personal",children:"Personal"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),l.jsxs("select",{value:o.priority,onChange:e=>u(rr(tr({},o),{priority:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"high",children:"High"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Value"}),l.jsx("input",{type:"number",value:o.target_value,onChange:e=>u(rr(tr({},o),{target_value:Number(e.target.value)})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Current Value"}),l.jsx("input",{type:"number",value:o.current_value,onChange:e=>u(rr(tr({},o),{current_value:Number(e.target.value)})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Unit (optional)"}),l.jsx("input",{type:"text",value:o.unit||"",onChange:e=>u(rr(tr({},o),{unit:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., videos, subscribers, â‚¦"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),l.jsx("input",{type:"date",value:o.target_date||"",onChange:e=>u(rr(tr({},o),{target_date:e.target.value})),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),l.jsx("textarea",{value:o.notes||"",onChange:e=>u(rr(tr({},o),{notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or strategy..."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{u(null),m(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===e?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),l.jsxs("button",{onClick:()=>sr(void 0,null,function*(){var e;if(o&&o.title.trim())try{if(x){const l=o,{id:a,created_at:n,updated_at:i}=l,d=((e,t)=>{var r={};for(var s in e)Kt.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&Zt)for(var s of Zt(e))t.indexOf(s)<0&&Xt.call(e,s)&&(r[s]=e[s]);return r})(l,["id","created_at","updated_at"]),c=yield(e=d,Tt(void 0,null,function*(){try{const{data:t,error:r}=yield s.from("goals").insert([e]).select().single();if(r)throw r;return t}catch(t){return console.error("Error adding goal:",t),null}}));c&&r([c,...t])}else(yield qt(o.id,o))&&r(t.map(e=>e.id===o.id?o:e));u(null),m(!1)}catch(l){console.error("Error saving goal:",l),alert("Failed to save goal")}}),disabled:!o.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(P,{size:16}),x?"Add Goal":"Save Changes"]})]})]})})}),document.body)]})};function ar(){const[e,t]=d.useState("7d"),[r,s]=d.useState({pageViews:[],topPages:[],userLocations:[],deviceBreakdown:[],peakHours:[],userRetention:[]}),[a,n]=d.useState(!0),[i,o]=d.useState(!1);d.useEffect(()=>{c(),setTimeout(()=>o(!0),100)},[e]);const c=()=>{return t=this,r=null,l=function*(){try{const t=yield de(),r=(null==t?void 0:t.total_visits)||0,l="7d"===e?7:"30d"===e?30:90,a=Math.floor(r/l);s({pageViews:u(l,a),topPages:[{page:"/home",views:Math.floor(.35*r)},{page:"/videos",views:Math.floor(.28*r)},{page:"/about",views:Math.floor(.2*r)},{page:"/contact",views:Math.floor(.12*r)},{page:"/gallery",views:Math.floor(.05*r)}],userLocations:[{country:"United States",users:Math.floor(.32*r)},{country:"United Kingdom",users:Math.floor(.18*r)},{country:"Canada",users:Math.floor(.12*r)},{country:"Australia",users:Math.floor(.1*r)},{country:"Germany",users:Math.floor(.08*r)}],deviceBreakdown:[{device:"Mobile",percentage:65},{device:"Desktop",percentage:28},{device:"Tablet",percentage:7}],peakHours:p(),userRetention:x()})}catch(t){console.error("Error loading analytics:",t)}finally{n(!1)}},new Promise((e,s)=>{var a=e=>{try{i(l.next(e))}catch(t){s(t)}},n=e=>{try{i(l.throw(e))}catch(t){s(t)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);i((l=l.apply(t,r)).next())});var t,r,l},u=(e,t)=>Array.from({length:e},(r,s)=>{const l=new Date;l.setDate(l.getDate()-(e-s-1));const a=Math.floor(.3*t);return{date:l.toLocaleDateString("en-US",{month:"short",day:"numeric"}),views:Math.max(10,t+Math.floor(Math.random()*a*2-a))}}),p=()=>Array.from({length:24},(e,t)=>({hour:t,activity:Math.floor(80*Math.random())+(t>=8&&t<=22?40:10)})),x=()=>Array.from({length:8},(e,t)=>({week:`Week ${t+1}`,rate:Math.max(30,100-8*t-10*Math.random())}));return a?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):l.jsxs(l.Fragment,{children:[l.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n      "}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Advanced Analytics"}),l.jsx("p",{className:"text-purple-300 mt-1",children:"Deep insights into user behavior and engagement"})]}),l.jsxs("select",{value:e,onChange:e=>t(e.target.value),className:"px-4 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[l.jsx("option",{value:"7d",children:"Last 7 Days"}),l.jsx("option",{value:"30d",children:"Last 30 Days"}),l.jsx("option",{value:"90d",children:"Last 90 Days"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-4 border border-purple-500/20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-purple-300 text-sm",children:"Total Page Views"}),l.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.pageViews.reduce((e,t)=>e+t.views,0).toLocaleString()}),l.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 12.5% vs last period"})]}),l.jsx(V,{className:"w-8 h-8 text-purple-400"})]})}),l.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-4 border border-blue-500/20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-blue-300 text-sm",children:"Unique Visitors"}),l.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.userLocations.reduce((e,t)=>e+t.users,0).toLocaleString()}),l.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 8.3% vs last period"})]}),l.jsx(z,{className:"w-8 h-8 text-blue-400"})]})}),l.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-4 border border-green-500/20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-green-300 text-sm",children:"Avg Session Time"}),l.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"4m 32s"}),l.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 15.2% vs last period"})]}),l.jsx(L,{className:"w-8 h-8 text-green-400"})]})}),l.jsx("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-4 border border-orange-500/20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-orange-300 text-sm",children:"Bounce Rate"}),l.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"32.4%"}),l.jsx("p",{className:"text-red-400 text-xs mt-1",children:"â†“ 5.1% vs last period"})]}),l.jsx(G,{className:"w-8 h-8 text-orange-400"})]})})]}),l.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[l.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Page Views Over Time"}),((e,t)=>{const r=Math.max(...e.map(e=>e.views),1),s=e.map((t,s)=>({x:s/(e.length-1||1)*100,y:100-t.views/r*80})),a=s.map((e,t)=>`${0===t?"M":"L"} ${e.x},${e.y}`).join(" "),n=`${a} L ${s[s.length-1].x},100 L 0,100 Z`;return l.jsx("div",{className:"relative h-64",children:l.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"analytics-gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.4"}),l.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.05"})]})}),l.jsx("path",{d:n,fill:"url(#analytics-gradient)",style:{animation:i?"drawPath 1.5s ease-out forwards":"none",opacity:i?1:0}}),l.jsx("path",{d:a,fill:"none",stroke:t,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:i?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:"1000",strokeDashoffset:i?"0":"1000"}}),s.map((e,r)=>l.jsx("circle",{cx:e.x,cy:e.y,r:"1.5",fill:t,style:{animation:i?`fadeInScale 0.3s ease-out ${.5+.05*r}s forwards`:"none",opacity:i?1:0}},r))]})})})(r.pageViews,"#9333ea")]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[l.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx($,{className:"w-5 h-5"}),"Top Pages"]}),l.jsx("div",{className:"space-y-3",children:r.topPages.map((e,t)=>l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-white font-medium",children:e.page}),l.jsxs("span",{className:"text-purple-300 text-sm",children:[e.views.toLocaleString()," views"]})]}),l.jsx("div",{className:"w-full bg-purple-500/20 rounded-full h-2",children:l.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 h-2 rounded-full transition-all",style:{width:e.views/r.topPages[0].views*100+"%",animation:i?`slideIn 0.5s ease-out ${.1*t}s forwards`:"none"}})})]})},t))})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-6 border border-blue-500/20",children:[l.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx(H,{className:"w-5 h-5"}),"Top Locations"]}),l.jsx("div",{className:"space-y-3",children:r.userLocations.map((e,t)=>l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-white font-medium",children:e.country}),l.jsxs("span",{className:"text-blue-300 text-sm",children:[e.users.toLocaleString()," users"]})]}),l.jsx("div",{className:"w-full bg-blue-500/20 rounded-full h-2",children:l.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2 rounded-full transition-all",style:{width:e.users/r.userLocations[0].users*100+"%",animation:i?`slideIn 0.5s ease-out ${.1*t}s forwards`:"none"}})})]})},t))})]}),l.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-6 border border-green-500/20",children:[l.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx(W,{className:"w-5 h-5"}),"Device Breakdown"]}),l.jsx("div",{className:"space-y-4",children:r.deviceBreakdown.map((e,t)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsx("span",{className:"text-white",children:e.device}),l.jsxs("span",{className:"text-green-300",children:[e.percentage,"%"]})]}),l.jsx("div",{className:"w-full bg-green-500/20 rounded-full h-3",children:l.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 h-3 rounded-full transition-all",style:{width:`${e.percentage}%`,animation:i?`slideIn 0.5s ease-out ${.1*t}s forwards`:"none"}})})]},t))})]}),l.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-6 border border-orange-500/20",children:[l.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx(L,{className:"w-5 h-5"}),"Peak Activity Hours"]}),l.jsx("div",{className:"h-48 flex items-end justify-between gap-1",children:r.peakHours.filter((e,t)=>t%2==0).map((e,t)=>{const s=Math.max(...r.peakHours.map(e=>e.activity));return l.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[l.jsx("div",{className:"w-full bg-gradient-to-t from-orange-600 to-orange-700 rounded-t hover:from-orange-500 hover:to-orange-600 transition-all cursor-pointer",style:{height:e.activity/s*100+"%",animation:i?`slideUp 0.5s ease-out ${.05*t}s forwards`:"none",opacity:i?1:0}}),l.jsxs("span",{className:"text-xs text-orange-300",children:[e.hour,":00"]})]},t)})})]})]})]}),l.jsx("style",{children:"\n        @keyframes slideIn {\n          from {\n            width: 0;\n          }\n        }\n        @keyframes slideUp {\n          from {\n            height: 0;\n            opacity: 0;\n          }\n        }\n      "})]})}const nr=()=>{const[e,t]=d.useState(null),[r,s]=d.useState(!1),[a,n]=d.useState(!1),[i,o]=d.useState(!1),[c,u]=d.useState(!1);return d.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return void n(!0);const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;o(e);const r=e=>{e.preventDefault(),t(e),s(!0)};return window.addEventListener("beforeinstallprompt",r),window.addEventListener("appinstalled",()=>{n(!0),s(!1)}),()=>{window.removeEventListener("beforeinstallprompt",r)}},[]),a?null:l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>{return r=void 0,l=null,a=function*(){if(i)return void u(!0);if(!e)return void alert('To install this app:\n\n1. Click the menu button (â‹®) in your browser\n2. Select "Install App" or "Add to Home Screen"\n3. Follow the prompts');e.prompt();const{outcome:r}=yield e.userChoice;"accepted"===r&&(console.log("User accepted the install prompt"),n(!0)),t(null),s(!1)},new Promise((e,t)=>{var s=e=>{try{i(a.next(e))}catch(r){t(r)}},n=e=>{try{i(a.throw(e))}catch(r){t(r)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,n);i((a=a.apply(r,l)).next())});var r,l,a},className:"w-full mt-4 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold text-sm transition-all hover:shadow-lg hover:shadow-green-500/50 hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2",children:[l.jsx(J,{size:18}),"Install App"]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] rounded-2xl p-6 max-w-md w-full border border-purple-500/30 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Y,{size:24,className:"text-purple-300"}),l.jsx("h3",{className:"text-xl font-bold text-white",children:"Install on iOS"})]}),l.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:l.jsx(p,{size:20,className:"text-purple-300"})})]}),l.jsxs("div",{className:"space-y-4 text-purple-200",children:[l.jsx("p",{className:"text-sm",children:"To install this app on your iPhone or iPad:"}),l.jsxs("ol",{className:"space-y-3 text-sm",children:[l.jsxs("li",{className:"flex gap-3",children:[l.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),l.jsxs("span",{children:["Tap the ",l.jsx("strong",{className:"text-white",children:"Share"})," button at the bottom of Safari"]})]}),l.jsxs("li",{className:"flex gap-3",children:[l.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),l.jsxs("span",{children:["Scroll down and tap ",l.jsx("strong",{className:"text-white",children:'"Add to Home Screen"'})]})]}),l.jsxs("li",{className:"flex gap-3",children:[l.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),l.jsxs("span",{children:["Tap ",l.jsx("strong",{className:"text-white",children:'"Add"'})," in the top right corner"]})]})]}),l.jsx("div",{className:"mt-4 p-3 bg-purple-500/10 rounded-lg border border-purple-500/20",children:l.jsx("p",{className:"text-xs text-purple-300",children:"ðŸ’¡ The app icon will appear on your home screen and work like a native app!"})})]}),l.jsx("button",{onClick:()=>u(!1),className:"w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Got it!"})]})}),!i&&!e&&r&&l.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Q,{size:18,className:"text-blue-300 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"text-xs text-blue-200",children:[l.jsx("p",{className:"font-semibold mb-1",children:"Install this app:"}),l.jsx("p",{children:'Click the menu (â‹®) â†’ "Install App" or "Add to Home Screen"'})]})]})}),l.jsxs("div",{className:"mt-3 flex items-center justify-center gap-4 text-xs text-purple-400",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(W,{size:14}),l.jsx("span",{children:"Mobile"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Z,{size:14}),l.jsx("span",{children:"Desktop"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Y,{size:14}),l.jsx("span",{children:"iOS"})]})]})]})};var ir=Object.defineProperty,or=Object.getOwnPropertySymbols,dr=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,ur=(e,t,r)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pr=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});const xr=new class{constructor(){this.audio=null,this.notificationCount=0,this.initializeAudio(),this.requestPermission()}initializeAudio(){}requestPermission(){return pr(this,null,function*(){"Notification"in window&&"default"===Notification.permission&&(yield Notification.requestPermission())})}playSound(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.value=800,t.type="sine",r.gain.setValueAtTime(.3,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5)}catch(e){console.error("Error playing notification sound:",e)}}showNotification(e,t){return pr(this,null,function*(){if("Notification"in window&&"granted"===Notification.permission)try{const r=new Notification(e,((e,t)=>{for(var r in t||(t={}))dr.call(t,r)&&ur(e,r,t[r]);if(or)for(var r of or(t))cr.call(t,r)&&ur(e,r,t[r]);return e})({icon:"/icon-192x192.png",badge:"/icon-192x192.png"},t));return setTimeout(()=>r.close(),5e3),r}catch(r){console.error("Error showing notification:",r)}})}updateBadge(e){return pr(this,null,function*(){if(this.notificationCount=e,console.log("ðŸ”” Updating badge to:",e),"setAppBadge"in navigator)try{e>0?(yield navigator.setAppBadge(e),console.log("âœ… Badge set via navigator.setAppBadge")):(yield navigator.clearAppBadge(),console.log("âœ… Badge cleared via navigator.clearAppBadge"))}catch(t){console.error("âŒ navigator.setAppBadge error:",t)}if("serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage({type:"UPDATE_BADGE",count:e}),console.log("âœ… Badge update message sent to service worker")}catch(t){console.error("âŒ Service worker message error:",t)}this.updateFaviconBadge(e),console.log("âœ… Favicon badge updated")})}updateFaviconBadge(e){const t=document.createElement("canvas");t.width=32,t.height=32;const r=t.getContext("2d");if(!r)return;r.fillStyle="#a855f7",r.beginPath(),r.arc(16,16,16,0,2*Math.PI),r.fill(),e>0&&(r.fillStyle="#ff0000",r.beginPath(),r.arc(24,8,8,0,2*Math.PI),r.fill(),r.fillStyle="#ffffff",r.font="bold 10px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(e>99?"99+":e.toString(),24,8));const s=document.querySelector("link[rel*='icon']")||document.createElement("link");s.type="image/x-icon",s.rel="shortcut icon",s.href=t.toDataURL(),document.getElementsByTagName("head")[0].appendChild(s)}clearBadge(){return pr(this,null,function*(){yield this.updateBadge(0)})}notifyNewMessage(e,t){return pr(this,null,function*(){this.playSound(),yield this.showNotification("New Message",{body:`From ${e}: ${t}`,tag:"new-message"})})}notifyNewSongRequest(e,t){return pr(this,null,function*(){this.playSound(),yield this.showNotification("New Song Request",{body:`${t} requested: ${e}`,tag:"new-song-request"})})}notifyUserLogin(e,t){return pr(this,null,function*(){this.playSound(),yield this.showNotification("User Logged In",{body:`${e} (${t}) has logged in`,tag:"user-login"})})}notifyNewFanMessage(e,t){return pr(this,null,function*(){this.playSound(),yield this.showNotification("New Fan Message",{body:`${e} from ${t}`,tag:"new-fan-message"})})}},mr=e=>{const[t,r]=d.useState(0);d.useEffect(()=>{if(!e)return;const t=s.channel("fan_messages_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"fan_messages"},e=>{const t=e.new;xr.notifyNewFanMessage(t.message_type,t.from_name||"Anonymous"),l()}).subscribe(),r=s.channel("song_requests_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"song_requests"},e=>{const t=e.new;xr.notifyNewSongRequest(t.song_title,t.requested_by_name||"Anonymous"),l()}).subscribe();return l(),()=>{t.unsubscribe(),r.unsubscribe()}},[e]);const l=()=>{return e=void 0,t=null,l=function*(){try{const{count:e}=yield s.from("fan_messages").select("*",{count:"exact",head:!0}).eq("status","unread"),{count:t}=yield s.from("song_requests").select("*",{count:"exact",head:!0}).eq("status","new"),l=(e||0)+(t||0);r(l),yield xr.updateBadge(l)}catch(e){console.error("Error updating unread count:",e)}},new Promise((r,s)=>{var a=e=>{try{i(l.next(e))}catch(t){s(t)}},n=e=>{try{i(l.throw(e))}catch(t){s(t)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,n);i((l=l.apply(e,t)).next())});var e,t,l};return{unreadCount:t,updateUnreadCount:l}};var hr=(e,t,r)=>new Promise((s,l)=>{var a=e=>{try{i(r.next(e))}catch(t){l(t)}},n=e=>{try{i(r.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,n);i((r=r.apply(e,t)).next())});e("default",({onClose:e})=>{var a;const{profilePicture:i}=r(),[c,x]=d.useState(!1),[h,g]=d.useState(null),[b,f]=d.useState(""),[y,v]=d.useState(""),[N,w]=d.useState(!1),[k,_]=d.useState(!1),[S,C]=d.useState(""),[P,E]=d.useState(!1),[z,A]=d.useState("dashboard"),[D,I]=d.useState([]),[M,L]=d.useState({total_visitors:0,page_visits:{},artist_logins:0,last_updated:(new Date).toISOString()}),[R,B]=d.useState({videoUpdates:[],loginFrequency:[],siteVisits:[]}),[G,H]=d.useState(!1),{unreadCount:W}=mr(h);d.useEffect(()=>(document.body.classList.add("admin-panel-active"),()=>{document.body.classList.remove("admin-panel-active")}),[]),d.useEffect(()=>{H(!1)},[z]),d.useEffect(()=>{hr(void 0,null,function*(){var e;try{const{data:t}=yield s.auth.getUser();if(null==t?void 0:t.user){const r=t.user.email||"";let l=null;if(r){const{data:e}=yield s.from("users").select("*").eq("email",r).maybeSingle();e&&(l={id:e.id,email:e.email,role:e.role,phone:e.phone||"",name:e.full_name,profilePicture:i||localStorage.getItem("admin_profile_picture")||void 0})}const a=(null==(e=t.user.email)?void 0:e.split("@")[0])||"Admin",n=l||{id:t.user.id,email:r,role:"artist",phone:"",name:a,profilePicture:i||localStorage.getItem("admin_profile_picture")||void 0};g(n),x(!0),localStorage.setItem("admin_session",JSON.stringify({user:n}))}else{const e=localStorage.getItem("admin_session");if(e){const t=JSON.parse(e),r=i||localStorage.getItem("admin_profile_picture");r&&!t.user.profilePicture&&(t.user.profilePicture=r),g(t.user),x(!0)}}}catch(t){console.error("Error restoring admin session:",t)}finally{J()}})},[i]);const J=()=>hr(void 0,null,function*(){const{getVideos:e,getSettings:r}=yield n(()=>t.import("./supabaseData-legacy-Zg4XEwCS.js"),void 0),[s,l]=yield Promise.all([e(),r()]);I(s),L({total_visitors:(null==l?void 0:l.total_visits)||0,page_visits:{home:(null==l?void 0:l.total_visits)||0},artist_logins:(null==l?void 0:l.artist_logins)||0,last_updated:(new Date).toISOString()});const a=(e,t=2)=>{const r=[];for(let s=6;s>=0;s--){const l=new Date;l.setDate(l.getDate()-s);const a=Math.max(0,e+Math.floor(Math.random()*t*2-t));r.push({date:l.toISOString(),value:a})}return r},i=s.filter(e=>"completed"===e.status).length;B({videoUpdates:a(Math.floor(i/7),1),loginFrequency:a(Math.floor((null==l?void 0:l.artist_logins)/7||1),1),siteVisits:a(Math.floor(((null==l?void 0:l.total_visits)||0)/7),3)})}),Y=e=>hr(void 0,null,function*(){e.preventDefault();try{const{data:e,error:r}=yield s.auth.signInWithPassword({email:b,password:y});if(r||!e.user)return void alert("Invalid email or password. Please check your credentials.");let l=null;const{data:a}=yield s.from("users").select("*").eq("email",b).maybeSingle();a&&(l=a);const i={id:(null==l?void 0:l.id)||e.user.id,email:b,role:(null==l?void 0:l.role)||"artist",phone:(null==l?void 0:l.phone)||"",name:(null==l?void 0:l.full_name)||b.split("@")[0]||"Admin",profilePicture:localStorage.getItem("admin_profile_picture")||void 0};g(i),x(!0),localStorage.setItem("admin_session",JSON.stringify({user:i})),xr.notifyUserLogin(i.name,i.role);const{getSettings:o,updateSettings:d}=yield n(()=>t.import("./supabaseData-legacy-Zg4XEwCS.js"),void 0),c=yield o(),u=(null==c?void 0:c.artist_logins)||0;yield d({artist_logins:u+1})}catch(r){console.error("Error during admin login:",r),alert("Login failed due to a server error. Please try again.")}}),Q=e=>hr(void 0,null,function*(){e.preventDefault(),["artist@estherreign.com","editor@estherreign.com"].includes(S)?(E(!0),setTimeout(()=>{alert(`Password reset instructions have been sent to ${S}.\n\nFor demo purposes:\n- Artist password: artist2024\n- Editor password: editor2024`),_(!1),E(!1),C("")},1500)):alert("Email not found. Please check your email address.")});return c?l.jsxs("div",{className:"admin-panel fixed inset-0 bg-black overflow-hidden z-50 flex flex-col",children:[l.jsxs("div",{className:"fixed inset-0 z-0",children:[l.jsx(o,{}),l.jsx("div",{className:"absolute inset-0 bg-black/60 z-[1]"})]}),G&&l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] lg:hidden",onClick:()=>H(!1)}),l.jsx("nav",{className:"flex-shrink-0 bg-black/95 backdrop-blur-xl border-b border-purple-500/30 relative z-[90]",style:{zIndex:90,position:"relative"},children:l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>H(!0),className:"lg:hidden p-2 text-purple-200 hover:bg-purple-500/10 rounded-lg",children:l.jsx(ee,{size:24})}),l.jsxs("div",{className:"flex items-center gap-4",children:[i||(null==h?void 0:h.profilePicture)?l.jsx("img",{src:i||(null==h?void 0:h.profilePicture)||"",alt:"Profile",className:"w-10 h-10 md:w-12 md:h-12 rounded-xl object-cover shadow-lg shadow-purple-500/30"}):l.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:l.jsx("span",{className:"text-white font-black text-xl",children:null==(a=null==h?void 0:h.name)?void 0:a.charAt(0)})}),l.jsxs("div",{className:"hidden md:block",children:[l.jsx("h1",{className:"text-xl md:text-2xl font-black text-white",children:"Esther Reign Admin"}),l.jsxs("p",{className:"text-sm text-purple-300",children:[null==h?void 0:h.name," â€¢ ","artist"===(null==h?void 0:h.role)?"Artist":"Editor"]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[l.jsx(ze,{currentUser:h,externalUnreadCount:W}),l.jsxs("button",{onClick:e,className:"px-3 py-2 md:px-4 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all text-purple-200 border border-purple-500/20 flex items-center gap-1.5 md:gap-2 touch-manipulation min-h-[44px]",children:[l.jsx(V,{size:16,className:"md:w-[18px] md:h-[18px]"}),l.jsx("span",{className:"hidden md:inline",children:"View Site"})]}),l.jsxs("button",{onClick:()=>hr(void 0,null,function*(){try{yield s.auth.signOut()}catch(e){console.error("Error signing out from Supabase:",e)}x(!1),g(null),localStorage.removeItem("admin_session")}),className:"px-3 py-2 md:px-4 bg-red-500/10 hover:bg-red-500/20 rounded-xl transition-all text-red-300 border border-red-500/20 flex items-center gap-1.5 md:gap-2 touch-manipulation min-h-[44px]",children:[l.jsx(te,{size:16,className:"md:w-[18px] md:h-[18px]"}),l.jsx("span",{className:"hidden md:inline",children:"Logout"})]})]})]})}),l.jsxs("div",{className:"flex-1 overflow-hidden flex relative z-[50]",children:[l.jsxs("aside",{className:`\n          fixed lg:static inset-y-0 left-0 z-[70] w-64 bg-[#2d1b4e]/95 backdrop-blur-xl border-r border-purple-500/20 overflow-y-auto transition-transform duration-300 ease-in-out\n          ${G?"translate-x-0":"-translate-x-full lg:translate-x-0"}\n        `,children:[l.jsxs("div",{className:"p-4 flex items-center justify-between lg:hidden border-b border-purple-500/20",children:[l.jsx("span",{className:"font-bold text-white",children:"Menu"}),l.jsx("button",{onClick:()=>H(!1),className:"text-purple-300",children:l.jsx(p,{size:20})})]}),l.jsx("div",{className:"p-4 space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:re},{id:"videos",label:"Videos",icon:m},{id:"messages",label:"Messages",icon:O},{id:"songs",label:"Song Requests",icon:T},{id:"calendar",label:"Calendar",icon:q},{id:"financial",label:"Financial",icon:F},{id:"goals",label:"Goals",icon:U},{id:"analytics",label:"Analytics",icon:$},{id:"settings",label:"Settings",icon:se}].map(e=>{const t=e.icon;return l.jsxs("button",{onClick:()=>A(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all "+(z===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg shadow-purple-500/30":"text-purple-200 hover:bg-purple-500/10 hover:text-white"),children:[l.jsx(t,{size:20}),l.jsx("span",{children:e.label})]},e.id)})})]}),l.jsx("main",{className:"flex-1 overflow-y-auto relative z-[30]",children:l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 relative z-[30]",children:["dashboard"===z&&l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ue,{videoUpdates:R.videoUpdates,loginFrequency:R.loginFrequency,siteVisits:R.siteVisits}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/30 bg-black/40",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("div",{className:"w-12 h-12 bg-purple-500/30 rounded-xl flex items-center justify-center",children:l.jsx(m,{size:24,className:"text-purple-400"})})}),l.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:D.length}),l.jsx("p",{className:"text-purple-200 text-shadow text-sm font-semibold",children:"Total Videos"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/30 bg-black/40",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("div",{className:"w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center",children:l.jsx($,{size:24,className:"text-blue-400"})})}),l.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:M.total_visitors}),l.jsx("p",{className:"text-blue-200 text-shadow text-sm font-semibold",children:"Total Visitors"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/20 backdrop-blur-xl rounded-2xl p-6 border border-green-500/30 bg-black/40",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("div",{className:"w-12 h-12 bg-green-500/30 rounded-xl flex items-center justify-center",children:l.jsx(u,{size:24,className:"text-green-400"})})}),l.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:D.filter(e=>"completed"===e.status).length}),l.jsx("p",{className:"text-green-200 text-shadow text-sm font-semibold",children:"Published"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-orange-500/20 to-orange-600/20 backdrop-blur-xl rounded-2xl p-6 border border-orange-500/30 bg-black/40",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:l.jsx(j,{size:24,className:"text-orange-400"})})}),l.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:M.artist_logins}),l.jsx("p",{className:"text-orange-200 text-shadow text-sm font-semibold",children:"Admin Logins"})]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-8 border border-purple-500/30 bg-black/40",children:[l.jsxs("h2",{className:"text-2xl font-black text-white text-shadow-strong mb-2",children:["Welcome back, ",null==h?void 0:h.name,"! ðŸ‘‹"]}),l.jsx("p",{className:"text-purple-100 text-shadow mb-6 font-medium",children:"Here's what's happening with your platform today."}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[l.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Active Videos"}),l.jsx("p",{className:"text-2xl font-bold text-white",children:D.filter(e=>"completed"===e.status).length})]}),l.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[l.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Pending"}),l.jsx("p",{className:"text-2xl font-bold text-white",children:D.filter(e=>"pending"===e.status).length})]}),l.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[l.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Total Views"}),l.jsx("p",{className:"text-2xl font-bold text-white",children:M.total_visitors})]})]})]})]}),"videos"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(Be,{})}),"messages"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(ut,{})}),"songs"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(Nt,{})}),"calendar"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(Dt,{})}),"financial"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(Wt,{})}),"goals"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(lr,{})}),"analytics"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(ar,{})}),"settings"===z&&l.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:l.jsx(et,{})})]})})]}),h&&l.jsx(ve,{currentUser:h,videos:D})]}):l.jsxs("div",{className:"admin-panel fixed inset-0 bg-black flex items-center justify-center z-50 overflow-y-auto p-4",style:{minHeight:"100dvh",width:"100vw",maxWidth:"100vw",overflowX:"hidden"},children:[l.jsx(o,{}),l.jsx("button",{onClick:e,className:"fixed top-4 right-4 p-3 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all border border-purple-500/20 backdrop-blur-sm z-[100] touch-manipulation",style:{minWidth:"48px",minHeight:"48px",zIndex:1e3},children:l.jsx(p,{size:24,className:"text-white"})}),l.jsx("div",{className:"max-w-lg w-full my-auto relative z-10 px-4",style:{minHeight:"auto",maxWidth:"calc(100vw - 2rem)",width:"100%"},children:l.jsxs("div",{className:"bg-black/90 backdrop-blur-2xl rounded-3xl p-6 md:p-8 border border-purple-500/30 shadow-2xl",style:{maxWidth:"100%",width:"100%",boxSizing:"border-box"},children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/50",children:l.jsx(j,{size:48,className:"text-white"})}),l.jsx("h2",{className:"text-4xl font-black text-white mb-3",children:"Admin Panel"}),l.jsx("p",{className:"text-purple-200",children:"Enter your credentials to access the admin dashboard"})]}),k?l.jsxs("form",{onSubmit:Q,className:"space-y-5",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(X,{size:32,className:"text-purple-300"})}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Reset Password"}),l.jsx("p",{className:"text-sm text-purple-200",children:"Enter your email to receive reset instructions"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),l.jsx("input",{type:"email",value:S,onChange:e=>C(e.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:()=>{_(!1),C("")},className:"flex-1 bg-purple-500/10 border border-purple-500/30 text-purple-200 px-6 py-3 rounded-xl font-semibold transition-all hover:bg-purple-500/20",children:"Back"}),l.jsx("button",{type:"submit",disabled:P,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Sending...":"Send Reset Link"})]})]}):l.jsxs("form",{onSubmit:Y,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),l.jsx("input",{type:"email",value:b,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0,style:{fontSize:"16px",minHeight:"44px"}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:N?"text":"password",value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 pr-12 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your password",required:!0,style:{fontSize:"16px",minHeight:"44px"}}),l.jsx("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-purple-300 hover:text-purple-200 transition-colors touch-manipulation",style:{minWidth:"32px",minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:N?l.jsx(K,{size:20}):l.jsx(V,{size:20})})]})]}),l.jsx("div",{className:"flex items-center justify-between text-sm",children:l.jsxs("button",{type:"button",onClick:()=>_(!0),className:"text-purple-300 hover:text-purple-200 transition-colors flex items-center gap-1",children:[l.jsx(X,{size:16}),"Forgot Password?"]})}),l.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all hover:shadow-lg hover:shadow-purple-500/50 hover:scale-[1.02] active:scale-[0.98] touch-manipulation",style:{minHeight:"48px"},children:"Sign In"}),l.jsx(nr,{})]})]})})]})})}}});
