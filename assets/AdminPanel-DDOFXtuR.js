const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabaseData-Dg2cJyP6.js","assets/index-CFFR5Dk1.js","assets/react-vendor-9mwbaf1v.js","assets/icons-D3sHNqvn.js","assets/index-CXIhqGeS.css"])))=>i.map(i=>d[i]);
import{u as e,s as t,j as s,_ as r,a,b as l,P as i}from"./index-CFFR5Dk1.js";import{r as n,a as o}from"./react-vendor-9mwbaf1v.js";import{g as d,X as c,h as p,V as u,i as x,T as m,j as h,k as g,S as b,B as f,U as j,l as y,m as v,E as N,n as w,L as k,o as _,p as S,q as C,r as z,f as A,H as D,M as P,a as T,b as E,s as q,t as M,u as I,v as L,w as R,D as $,C as F,x as V,y as B,A as U,z as O,F as G,J as H,K as W,N as J,O as Y,Q,R as Z,W as K,Z as X,_ as ee}from"./icons-D3sHNqvn.js";import{getVideos as te,addVideo as se,updateVideo as re,deleteVideo as ae,reorderVideos as le,getSettings as ie}from"./supabaseData-Dg2cJyP6.js";const ne=["üòä","üòÇ","ü•∞","üòç","ü§ó","üòò","üòé","ü§©","ü•≥","üëç","üëè","üôå","üí™","üôè","‚ù§Ô∏è","üíñ","üíï","üéµ","üé∂","üé§","‚ú®","‚≠ê","üåü","üî•","üíØ","üéâ"],oe=()=>{try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e;"suspended"===t.state&&t.resume();const s=t.createOscillator(),r=t.createGain();s.connect(r),r.connect(t.destination),s.frequency.value=800,s.type="sine",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),s.start(t.currentTime),s.stop(t.currentTime+.2),s.onended=()=>{t.close()}}catch(e){}},de=({currentUser:r,videos:a=[]})=>{var l;const{profilePicture:i}=e(),[o,f]=n.useState(!1),[j,y]=n.useState([]),[v,N]=n.useState(""),[w,k]=n.useState(!1),[_,S]=n.useState(!1),[C,z]=n.useState(""),[A,D]=n.useState(null),[P,T]=n.useState(""),[E,q]=n.useState(0),[M,I]=n.useState(null),L=n.useRef(null),R=n.useRef(null),$="artist"===r.role?"Editor":"Esther Reign";n.useEffect(()=>{F(),V(),W(),J()},[]),n.useEffect(()=>{o&&L.current&&(L.current.scrollIntoView({behavior:"smooth"}),q(0))},[j,o]);const F=async()=>{try{const{data:e,error:s}=await t.from("chat_messages").select("*").order("timestamp",{ascending:!0});if(s)throw s;if(y(e||[]),!o){const t=(e||[]).filter(e=>e.sender_id!==r.id).length;q(Math.min(t,9))}}catch(e){}},V=()=>{const e=t.channel("admin_chat_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_messages"},e=>{if("INSERT"===e.eventType){const t=e.new;y(e=>e.find(e=>e.id===t.id)?e:[...e,t]),t.sender_id!==r.id&&(oe(),o||q(e=>Math.min(e+1,9)))}else"DELETE"===e.eventType?y(t=>t.filter(t=>t.id!==e.old.id)):"UPDATE"===e.eventType&&y(t=>t.map(t=>t.id===e.new.id?e.new:t))}).subscribe();return()=>{t.removeChannel(e)}},B=async()=>{if(!v.trim()&&!C)return;const e=C?a.find(e=>e.id===C):null,s=v.trim()||(C&&e?`üìπ Referencing: ${e.title}`:"üìπ Video reference"),l={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender_id:r.id,sender_name:r.name,message:s,timestamp:(new Date).toISOString(),video_id:C||null,edited:!1};try{const e={...l,timestamp:(new Date).toISOString()};y(t=>[...t,e]),N(""),z(""),S(!1);const{data:s,error:r}=await t.from("chat_messages").insert([l]).select().single();if(r)throw y(e=>e.filter(e=>e.id!==l.id)),r}catch(i){alert("Failed to send message: "+i.message)}},U=()=>{D(null),T("")},O=async e=>{if(P.trim())try{const{error:s}=await t.from("chat_messages").update({message:P.trim(),edited:!0,timestamp:(new Date).toISOString()}).eq("id",e);if(s)throw s;D(null),T("")}catch(s){alert("Failed to edit message")}},G=e=>a.find(t=>t.id===e),H=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),r=Math.floor(s/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()},W=async()=>{try{const{data:e,error:s}=await t.from("chat_clear_requests").select("*").eq("status","pending").order("created_at",{ascending:!1}).limit(1).single();if(s&&"PGRST116"!==s.code)throw s;I(e||null)}catch(e){}},J=()=>{const e=t.channel("clear_requests_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_clear_requests"},e=>{if("INSERT"===e.eventType||"UPDATE"===e.eventType){const t=e.new;"pending"===t.status?I(t):"approved"===t.status?(y([]),I(null),oe()):I(null)}else"DELETE"===e.eventType&&I(null)}).subscribe();return()=>{t.removeChannel(e)}};return o?s.jsxs("div",{className:"fixed inset-0 lg:inset-auto lg:fixed lg:right-4 lg:bottom-4 lg:w-[380px] lg:h-[580px] max-w-full max-h-full bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] backdrop-blur-2xl rounded-none lg:rounded-3xl shadow-2xl flex flex-col border-0 lg:border border-purple-500/30 z-[9999]",style:{zIndex:999999,position:"fixed"},children:[s.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-purple-600/30 to-purple-700/30 p-4 flex items-center justify-between border-b border-purple-500/30 rounded-t-2xl lg:rounded-t-3xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[i||(null==r?void 0:r.profilePicture)?s.jsx("img",{src:i||(null==r?void 0:r.profilePicture)||"",alt:"Profile",className:"w-10 h-10 rounded-full object-cover shadow-lg"}):s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:$.charAt(0)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-sm md:text-base",children:$}),s.jsx("p",{className:"text-xs text-purple-300",children:"Online"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!M&&s.jsx("button",{onClick:async()=>{if(confirm(`Request to clear all messages? ${$} must approve.`))try{const{data:e,error:s}=await t.from("chat_clear_requests").insert([{requested_by:r.id,requested_by_name:r.name,requested_by_role:r.role,status:"pending"}]).select().single();if(s)throw s;I(e),alert("Clear request sent. Waiting for approval...")}catch(e){alert("Failed to send clear request")}},className:"px-3 py-1 text-xs bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg transition-colors",title:"Request to clear all messages",children:"Clear Chat"}),s.jsx("button",{onClick:()=>f(!1),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-purple-500/20 rounded-full transition-colors",children:s.jsx(c,{size:20})})]})]}),M&&M.requested_by!==r.id&&s.jsx("div",{className:"flex-shrink-0 p-4 bg-yellow-500/20 border-b border-yellow-500/50",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold text-sm",children:"Clear Chat Request"}),s.jsxs("p",{className:"text-yellow-200 text-xs mt-1",children:[M.requested_by_name," wants to clear all messages"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{if(M&&confirm("Approve clearing all messages? This cannot be undone."))try{const{error:e}=await t.from("chat_clear_requests").update({status:"approved"}).eq("id",M.id);if(e)throw e;const{error:s}=await t.from("chat_messages").delete().neq("id","00000000-0000-0000-0000-000000000000");if(s)throw s;y([]),I(null),alert("Chat cleared successfully!")}catch(e){alert("Failed to clear chat")}},className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded-lg transition-colors",children:"Approve"}),s.jsx("button",{onClick:async()=>{if(M)try{const{error:e}=await t.from("chat_clear_requests").update({status:"rejected"}).eq("id",M.id);if(e)throw e;I(null),alert("Clear request rejected")}catch(e){alert("Failed to reject request")}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded-lg transition-colors",children:"Reject"})]})]})}),M&&M.requested_by===r.id&&s.jsx("div",{className:"flex-shrink-0 p-3 bg-blue-500/20 border-b border-blue-500/50",children:s.jsxs("p",{className:"text-blue-200 text-xs text-center",children:["‚è≥ Waiting for ",$," to approve clear request..."]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[j.map(e=>{const a=e.sender_id===r.id,l=e.video_id?G(e.video_id):null;return A===e.id?s.jsx("div",{className:"flex "+(a?"justify-end":"justify-start"),children:s.jsxs("div",{className:"max-w-[85%] bg-purple-500/20 rounded-xl p-3 border border-purple-500/30",children:[s.jsx("input",{type:"text",value:P,onChange:e=>T(e.target.value),className:"w-full bg-transparent text-white outline-none text-sm mb-2",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key&&O(e.id),"Escape"===t.key&&U()}}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>O(e.id),className:"px-3 py-1 bg-purple-600 rounded-lg text-white text-xs hover:bg-purple-700",children:s.jsx(p,{size:12})}),s.jsx("button",{onClick:U,className:"px-3 py-1 bg-gray-600 rounded-lg text-white text-xs hover:bg-gray-700",children:s.jsx(c,{size:12})})]})]})},e.id):s.jsx("div",{className:"flex "+(a?"justify-end":"justify-start"),children:s.jsxs("div",{className:`max-w-[85%] ${a?"bg-gradient-to-br from-purple-600 to-purple-700":"bg-purple-500/20"} rounded-xl p-3 border ${a?"border-purple-500/50":"border-purple-500/30"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-purple-100",children:e.sender_name}),e.edited&&s.jsx("span",{className:"text-xs text-purple-300",children:"(edited)"})]}),l&&s.jsxs("div",{className:"mb-2 p-2 bg-white/10 rounded-lg flex items-center gap-2",children:[s.jsx(u,{size:14,className:"text-purple-200"}),s.jsx("span",{className:"text-xs text-purple-200 truncate",children:l.title})]}),s.jsx("p",{className:"text-white text-sm whitespace-pre-wrap break-words",children:e.message}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-xs text-purple-200",children:H(e.timestamp)}),a&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{return D((t=e).id),void T(t.message);var t},className:"p-1 hover:bg-purple-500/30 rounded transition-colors",title:"Edit",children:s.jsx(x,{size:12,className:"text-purple-200"})}),s.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this message?"))try{const{error:s}=await t.from("chat_messages").delete().eq("id",e);if(s)throw s}catch(s){alert("Failed to delete message")}})(e.id),className:"p-1 hover:bg-red-500/30 rounded transition-colors",title:"Delete",children:s.jsx(m,{size:12,className:"text-red-300"})})]})]})]})},e.id)}),s.jsx("div",{ref:L})]}),s.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-purple-500/30 bg-[#2d1b4e]/80 rounded-b-2xl lg:rounded-b-3xl",children:[_&&s.jsxs("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 max-h-32 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-semibold text-purple-200",children:"Select Video"}),s.jsx("button",{onClick:()=>S(!1),className:"text-purple-300 hover:text-white",children:s.jsx(c,{size:14})})]}),s.jsx("div",{className:"space-y-1",children:0===a.length?s.jsx("p",{className:"text-xs text-purple-300",children:"No videos available"}):a.map(e=>s.jsx("button",{onClick:()=>{z(e.id),S(!1)},className:"w-full text-left p-2 rounded-lg text-xs transition-colors "+(C===e.id?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-200 hover:bg-purple-500/20"),children:e.title},e.id))})]}),w&&s.jsx("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 grid grid-cols-8 gap-1 max-h-32 overflow-y-auto",children:ne.map(e=>s.jsx("button",{onClick:()=>(e=>{var t;N(t=>t+e),k(!1),null==(t=R.current)||t.focus()})(e),className:"text-xl hover:bg-purple-500/20 rounded-lg p-1 transition-colors",children:e},e))}),C&&s.jsxs("div",{className:"mb-2 p-2 bg-purple-600/20 rounded-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(u,{size:14,className:"text-purple-300"}),s.jsx("span",{className:"text-xs text-purple-200 truncate",children:(null==(l=G(C))?void 0:l.title)||"Video selected"})]}),s.jsx("button",{onClick:()=>z(""),className:"text-purple-300 hover:text-white",children:s.jsx(c,{size:14})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>S(!_),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Attach Video",children:s.jsx(h,{size:18,className:"text-purple-300"})}),s.jsx("button",{onClick:()=>k(!w),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Emoji",children:s.jsx(g,{size:18,className:"text-purple-300"})}),s.jsx("input",{ref:R,type:"text",value:v,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())},placeholder:"Type a message...",className:"flex-1 px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white placeholder-purple-400 text-sm focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:B,disabled:!v.trim()&&!C,className:"p-2 bg-gradient-to-br from-purple-600 to-purple-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:s.jsx(b,{size:18,className:"text-white"})})]})]})]}):s.jsxs("button",{onClick:()=>f(!0),className:"fixed right-4 bottom-4 w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-700 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-purple-500/50 transition-all z-[9999] hover:scale-110",style:{zIndex:999999,position:"fixed"},children:[s.jsx(d,{size:24}),E>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold",children:E})]})},ce=({currentUser:e,onNotificationClick:r,externalUnreadCount:a=0})=>{const[l,i]=n.useState([]),[o,p]=n.useState(0),[u,x]=n.useState(!1);n.useEffect(()=>{a>0&&p(a)},[a]),n.useEffect(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]);const m=n.useCallback(e=>{i(t=>t.some(t=>t.id===e.id)?t:[e,...t].slice(0,50)),p(e=>e+1)},[]),h=n.useCallback((e,t,s)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t,icon:s||"/icons/ios/128.png",badge:"/icons/ios/128.png",tag:"esther-reign-admin",requireInteraction:!1})},[]),g=n.useCallback(()=>{try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e;"suspended"===t.state&&t.resume();const s=t.createOscillator(),r=t.createGain();s.connect(r),r.connect(t.destination),s.frequency.value=800,s.type="sine",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),s.start(t.currentTime),s.stop(t.currentTime+.2),s.onended=()=>{t.close()}}catch(e){try{const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGW57+OeTQ8MT6Xh8LZjHAY4kdfyzHksBSR3x/DdkEAKFF606euoVRQKRp/g8r5sIQUrgc7y2Yk2CBhlue/jnk0PDE+l4fC2YxwGOJHX8sx5LAUkd8fw3ZBAC");e.volume=.3,e.play().catch(()=>{})}catch(t){}}},[]);n.useEffect(()=>{if(!e)return;const s=t.channel("admin_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"admin_logins"},t=>{const s=t.new;if(s.user_id!==e.id){const e="artist"===s.user_role?"Esther Reign":"Editor",t={id:`login_${Date.now()}`,type:"login",title:`${e} logged in`,message:`${e} just logged into the admin panel`,timestamp:new Date,read:!1,userId:s.user_id};m(t),g(),h(`${e} logged in`,`${e} just logged into the admin panel`)}}).subscribe();return()=>{t.removeChannel(s)}},[e,g,h,m]),n.useEffect(()=>{if(!e)return;const s=t.channel("chat_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},t=>{const s=t.new;if(s.sender_id!==e.id){const e=s.sender_name||"Someone",t={id:`message_${s.id}`,type:"message",title:`New message from ${e}`,message:s.message.substring(0,50)+(s.message.length>50?"...":""),timestamp:new Date(s.timestamp),read:!1,userId:s.sender_id};m(t),g(),h(`New message from ${e}`,s.message.substring(0,100))}}).subscribe();return()=>{t.removeChannel(s)}},[e,g,h,m]);const b=e=>{const t=(new Date).getTime()-e.getTime(),s=Math.floor(t/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:e.toLocaleDateString()},y=e=>{switch(e){case"login":return s.jsx(j,{size:18,className:"text-blue-400"});case"message":return s.jsx(d,{size:18,className:"text-purple-400"});default:return s.jsx(f,{size:18,className:"text-green-400"})}};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>x(!u),className:"relative p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:[s.jsx(f,{size:20,className:"text-purple-300"}),o>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold text-white",children:o>9?"9+":o})]}),u&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>x(!1)}),s.jsxs("div",{className:"absolute right-0 top-12 w-80 md:w-96 bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-2xl border border-purple-500/30 z-50 max-h-[500px] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/30",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"Notifications"}),o>0&&s.jsx("button",{onClick:()=>{i(e=>e.map(e=>({...e,read:!0}))),p(0)},className:"text-xs text-purple-300 hover:text-purple-200",children:"Mark all as read"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:0===l.length?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(f,{size:48,className:"mx-auto mb-4 text-purple-400 opacity-50"}),s.jsx("p",{className:"text-purple-300",children:"No notifications"})]}):s.jsx("div",{className:"divide-y divide-purple-500/20",children:l.map(e=>s.jsx("div",{className:"p-4 hover:bg-purple-500/10 transition-colors cursor-pointer "+(e.read?"":"bg-purple-500/5"),onClick:()=>{var t;t=e.id,i(e=>e.map(e=>e.id===t?{...e,read:!0}:e)),p(e=>Math.max(0,e-1)),null==r||r(e),x(!1)},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:y(e.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-white",children:e.title}),!e.read&&s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full flex-shrink-0 mt-1"})]}),s.jsx("p",{className:"text-xs text-purple-300 mt-1 line-clamp-2",children:e.message}),s.jsx("p",{className:"text-xs text-purple-400 mt-2",children:b(e.timestamp)})]}),s.jsx("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,i(e=>{const t=e.find(e=>e.id===s);return t&&!t.read&&p(e=>Math.max(0,e-1)),e.filter(e=>e.id!==s)})},className:"flex-shrink-0 p-1 hover:bg-purple-500/20 rounded transition-colors",children:s.jsx(c,{size:14,className:"text-purple-400"})})]})},e.id))})})]})]})]})},pe=({onVideoChange:e})=>{const[t,r]=n.useState([]),[a,l]=n.useState(null),[i,d]=n.useState(!1),[p,u]=n.useState(!0),[x,h]=n.useState(null),[g,b]=n.useState("link"),[f,j]=n.useState(!1),[C,z]=n.useState(0),[A,D]=n.useState(0),P=n.useRef(null);n.useEffect(()=>{T()},[]);const T=async()=>{u(!0);const e=await te();r(e),u(!1)},E=async()=>{if(null!==x)try{await le(t),null==e||e()}catch(s){await T()}h(null)};return p?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s.jsxs("div",{className:"p-6 bg-[#2d1b4e]/50 backdrop-blur-xl rounded-2xl border border-purple-500/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Video Management"}),s.jsxs("button",{onClick:()=>{const e={id:`temp_${Date.now()}`,title:"",video_link:"",thumbnail_url:"",status:"pending",template_type:"default",order_index:t.length,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};l(e),d(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[s.jsx(y,{size:20}),"Add Video"]})]}),s.jsxs("div",{className:"space-y-4",children:[t.map((a,i)=>s.jsx("div",{draggable:!0,onDragStart:()=>(e=>{h(e)})(i),onDragOver:e=>((e,s)=>{if(e.preventDefault(),null===x||x===s)return;const a=[...t],l=a[x];a.splice(x,1),a.splice(s,0,l);const i=a.map((e,t)=>({...e,order_index:t}));r(i),h(s)})(e,i),onDragEnd:E,className:"p-4 border border-purple-500/20 rounded-lg cursor-move transition-all bg-purple-500/10 hover:bg-purple-500/20 "+(x===i?"opacity-50":""),children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(v,{size:20,className:"text-purple-300"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-white",children:a.title||"Untitled Video"}),s.jsxs("p",{className:"text-sm text-purple-300",children:["Status: ",a.status," ‚Ä¢ Order: ",a.order_index]}),a.video_link&&s.jsxs("a",{href:a.video_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-purple-400 hover:text-purple-300 transition-colors",children:[s.jsx(N,{size:14}),"View Video"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{const e=document.querySelector(".flex-1.overflow-y-auto");e&&D(e.scrollTop),l(a),d(!1)},className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:s.jsx(w,{size:16,className:"text-purple-300"})}),s.jsx("button",{onClick:()=>(async s=>{if(confirm("Are you sure you want to delete this video?"))try{await ae(s)&&(r(t.filter(e=>e.id!==s)),null==e||e())}catch(a){alert("Failed to delete video. Please try again.")}})(a.id),className:"p-2 rounded hover:bg-red-500/20 transition-colors",children:s.jsx(m,{size:16,className:"text-red-400"})})]})]})},a.id)),0===t.length&&s.jsx("div",{className:"text-center py-8 text-purple-300",children:'No videos yet. Click "Add Video" to get started.'})]}),a&&o.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:i?"Add New Video":"Edit Video"}),s.jsx("button",{onClick:()=>{l(null),d(!1)},className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:s.jsx(c,{size:20,className:"text-purple-300"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Title *"}),s.jsx("input",{type:"text",value:a.title,onChange:e=>l({...a,title:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"Enter video title"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Upload Method"}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{type:"button",onClick:()=>b("link"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all "+("link"===g?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[s.jsx(k,{size:16}),"Link"]}),s.jsxs("button",{type:"button",onClick:()=>b("file"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all "+("file"===g?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[s.jsx(_,{size:16}),"Upload File (Max 200MB)"]})]})]}),"link"===g&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video Link"}),s.jsx("input",{type:"url",value:a.video_link||"",onChange:e=>l({...a,video_link:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://youtube.com/watch?v=... or https://cloudinary.com/..."})]}),"file"===g&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video File (Max 200MB)"}),s.jsx("input",{ref:P,type:"file",accept:"video/*",onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(s.size>209715200)alert(`File size exceeds 200MB limit. Your file is ${(s.size/1048576).toFixed(2)}MB`);else{j(!0),z(0);try{(new FormData).append("file",s);const e=setInterval(()=>{z(t=>t>=90?(clearInterval(e),90):t+10)},200),t=URL.createObjectURL(s);setTimeout(()=>{clearInterval(e),z(100),l({...a,video_link:t}),j(!1),alert("Note: This is a temporary URL. In production, upload to Cloudinary or Supabase Storage for permanent storage.")},2e3)}catch(r){alert("Failed to upload video. Please try again or use a link instead."),j(!1),z(0)}}},className:"hidden"}),s.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=P.current)?void 0:e.click()},disabled:f,className:"w-full px-4 py-3 border-2 border-dashed rounded-lg transition-all "+(f?"border-purple-400 bg-purple-500/10":"border-purple-500/30 bg-purple-500/10 hover:border-purple-500 hover:bg-purple-500/20"),children:f?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-300",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-300"}),s.jsxs("span",{children:["Uploading... ",C,"%"]})]}),s.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden bg-purple-500/20",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-700 transition-all duration-300",style:{width:`${C}%`}})})]}):s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(_,{size:24,className:"text-purple-300"}),s.jsx("span",{className:"text-purple-200",children:"Click to select video file"}),s.jsx("span",{className:"text-xs text-purple-400",children:"Max size: 200MB"})]})}),a.video_link&&"file"===g&&s.jsxs("p",{className:"mt-2 text-xs text-purple-400",children:["Video URL: ",a.video_link.substring(0,50),"..."]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Thumbnail URL"}),s.jsx("input",{type:"url",value:a.thumbnail_url||"",onChange:e=>l({...a,thumbnail_url:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://img.youtube.com/vi/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),s.jsxs("select",{value:a.status,onChange:e=>l({...a,status:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white",children:[s.jsx("option",{value:"pending",className:"bg-[#2d1b4e]",children:"Pending"}),s.jsx("option",{value:"completed",className:"bg-[#2d1b4e]",children:"Completed"})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{l(null),d(!1)},className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg transition-colors text-purple-200 hover:bg-purple-500/20",children:"Cancel"}),s.jsxs("button",{onClick:async()=>{if(a)try{if(i){const{id:e,created_at:s,updated_at:l,...i}=a,n=await se(i);n&&r([...t,n])}else{await re(a.id,a)&&r(t.map(e=>e.id===a.id?a:e))}l(null),d(!1),null==e||e(),await T()}catch(s){alert("Failed to save video. Please try again.")}},disabled:!a.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(S,{size:16}),i?"Add Video":"Save Changes"]})]})]})})}),document.body)]})},ue=({videoUpdates:e,loginFrequency:t,siteVisits:r})=>{const[a,l]=n.useState(!1);n.useEffect(()=>{setTimeout(()=>l(!0),100)},[]);const i=Math.max(...e.map(e=>e.value),...t.map(e=>e.value),...r.map(e=>e.value),1),o=(e,t,r,l)=>{if(0===e.length)return s.jsx("div",{className:"flex items-center justify-center h-48 text-purple-300",children:s.jsx("p",{children:"No data available"})});const n=e.map((t,s)=>({x:s/(e.length-1||1)*100,y:100-t.value/i*80})),o=n.map((e,t)=>`${0===t?"M":"L"} ${e.x},${e.y}`).join(" "),d=`${o} L ${n[n.length-1].x},100 L 0,100 Z`;return s.jsxs("div",{className:"relative h-48",children:[s.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:r,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.4"}),s.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.05"})]})}),s.jsx("path",{d:d,fill:`url(#${r})`,className:a?"animate-fade-in":"opacity-0",style:{animation:a?"drawPath 1.5s ease-out forwards":"none",strokeDasharray:a?"0":"1000",strokeDashoffset:a?"0":"1000"}}),s.jsx("path",{d:o,fill:"none",stroke:t,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",className:a?"animate-fade-in":"opacity-0",style:{animation:a?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:a?"1000":"0",strokeDashoffset:a?"0":"1000"}}),n.map((e,r)=>s.jsxs("g",{children:[s.jsx("circle",{cx:e.x,cy:e.y,r:"1.5",fill:t,className:a?"animate-scale-in":"opacity-0",style:{animation:a?`fadeInScale 0.3s ease-out ${.5+.1*r}s forwards`:"none"}}),s.jsx("circle",{cx:e.x,cy:e.y,r:"3",fill:t,fillOpacity:"0.2",className:a?"animate-pulse":"opacity-0",style:{animation:a?`fadeInScale 0.3s ease-out ${.5+.1*r}s forwards, pulse 2s ease-in-out infinite ${1+.1*r}s`:"none"}})]},r))]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-purple-300 px-2",children:e.map((e,t)=>{const r=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});return s.jsx("span",{className:"transform -rotate-45 origin-left",style:{opacity:a?1:0,transition:`opacity 0.3s ${.8+.1*t}s`},children:r},t)})})]})};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        @keyframes pulse {\n          0%, 100% {\n            opacity: 0.2;\n            transform: scale(1);\n          }\n          50% {\n            opacity: 0.4;\n            transform: scale(1.2);\n          }\n        }\n      "}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:s.jsx(u,{size:20,className:"text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Video Updates"}),s.jsx("p",{className:"text-xs text-purple-300",children:"Last 7 days"})]})]}),s.jsx("div",{className:"mb-2",children:s.jsx("p",{className:"text-2xl font-black text-white",children:e.reduce((e,t)=>e+t.value,0)})}),o(e,"#9333ea","gradient-purple")]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/20",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:s.jsx(C,{size:20,className:"text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Login Frequency"}),s.jsx("p",{className:"text-xs text-blue-300",children:"Last 7 days"})]})]}),s.jsx("div",{className:"mb-2",children:s.jsx("p",{className:"text-2xl font-black text-white",children:t.reduce((e,t)=>e+t.value,0)})}),o(t,"#3b82f6","gradient-blue")]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-2xl p-6 border border-green-500/20 md:col-span-2 lg:col-span-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center",children:s.jsx(z,{size:20,className:"text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Site Visits"}),s.jsx("p",{className:"text-xs text-green-300",children:"Last 7 days"})]})]}),s.jsx("div",{className:"mb-2",children:s.jsx("p",{className:"text-2xl font-black text-white",children:r.reduce((e,t)=>e+t.value,0)})}),o(r,"#10b981","gradient-green")]})]})]})},xe=()=>{const{profilePicture:t,updateProfilePicture:l}=e(),[i,o]=n.useState({hero_image:"/Estherreign.jpg",about_image:"/IMG-20250915-WA0023.jpg",about_text:"I am an emerging gospel artist with a deep passion for worship and praise...",phone:"+234 818 019 4269",email:"contact@estherreign.com",location:"Lagos, Nigeria",social_links:{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),[d,c]=n.useState(""),[p,u]=n.useState(!1),[x,m]=n.useState({hero:!1,about:!1});n.useEffect(()=>{h()},[]);const h=async()=>{const{getSettings:e}=await r(async()=>{const{getSettings:e}=await import("./supabaseData-Dg2cJyP6.js");return{getSettings:e}},__vite__mapDeps([0,1,2,3,4])),t=await e();t&&(o({hero_image:t.hero_image||"/Estherreign.jpg",about_image:t.about_image||"/IMG-20250915-WA0023.jpg",about_text:t.about_text||"I am an emerging gospel artist with a deep passion for worship and praise...",phone:t.contact_phone||"+234 818 019 4269",email:t.contact_email||"contact@estherreign.com",location:"Lagos, Nigeria",social_links:t.social_links||{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),c(t.hero_description||"Lifting voices in worship through powerful gospel music. Experience the presence of God through every note."))},g=async(e,t)=>{var s;const r=null==(s=t.target.files)?void 0:s[0];if(r)if(r.size>5242880)alert("Image size should be less than 5MB");else try{m(t=>({...t,[e]:!0}));const t=await a(r,e);if(!t)return void alert("Upload failed. Please try again.");o("hero"===e?{...i,hero_image:t}:{...i,about_image:t}),alert('Image uploaded! Remember to hit "Save All Settings".')}catch(l){alert("Upload failed. Please try again.")}finally{m(t=>({...t,[e]:!1}))}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black mb-2 text-white",children:"Site Settings"}),s.jsx("p",{className:"text-gray-400",children:"Manage your website content and appearance"})]}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-blue-500/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Profile Picture"}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"relative",children:t?s.jsx("img",{src:t,alt:"Profile",className:"w-24 h-24 rounded-xl object-cover shadow-lg"}):s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:s.jsx("span",{className:"text-white font-black text-4xl",children:"E"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Upload Profile Picture"}),s.jsx("input",{type:"file",accept:"image/*",disabled:p,onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s)if(s.size>5242880)alert("Image size should be less than 5MB");else if(s.type.startsWith("image/"))try{u(!0);const e=await a(s,"profile");if(!e)return void alert("Upload failed: No URL returned. Please check your Supabase Storage configuration.");l(e);const t=localStorage.getItem("admin_session");if(t){const s=JSON.parse(t);s.user.profilePicture=e,localStorage.setItem("admin_session",JSON.stringify(s))}alert("Profile picture updated successfully!")}catch(r){const e=(null==r?void 0:r.message)||(null==r?void 0:r.toString())||"Unknown error occurred";alert(`Upload failed: ${e}\n\nPlease check:\n1. Supabase Storage bucket "media" exists\n2. Bucket has public access enabled\n3. RLS policies allow uploads`)}finally{u(!1)}else alert("Please select a valid image file (JPG, PNG, etc.)")},className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/20 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-gradient-to-r file:from-purple-600 file:to-blue-600 file:text-white hover:file:shadow-lg file:cursor-pointer "+(p?"opacity-60 cursor-not-allowed":"")}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:p?"Uploading image...":"Max size: 5MB. Recommended: Square image (500x500px)"})]})]})]}),s.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Images"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Image"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"file",accept:"image/*",disabled:x.hero,onChange:e=>g("hero",e),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer "+(x.hero?"opacity-60 cursor-not-allowed":"")}),s.jsx("input",{type:"url",value:i.hero_image.startsWith("data:")?"":i.hero_image,onChange:e=>o({...i,hero_image:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),i.hero_image&&s.jsx("img",{src:i.hero_image,alt:"Hero",className:"mt-2 w-full h-32 object-cover rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Image"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"file",accept:"image/*",disabled:x.about,onChange:e=>g("about",e),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer "+(x.about?"opacity-60 cursor-not-allowed":"")}),s.jsx("input",{type:"url",value:i.about_image.startsWith("data:")?"":i.about_image,onChange:e=>o({...i,about_image:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),i.about_image&&s.jsx("img",{src:i.about_image,alt:"About",className:"mt-2 w-full h-32 object-cover rounded-lg"})]})]})]}),s.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Hero Section"}),s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Description"}),s.jsx("textarea",{value:d,onChange:e=>c(e.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Brief description for hero section..."})]}),s.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"About Section"}),s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Text"}),s.jsx("textarea",{value:i.about_text,onChange:e=>o({...i,about_text:e.target.value}),rows:6,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Tell your story..."})]}),s.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Contact Information"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Phone"}),s.jsx("input",{type:"tel",value:i.phone,onChange:e=>o({...i,phone:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"+234..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Email"}),s.jsx("input",{type:"email",value:i.email,onChange:e=>o({...i,email:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"contact@..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Location"}),s.jsx("input",{type:"text",value:i.location,onChange:e=>o({...i,location:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"City, Country"})]})]})]}),s.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Social Media Links"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Instagram"}),s.jsx("input",{type:"url",value:i.social_links.instagram,onChange:e=>o({...i,social_links:{...i.social_links,instagram:e.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://instagram.com/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"YouTube"}),s.jsx("input",{type:"url",value:i.social_links.youtube,onChange:e=>o({...i,social_links:{...i.social_links,youtube:e.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://youtube.com/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"TikTok"}),s.jsx("input",{type:"url",value:i.social_links.tiktok,onChange:e=>o({...i,social_links:{...i.social_links,tiktok:e.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://tiktok.com/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Facebook"}),s.jsx("input",{type:"url",value:i.social_links.facebook,onChange:e=>o({...i,social_links:{...i.social_links,facebook:e.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://facebook.com/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Twitter"}),s.jsx("input",{type:"url",value:i.social_links.twitter,onChange:e=>o({...i,social_links:{...i.social_links,twitter:e.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://twitter.com/..."})]})]})]}),s.jsxs("button",{onClick:async()=>{try{const{updateSettings:e}=await r(async()=>{const{updateSettings:e}=await import("./supabaseData-Dg2cJyP6.js");return{updateSettings:e}},__vite__mapDeps([0,1,2,3,4]));await e({hero_image:i.hero_image,hero_description:d,about_image:i.about_image,about_text:i.about_text,contact_email:i.email,contact_phone:i.phone,social_links:i.social_links})?(alert("Settings saved successfully! Changes will appear immediately."),window.dispatchEvent(new Event("storage"))):alert("Failed to save settings. Please try again.")}catch(e){alert("Error saving settings. Please check console for details.")}},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 flex items-center justify-center gap-2",children:[s.jsx(S,{size:20}),"Save All Settings"]})]})]})};(()=>{const e=localStorage.getItem("current_sync_code")||Math.random().toString(36).substring(2,8).toUpperCase();localStorage.getItem("current_sync_code")||localStorage.setItem("current_sync_code",e),window.location.origin,window.location.pathname})();const me=()=>{const[e,r]=n.useState([]),[a,l]=n.useState(!0),[i,d]=n.useState(null),[p,u]=n.useState(""),[x,h]=n.useState("all"),[g,f]=n.useState(0);n.useEffect(()=>{j()},[]);const j=async()=>{l(!0);try{const{data:e,error:s}=await t.from("fan_messages").select("*").order("created_at",{ascending:!1});if(s)throw s;r(e||[])}catch(e){}l(!1)},y=e.filter(e=>"all"===x||("unread"===x?"unread"===e.status:e.message_type===x)),v=e.filter(e=>"unread"===e.status).length;return a?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white",children:"Fan Messages"}),s.jsxs("p",{className:"text-sm text-purple-300",children:[v," unread messages"]})]}),s.jsx("div",{className:"flex gap-2",children:["all","unread","prayer_request","testimony"].map(e=>s.jsx("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(x===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:e.replace("_"," ")},e))})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[y.map(a=>{const l=(n=a.message_type,{prayer_request:D,testimony:P,song_request:T,booking_inquiry:E,general:A}[n]||A);var n;const o=(e=>({prayer_request:"pink",testimony:"green",song_request:"purple",booking_inquiry:"blue",general:"gray"}[e]||"gray"))(a.message_type);return s.jsx("div",{className:"p-6 rounded-xl border transition-all cursor-pointer "+("unread"===a.status?"bg-purple-900/30 border-purple-500/50":"bg-purple-500/10 border-purple-500/20"),onClick:()=>{const s=document.querySelector(".flex-1.overflow-y-auto");s&&f(s.scrollTop),d(a),"unread"===a.status&&(async s=>{try{const{error:a}=await t.from("fan_messages").update({status:"read"}).eq("id",s);if(a)throw a;r(e.map(e=>e.id===s?{...e,status:"read"}:e))}catch(a){}})(a.id)},children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-3 rounded-lg bg-${o}-100`,children:s.jsx(l,{size:24,className:`text-${o}-600`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${o}-100 text-${o}-700`,children:a.message_type.replace("_"," ")}),"unread"===a.status&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"New"}),a.is_prayed_for&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:"üôè Prayed"}),a.is_featured&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-700",children:"‚≠ê Featured"})]}),s.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:a.subject||"No Subject"}),s.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["From: ",a.is_anonymous?"Anonymous":a.from_name]}),s.jsx("p",{className:"text-sm line-clamp-2 text-purple-200",children:a.message}),s.jsx("p",{className:"text-xs mt-2 text-purple-400",children:new Date(a.created_at).toLocaleString()})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:["prayer_request"===a.message_type&&!a.is_prayed_for&&s.jsx("button",{onClick:s=>{s.stopPropagation(),(async s=>{try{const{error:a}=await t.from("fan_messages").update({is_prayed_for:!0}).eq("id",s);if(a)throw a;r(e.map(e=>e.id===s?{...e,is_prayed_for:!0}:e))}catch(a){}})(a.id)},className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Prayed"}),s.jsx("button",{onClick:s=>{s.stopPropagation(),(async s=>{if(confirm("Are you sure you want to delete this message? This action cannot be undone."))try{const{error:a}=await t.from("fan_messages").delete().eq("id",s);if(a)throw a;r(e.filter(e=>e.id!==s)),(null==i?void 0:i.id)===s&&d(null),alert("Message deleted successfully")}catch(a){alert("Failed to delete message")}})(a.id)},className:"p-2 rounded hover:bg-red-500/20 transition-colors",title:"Delete message",children:s.jsx(m,{size:18,className:"text-red-400 hover:text-red-300"})})]})]})},a.id)}),0===y.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(A,{size:48,className:"mx-auto mb-4 text-purple-400"}),s.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No messages yet"})]})]})]}),i&&o.createPortal(s.jsx("div",{className:"message-modal-overlay fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] overflow-y-auto",children:s.jsx("div",{className:"flex justify-center",style:{paddingTop:`${g}px`,paddingBottom:"2rem"},children:s.jsx("div",{className:"w-full max-w-2xl bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:i.subject||"Message Details"}),s.jsx("button",{onClick:()=>d(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:s.jsx(c,{size:20,className:"text-purple-300"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"From"}),s.jsxs("p",{className:"text-white",children:[i.is_anonymous?"Anonymous":i.from_name,i.from_email&&` (${i.from_email})`]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Message"}),s.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:i.message})]}),i.response&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Your Response"}),s.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:i.response})]}),"responded"!==i.status&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Send Response"}),s.jsx("textarea",{value:p,onChange:e=>u(e.target.value),rows:4,className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg resize-none text-white placeholder-purple-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type your response..."}),s.jsxs("button",{onClick:async()=>{if(i&&p.trim())try{const{error:s}=await t.from("fan_messages").update({status:"responded",response:p,responded_at:(new Date).toISOString()}).eq("id",i.id);if(s)throw s;r(e.map(e=>e.id===i.id?{...e,status:"responded",response:p,responded_at:(new Date).toISOString()}:e)),d(null),u(""),alert("Response sent!")}catch(s){alert("Failed to send response")}},disabled:!p.trim(),className:"mt-2 flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50",children:[s.jsx(b,{size:16}),"Send Response"]})]})]}),s.jsx("div",{className:"flex gap-3 mt-6",children:s.jsx("button",{onClick:()=>d(null),className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg text-purple-200 hover:bg-purple-500/20 transition-colors",children:"Close"})})]})})})}),document.body)]})},he=()=>{const[e,r]=n.useState([]),[a,l]=n.useState(!0),[i,d]=n.useState(null),[p,u]=n.useState("all"),[x,h]=n.useState("votes");n.useEffect(()=>{g()},[]);const g=async()=>{l(!0);try{const{data:e,error:s}=await t.from("song_requests").select("*").order("votes",{ascending:!1});if(s)throw s;r(e||[])}catch(e){}l(!1)},b=async(s,a)=>{try{const{error:l}=await t.from("song_requests").update({status:a,updated_at:(new Date).toISOString()}).eq("id",s);if(l)throw l;r(e.map(e=>e.id===s?{...e,status:a}:e))}catch(l){}},f=e=>({new:"blue",considering:"yellow",planned:"purple",recording:"orange",completed:"green",declined:"red"}[e]||"gray"),j=[...e.filter(e=>"all"===p||e.status===p)].sort((e,t)=>"votes"===x?t.votes-e.votes:"priority"===x?t.priority_score-e.priority_score:new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return a?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white",children:"Song Requests"}),s.jsx("p",{className:"text-sm text-purple-300",children:"Manage fan song requests"})]}),s.jsx("div",{className:"flex gap-2",children:["all","new","considering","planned"].map(e=>s.jsx("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(p===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:e},e))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"text-sm text-purple-300",children:"Sort by:"}),["votes","recent","priority"].map(e=>s.jsx("button",{onClick:()=>h(e),className:"px-3 py-1 rounded text-sm font-medium capitalize "+(x===e?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 border border-purple-500/30"),children:e},e))]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[j.map(a=>{return s.jsxs("div",{className:"p-6 rounded-xl border transition-all bg-black/40 backdrop-blur-xl border-purple-500/30 hover:border-purple-500/50",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(T,{size:20,className:"text-purple-500"}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${f(a.status)}-100 text-${f(a.status)}-700`,children:a.status}),a.difficulty&&s.jsx("span",{className:"text-xs font-medium "+(l=a.difficulty,"easy"===l?"text-green-500":"medium"===l?"text-yellow-500":"hard"===l?"text-red-500":"text-gray-500"),children:a.difficulty})]}),s.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:a.song_title}),a.original_artist&&s.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["by ",a.original_artist]}),a.reason&&s.jsxs("p",{className:"text-sm mb-3 text-purple-200",children:['"',a.reason,'"']}),a.requested_by_name&&s.jsxs("p",{className:"text-xs mb-2 text-purple-400",children:["Requested by ",a.requested_by_name]}),a.genre_tags&&a.genre_tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:a.genre_tags.map((e,t)=>s.jsx("span",{className:"px-2 py-1 rounded text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",children:e},t))}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>(async s=>{try{const a=e.find(e=>e.id===s);if(!a)return;const{error:l}=await t.from("song_requests").update({votes:a.votes+1,priority_score:a.priority_score+1,updated_at:(new Date).toISOString()}).eq("id",s);if(l)throw l;r(e.map(e=>e.id===s?{...e,votes:e.votes+1,priority_score:e.priority_score+1}:e))}catch(a){}})(a.id),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700",children:[s.jsx(q,{size:16}),s.jsx("span",{className:"font-bold",children:a.votes}),s.jsx("span",{children:"votes"})]}),a.priority_score>0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm text-yellow-600",children:[s.jsx(M,{size:16}),s.jsx("span",{children:a.priority_score})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:()=>d(a),className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:s.jsx(w,{size:16,className:"text-purple-300"})}),s.jsx("button",{onClick:()=>(async s=>{if(confirm("Delete this song request?"))try{const{error:a}=await t.from("song_requests").delete().eq("id",s);if(a)throw a;r(e.filter(e=>e.id!==s))}catch(a){}})(a.id),className:"p-2 rounded hover:bg-red-100",children:s.jsx(m,{size:16,className:"text-red-600"})})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:["new"===a.status&&s.jsx("button",{onClick:()=>b(a.id,"considering"),className:"flex-1 px-3 py-1 text-xs bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Consider"}),"considering"===a.status&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>b(a.id,"planned"),className:"flex-1 px-3 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"Plan"}),s.jsx("button",{onClick:()=>b(a.id,"declined"),className:"flex-1 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Decline"})]}),"planned"===a.status&&s.jsx("button",{onClick:()=>b(a.id,"recording"),className:"flex-1 px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Start Recording"}),"recording"===a.status&&s.jsx("button",{onClick:()=>b(a.id,"completed"),className:"flex-1 px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Complete"})]})]},a.id);var l}),0===j.length&&s.jsxs("div",{className:"col-span-2 text-center py-12",children:[s.jsx(T,{size:48,className:"mx-auto mb-4 text-purple-500/50"}),s.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No song requests yet"})]})]}),i&&o.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-lg bg-black/95 backdrop-blur-xl rounded-lg shadow-xl max-h-[90vh] overflow-y-auto border border-purple-500/30",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Edit Song Request"}),s.jsx("button",{onClick:()=>d(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:s.jsx(c,{size:20,className:"text-purple-300"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),s.jsxs("select",{value:i.status,onChange:e=>d({...i,status:e.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"new",children:"New"}),s.jsx("option",{value:"considering",children:"Considering"}),s.jsx("option",{value:"planned",children:"Planned"}),s.jsx("option",{value:"recording",children:"Recording"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"declined",children:"Declined"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Difficulty"}),s.jsxs("select",{value:i.difficulty||"",onChange:e=>d({...i,difficulty:e.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"",children:"Not set"}),s.jsx("option",{value:"easy",children:"Easy"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"hard",children:"Hard"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Priority Score"}),s.jsx("input",{type:"number",value:i.priority_score,onChange:e=>d({...i,priority_score:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Estimated Production Days"}),s.jsx("input",{type:"number",value:i.estimated_production_days||"",onChange:e=>d({...i,estimated_production_days:Number(e.target.value)||void 0}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., 7"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"YouTube Reference"}),s.jsx("input",{type:"url",value:i.youtube_reference_url||"",onChange:e=>d({...i,youtube_reference_url:e.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"https://youtube.com/..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Notes"}),s.jsx("textarea",{value:i.notes||"",onChange:e=>d({...i,notes:e.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"Add notes about this request..."})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>d(null),className:"flex-1 px-4 py-2 border rounded-lg border-purple-500/30 text-purple-300 hover:bg-purple-500/20 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:async()=>{if(i)try{const{error:s}=await t.from("song_requests").update(i).eq("id",i.id);if(s)throw s;r(e.map(e=>e.id===i.id?i:e)),d(null)}catch(s){alert("Failed to save request")}},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700",children:[s.jsx(S,{size:16}),"Save Changes"]})]})]})})}),document.body)]})},ge=()=>{const{theme:e}=l(),[r,a]=n.useState([]),[i,d]=n.useState(!0),[p,u]=n.useState(null),[x,h]=n.useState(!1),[g,b]=n.useState("all");n.useState("list"),n.useEffect(()=>{f()},[]);const f=async()=>{d(!0);try{const{data:e,error:s}=await t.from("content_calendar").select("*").order("target_publish_date",{ascending:!0});if(s)throw s;a(e||[])}catch(e){}d(!1)},j=e=>({idea:"gray",planning:"blue",recording:"purple",editing:"yellow",review:"orange",scheduled:"green",published:"emerald",cancelled:"red"}[e]||"gray"),v=r.filter(e=>"all"===g||("upcoming"===g?e.target_publish_date&&new Date(e.target_publish_date)>new Date:"in-progress"!==g||["planning","recording","editing","review"].includes(e.status)));return i?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white",children:"Content Calendar"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Plan and schedule your content"})]}),s.jsxs("div",{className:"flex gap-2",children:[["all","upcoming","in-progress"].map(t=>s.jsx("button",{onClick:()=>b(t),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(g===t?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===e?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:t.replace("-"," ")},t)),s.jsxs("button",{onClick:()=>{const e={id:"",title:"",content_type:"cover",platforms:[],status:"idea",priority:"medium",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};u(e),h(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[s.jsx(y,{size:20}),"Add Content"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[v.map(l=>{const i=l.target_publish_date?Math.ceil((new Date(l.target_publish_date).getTime()-(new Date).getTime())/864e5):null;return s.jsx("div",{className:"p-6 rounded-xl border transition-all "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:(n=l.priority,"urgent"===n?"üî¥":"high"===n?"üü†":"medium"===n?"üü°":"üü¢")}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${j(l.status)}-100 text-${j(l.status)}-700`,children:l.status}),s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize "+("dark"===e?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:l.content_type.replace("_"," ")})]}),s.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:l.title}),l.scripture_reference&&s.jsxs("p",{className:"text-sm mb-2 "+("dark"===e?"text-purple-400":"text-purple-600"),children:["üìñ ",l.scripture_reference]}),l.notes&&s.jsx("p",{className:"text-sm mb-3 text-gray-400",children:l.notes}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.platforms.map(t=>s.jsx("span",{className:"px-2 py-1 rounded text-xs "+("dark"===e?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:t},t))}),l.target_publish_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(I,{size:16,className:"text-gray-400"}),s.jsxs("span",{className:"text-gray-400",children:[new Date(l.target_publish_date).toLocaleDateString(),null!==i&&s.jsxs("span",{className:i<0?"text-red-500":i<7?"text-orange-500":"",children:[" ","(",i>0?`in ${i} days`:0===i?"today":`${Math.abs(i)} days overdue`,")"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{u(l),h(!1)},className:"p-2 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:s.jsx(w,{size:16,className:"text-gray-400"})}),s.jsx("button",{onClick:()=>(async e=>{if(confirm("Delete this content item?"))try{const{error:s}=await t.from("content_calendar").delete().eq("id",e);if(s)throw s;a(r.filter(t=>t.id!==e))}catch(s){}})(l.id),className:"p-2 rounded hover:bg-red-100",children:s.jsx(m,{size:16,className:"text-red-600"})})]})]})},l.id);var n}),0===v.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(E,{size:48,className:"mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium text-gray-400",children:"No content planned yet"}),s.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Content" to start planning'})]})]}),p&&o.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:s.jsx("div",{className:`w-full max-w-2xl ${"dark"===e?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl max-h-[90vh] overflow-y-auto`,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:x?"Add Content":"Edit Content"}),s.jsx("button",{onClick:()=>{u(null),h(!1)},className:"p-1 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:s.jsx(c,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Title *"}),s.jsx("input",{type:"text",value:p.title,onChange:e=>u({...p,title:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Amazing Grace Cover"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Content Type"}),s.jsxs("select",{value:p.content_type,onChange:e=>u({...p,content_type:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[s.jsx("option",{value:"cover",children:"Cover"}),s.jsx("option",{value:"original",children:"Original"}),s.jsx("option",{value:"worship_moment",children:"Worship Moment"}),s.jsx("option",{value:"testimony",children:"Testimony"}),s.jsx("option",{value:"bts",children:"Behind the Scenes"}),s.jsx("option",{value:"live",children:"Live Performance"}),s.jsx("option",{value:"collaboration",children:"Collaboration"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Status"}),s.jsxs("select",{value:p.status,onChange:e=>u({...p,status:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[s.jsx("option",{value:"idea",children:"Idea"}),s.jsx("option",{value:"planning",children:"Planning"}),s.jsx("option",{value:"recording",children:"Recording"}),s.jsx("option",{value:"editing",children:"Editing"}),s.jsx("option",{value:"review",children:"Review"}),s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),s.jsxs("select",{value:p.priority,onChange:e=>u({...p,priority:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),s.jsx("input",{type:"date",value:p.target_publish_date||"",onChange:e=>u({...p,target_publish_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Scripture Reference"}),s.jsx("input",{type:"text",value:p.scripture_reference||"",onChange:e=>u({...p,scripture_reference:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Psalm 23:1-6"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Platforms"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["YouTube","Instagram","TikTok","Facebook"].map(e=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:p.platforms.includes(e),onChange:t=>{t.target.checked?u({...p,platforms:[...p.platforms,e]}):u({...p,platforms:p.platforms.filter(t=>t!==e)})},className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-300",children:e})]},e))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),s.jsx("textarea",{value:p.notes||"",onChange:e=>u({...p,notes:e.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or ideas..."})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{u(null),h(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===e?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),s.jsxs("button",{onClick:async()=>{if(p&&p.title.trim())try{if(x){const{id:e,created_at:s,updated_at:l,...i}=p,{data:n,error:o}=await t.from("content_calendar").insert([i]).select().single();if(o)throw o;n&&a([...r,n])}else{const{error:e}=await t.from("content_calendar").update(p).eq("id",p.id);if(e)throw e;a(r.map(e=>e.id===p.id?p:e))}u(null),h(!1)}catch(e){alert("Failed to save item")}},disabled:!p.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(S,{size:16}),x?"Add Content":"Save Changes"]})]})]})})}),document.body)]})},be=async(e,s)=>{try{const{error:r}=await t.from("goals").update(s).eq("id",e);if(r)throw r;return!0}catch(r){return!1}},fe=async(e,s)=>{try{let s=t.from("revenue_expenses").select("*").order("transaction_date",{ascending:!1});e&&(s=s.gte("transaction_date",e));const{data:r,error:a}=await s;if(a)throw a;return r||[]}catch(r){return[]}},je=()=>{const{theme:e}=l(),[r,a]=n.useState([]),[i,o]=n.useState(!0),[d,p]=n.useState(null),[u,x]=n.useState(!1),[h,g]=n.useState("all"),[b,f]=n.useState("30d"),[j,y]=n.useState({totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}});n.useEffect(()=>{v()},[b]);const v=async()=>{o(!0);try{const e="30d"===b?30:"90d"===b?90:365,t=new Date;t.setDate(t.getDate()-e);const s=await fe(t.toISOString().split("T")[0]);a(s);const r=await(async e=>{try{const t=await fe(e),s=t.filter(e=>"revenue"===e.type),r=t.filter(e=>"expense"===e.type),a=s.reduce((e,t)=>e+t.amount,0),l=r.reduce((e,t)=>e+t.amount,0),i={};s.forEach(e=>{i[e.category]=(i[e.category]||0)+e.amount});const n={};return r.forEach(e=>{n[e.category]=(n[e.category]||0)+e.amount}),{totalRevenue:a,totalExpenses:l,netProfit:a-l,revenueByCategory:i,expensesByCategory:n}}catch(t){return{totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}}}})(t.toISOString().split("T")[0]);y(r)}catch(e){}o(!1)},N=e=>{const t={id:"",transaction_date:(new Date).toISOString().split("T")[0],type:e,category:"",amount:0,currency:"NGN",is_recurring:!1,created_at:(new Date).toISOString()};p(t),x(!0)},w=async e=>{if(!confirm("Delete this transaction?"))return;const s=await(async e=>{try{const{error:s}=await t.from("revenue_expenses").delete().eq("id",e);if(s)throw s;return!0}catch(s){return!1}})(e);s&&(a(r.filter(t=>t.id!==e)),await v())},k=r.filter(e=>"all"===h||e.type===h);return i?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white",children:"Financial Dashboard"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Track revenue and expenses"})]}),s.jsx("div",{className:"flex gap-2",children:["30d","90d","year"].map(t=>s.jsx("button",{onClick:()=>f(t),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(b===t?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===e?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:"30d"===t?"30 Days":"90d"===t?"90 Days":"Year"},t))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Revenue"}),s.jsx(L,{size:20,className:"text-green-500"})]}),s.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["‚Ç¶",j.totalRevenue.toLocaleString()]})]}),s.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Expenses"}),s.jsx(R,{size:20,className:"text-red-500"})]}),s.jsxs("p",{className:"text-3xl font-bold text-red-500",children:["‚Ç¶",j.totalExpenses.toLocaleString()]})]}),s.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Net Profit"}),s.jsx($,{size:20,className:j.netProfit>=0?"text-green-500":"text-red-500"})]}),s.jsxs("p",{className:"text-3xl font-bold "+(j.netProfit>=0?"text-green-500":"text-red-500"),children:["‚Ç¶",j.netProfit.toLocaleString()]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Revenue by Category"}),s.jsxs("div",{className:"space-y-3",children:[Object.entries(j.revenueByCategory).map(([t,r])=>{const a=j.totalRevenue>0?r/j.totalRevenue*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-sm text-gray-300",children:t}),s.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["‚Ç¶",r.toLocaleString()," (",a.toFixed(1),"%)"]})]}),s.jsx("div",{className:"h-2 rounded-full overflow-hidden "+("dark"===e?"bg-gray-700":"bg-gray-200"),children:s.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600",style:{width:`${a}%`}})})]},t)}),0===Object.keys(j.revenueByCategory).length&&s.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No revenue recorded yet"})]})]}),s.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Expenses by Category"}),s.jsxs("div",{className:"space-y-3",children:[Object.entries(j.expensesByCategory).map(([t,r])=>{const a=j.totalExpenses>0?r/j.totalExpenses*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-sm text-gray-300",children:t}),s.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["‚Ç¶",r.toLocaleString()," (",a.toFixed(1),"%)"]})]}),s.jsx("div",{className:"h-2 rounded-full overflow-hidden "+("dark"===e?"bg-gray-700":"bg-gray-200"),children:s.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600",style:{width:`${a}%`}})})]},t)}),0===Object.keys(j.expensesByCategory).length&&s.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No expenses recorded yet"})]})]})]}),s.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"Recent Transactions"}),s.jsxs("div",{className:"flex gap-2",children:[["all","revenue","expense"].map(t=>s.jsx("button",{onClick:()=>g(t),className:"px-3 py-1 rounded text-sm font-medium capitalize "+(h===t?"bg-purple-600 text-white":"dark"===e?"bg-gray-800 text-gray-100":"bg-black text-gray-100"),children:t},t)),s.jsx("button",{onClick:()=>N("revenue"),className:"px-3 py-1 rounded text-sm font-medium bg-green-600 text-white hover:bg-green-700",children:"+ Revenue"}),s.jsx("button",{onClick:()=>N("expense"),className:"px-3 py-1 rounded text-sm font-medium bg-red-600 text-white hover:bg-red-700",children:"+ Expense"})]})]}),s.jsxs("div",{className:"space-y-2",children:[k.slice(0,20).map(t=>s.jsxs("div",{className:"p-4 rounded-lg border flex items-center justify-between "+("dark"===e?"bg-gray-700 border-gray-600":"bg-gray-800/50 border-purple-500/20"),children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("revenue"===t.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:t.type}),s.jsx("span",{className:"text-sm font-medium text-white",children:t.category})]}),t.description&&s.jsx("p",{className:"text-sm text-gray-400",children:t.description}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(t.transaction_date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-lg font-bold "+("revenue"===t.type?"text-green-500":"text-red-500"),children:["revenue"===t.type?"+":"-","‚Ç¶",t.amount.toLocaleString()]}),s.jsx("button",{onClick:()=>w(t.id),className:"p-2 rounded hover:bg-red-100",children:s.jsx(m,{size:16,className:"text-red-600"})})]})]},t.id)),0===k.length&&s.jsx("p",{className:"text-center py-8 text-gray-500",children:"No transactions yet"})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:`w-full max-w-md ${"dark"===e?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl`,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Add ","revenue"===d.type?"Revenue":"Expense"]}),s.jsx("button",{onClick:()=>{p(null),x(!1)},className:"p-1 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:s.jsx(c,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category *"}),s.jsxs("select",{value:d.category,onChange:e=>p({...d,category:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[s.jsx("option",{value:"",children:"Select category"}),("revenue"===d.type?["YouTube Ad Revenue","Bookings","Donations","Merchandise","Streaming","Teaching","Sponsorships"]:["Equipment","Software","Studio Rental","Travel","Marketing","Website","Production","Costumes","Professional Services"]).map(e=>s.jsx("option",{value:e,children:e},e))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Amount (‚Ç¶) *"}),s.jsx("input",{type:"number",value:d.amount,onChange:e=>p({...d,amount:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Date"}),s.jsx("input",{type:"date",value:d.transaction_date,onChange:e=>p({...d,transaction_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Description"}),s.jsx("textarea",{value:d.description||"",onChange:e=>p({...d,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add details..."})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{p(null),x(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===e?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),s.jsxs("button",{onClick:async()=>{if(!d||!d.category||d.amount<=0)alert("Please fill in all required fields");else try{if(u){const{id:e,created_at:s,...l}=d,i=await(async e=>{try{const{data:s,error:r}=await t.from("revenue_expenses").insert([e]).select().single();if(r)throw r;return s}catch(s){return null}})(l);i&&(a([i,...r]),await v())}p(null),x(!1)}catch(e){alert("Failed to save transaction")}},disabled:!d.category||d.amount<=0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(S,{size:16}),"Save"]})]})]})})})]})},ye=()=>{const{theme:e}=l(),[r,a]=n.useState([]),[i,d]=n.useState(!0),[p,u]=n.useState(null),[x,h]=n.useState(!1),[g,b]=n.useState("all");n.useEffect(()=>{f()},[]);const f=async()=>{d(!0);const e=await(async()=>{try{const{data:e,error:s}=await t.from("goals").select("*").order("created_at",{ascending:!1});if(s)throw s;return e||[]}catch(e){return[]}})();a(e),d(!1)},j=async e=>{if(!confirm("Delete this goal?"))return;const s=await(async e=>{try{const{error:s}=await t.from("goals").delete().eq("id",e);if(s)throw s;return!0}catch(s){return!1}})(e);s&&a(r.filter(t=>t.id!==e))},v=r.filter(e=>"all"===g||e.status===g),N=e=>({content:"purple",growth:"blue",ministry:"pink",financial:"green",engagement:"orange",learning:"indigo",personal:"red"}[e]||"gray");return i?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-white",children:"Goals Tracker"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Set and track your ministry goals"})]}),s.jsxs("div",{className:"flex gap-2",children:[["all","active","completed"].map(t=>s.jsx("button",{onClick:()=>b(t),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(g===t?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===e?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:t},t)),s.jsxs("button",{onClick:()=>{const e={id:"",title:"",category:"content",target_value:0,current_value:0,start_date:(new Date).toISOString().split("T")[0],priority:"medium",status:"active",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};u(e),h(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[s.jsx(y,{size:20}),"Add Goal"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.map(t=>{const l=t.target_value>0?t.current_value/t.target_value*100:0,i="completed"===t.status,n=t.target_date?Math.ceil((new Date(t.target_date).getTime()-(new Date).getTime())/864e5):null;return s.jsxs("div",{className:`p-6 rounded-xl border transition-all ${"dark"===e?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"} ${i?"opacity-75":""}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${N(t.category)}-100 text-${N(t.category)}-700`,children:t.category}),s.jsx("span",{className:`text-xs font-medium ${o=t.priority,{low:"text-gray-500",medium:"text-yellow-500",high:"text-red-500"}[o]||"text-gray-500"}`,children:t.priority})]}),s.jsx("h3",{className:"text-lg font-bold text-white",children:t.title}),t.notes&&s.jsx("p",{className:"text-sm mt-1 text-gray-400",children:t.notes})]}),s.jsx("div",{className:"flex items-center gap-2",children:i?s.jsx(F,{size:24,className:"text-green-500"}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{u(t),h(!1)},className:"p-2 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:s.jsx(w,{size:16,className:"text-gray-400"})}),s.jsx("button",{onClick:()=>j(t.id),className:"p-2 rounded hover:bg-red-100",children:s.jsx(m,{size:16,className:"text-red-600"})})]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Progress"}),s.jsxs("span",{className:"text-sm font-bold text-white",children:[t.current_value," / ",t.target_value," ",t.unit||""]})]}),s.jsx("div",{className:"h-3 rounded-full overflow-hidden "+("dark"===e?"bg-gray-700":"bg-gray-200"),children:s.jsx("div",{className:"h-full transition-all "+(i?"bg-green-500":"bg-gradient-to-r from-purple-600 to-pink-600"),style:{width:`${Math.min(l,100)}%`}})}),s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:[l.toFixed(1),"% complete"]}),!i&&s.jsx("input",{type:"number",value:t.current_value,onChange:e=>(async(e,t)=>{const s={...e,current_value:t};t>=e.target_value&&"active"===e.status&&(s.status="completed"),await be(e.id,s)&&a(r.map(t=>t.id===e.id?s:t))})(t,Number(e.target.value)),className:"w-20 px-2 py-1 text-xs rounded border "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),null!==n&&!i&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(I,{size:16,className:"text-gray-400"}),s.jsx("span",{className:"text-gray-400",children:n>0?`${n} days left`:0===n?"Due today":`${Math.abs(n)} days overdue`})]})]},t.id);var o}),0===v.length&&s.jsxs("div",{className:"col-span-2 text-center py-12",children:[s.jsx(V,{size:48,className:"mx-auto mb-4 text-gray-400"}),s.jsxs("p",{className:"text-lg font-medium text-gray-400",children:["No ","all"!==g?g:""," goals yet"]}),s.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Goal" to create your first goal'})]})]}),p&&o.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:s.jsx("div",{className:`w-full max-w-lg ${"dark"===e?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl max-h-[90vh] overflow-y-auto`,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:x?"Add New Goal":"Edit Goal"}),s.jsx("button",{onClick:()=>{u(null),h(!1)},className:"p-1 rounded "+("dark"===e?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:s.jsx(c,{size:20,className:"text-gray-400"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Goal Title *"}),s.jsx("input",{type:"text",value:p.title,onChange:e=>u({...p,title:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Upload 10 videos this month"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category"}),s.jsxs("select",{value:p.category,onChange:e=>u({...p,category:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[s.jsx("option",{value:"content",children:"Content"}),s.jsx("option",{value:"growth",children:"Growth"}),s.jsx("option",{value:"ministry",children:"Ministry"}),s.jsx("option",{value:"financial",children:"Financial"}),s.jsx("option",{value:"engagement",children:"Engagement"}),s.jsx("option",{value:"learning",children:"Learning"}),s.jsx("option",{value:"personal",children:"Personal"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),s.jsxs("select",{value:p.priority,onChange:e=>u({...p,priority:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Value"}),s.jsx("input",{type:"number",value:p.target_value,onChange:e=>u({...p,target_value:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Current Value"}),s.jsx("input",{type:"number",value:p.current_value,onChange:e=>u({...p,current_value:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Unit (optional)"}),s.jsx("input",{type:"text",value:p.unit||"",onChange:e=>u({...p,unit:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., videos, subscribers, ‚Ç¶"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),s.jsx("input",{type:"date",value:p.target_date||"",onChange:e=>u({...p,target_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),s.jsx("textarea",{value:p.notes||"",onChange:e=>u({...p,notes:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===e?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or strategy..."})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{u(null),h(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===e?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),s.jsxs("button",{onClick:async()=>{if(p&&p.title.trim())try{if(x){const{id:e,created_at:s,updated_at:l,...i}=p,n=await(async e=>{try{const{data:s,error:r}=await t.from("goals").insert([e]).select().single();if(r)throw r;return s}catch(s){return null}})(i);n&&a([n,...r])}else{await be(p.id,p)&&a(r.map(e=>e.id===p.id?p:e))}u(null),h(!1)}catch(e){alert("Failed to save goal")}},disabled:!p.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(S,{size:16}),x?"Add Goal":"Save Changes"]})]})]})})}),document.body)]})};function ve(){const[e,t]=n.useState("7d"),[r,a]=n.useState({pageViews:[],topPages:[],userLocations:[],deviceBreakdown:[],peakHours:[],userRetention:[]}),[l,i]=n.useState(!0),[o,d]=n.useState(!1);n.useEffect(()=>{c(),setTimeout(()=>d(!0),100)},[e]);const c=async()=>{try{const t=await ie(),s=(null==t?void 0:t.total_visits)||0,r="7d"===e?7:"30d"===e?30:90,l=Math.floor(s/r);a({pageViews:p(r,l),topPages:[{page:"/home",views:Math.floor(.35*s)},{page:"/videos",views:Math.floor(.28*s)},{page:"/about",views:Math.floor(.2*s)},{page:"/contact",views:Math.floor(.12*s)},{page:"/gallery",views:Math.floor(.05*s)}],userLocations:[{country:"United States",users:Math.floor(.32*s)},{country:"United Kingdom",users:Math.floor(.18*s)},{country:"Canada",users:Math.floor(.12*s)},{country:"Australia",users:Math.floor(.1*s)},{country:"Germany",users:Math.floor(.08*s)}],deviceBreakdown:[{device:"Mobile",percentage:65},{device:"Desktop",percentage:28},{device:"Tablet",percentage:7}],peakHours:u(),userRetention:x()})}catch(t){}finally{i(!1)}},p=(e,t)=>Array.from({length:e},(s,r)=>{const a=new Date;a.setDate(a.getDate()-(e-r-1));const l=Math.floor(.3*t);return{date:a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),views:Math.max(10,t+Math.floor(Math.random()*l*2-l))}}),u=()=>Array.from({length:24},(e,t)=>({hour:t,activity:Math.floor(80*Math.random())+(t>=8&&t<=22?40:10)})),x=()=>Array.from({length:8},(e,t)=>({week:`Week ${t+1}`,rate:Math.max(30,100-8*t-10*Math.random())}));return l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s.jsxs(s.Fragment,{children:[s.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n      "}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Advanced Analytics"}),s.jsx("p",{className:"text-purple-300 mt-1",children:"Deep insights into user behavior and engagement"})]}),s.jsxs("select",{value:e,onChange:e=>t(e.target.value),className:"px-4 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"7d",children:"Last 7 Days"}),s.jsx("option",{value:"30d",children:"Last 30 Days"}),s.jsx("option",{value:"90d",children:"Last 90 Days"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-4 border border-purple-500/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-300 text-sm",children:"Total Page Views"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.pageViews.reduce((e,t)=>e+t.views,0).toLocaleString()}),s.jsx("p",{className:"text-green-400 text-xs mt-1",children:"‚Üë 12.5% vs last period"})]}),s.jsx(B,{className:"w-8 h-8 text-purple-400"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-4 border border-blue-500/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-300 text-sm",children:"Unique Visitors"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.userLocations.reduce((e,t)=>e+t.users,0).toLocaleString()}),s.jsx("p",{className:"text-green-400 text-xs mt-1",children:"‚Üë 8.3% vs last period"})]}),s.jsx(z,{className:"w-8 h-8 text-blue-400"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-4 border border-green-500/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-300 text-sm",children:"Avg Session Time"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"4m 32s"}),s.jsx("p",{className:"text-green-400 text-xs mt-1",children:"‚Üë 15.2% vs last period"})]}),s.jsx(I,{className:"w-8 h-8 text-green-400"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-4 border border-orange-500/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-orange-300 text-sm",children:"Bounce Rate"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"32.4%"}),s.jsx("p",{className:"text-red-400 text-xs mt-1",children:"‚Üì 5.1% vs last period"})]}),s.jsx(U,{className:"w-8 h-8 text-orange-400"})]})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Page Views Over Time"}),((e,t)=>{const r=Math.max(...e.map(e=>e.views),1),a=e.map((t,s)=>({x:s/(e.length-1||1)*100,y:100-t.views/r*80})),l=a.map((e,t)=>`${0===t?"M":"L"} ${e.x},${e.y}`).join(" "),i=`${l} L ${a[a.length-1].x},100 L 0,100 Z`;return s.jsx("div",{className:"relative h-64",children:s.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"analytics-gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.4"}),s.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.05"})]})}),s.jsx("path",{d:i,fill:"url(#analytics-gradient)",style:{animation:o?"drawPath 1.5s ease-out forwards":"none",opacity:o?1:0}}),s.jsx("path",{d:l,fill:"none",stroke:t,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:o?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:"1000",strokeDashoffset:o?"0":"1000"}}),a.map((e,r)=>s.jsx("circle",{cx:e.x,cy:e.y,r:"1.5",fill:t,style:{animation:o?`fadeInScale 0.3s ease-out ${.5+.05*r}s forwards`:"none",opacity:o?1:0}},r))]})})})(r.pageViews,"#9333ea")]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(L,{className:"w-5 h-5"}),"Top Pages"]}),s.jsx("div",{className:"space-y-3",children:r.topPages.map((e,t)=>s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-white font-medium",children:e.page}),s.jsxs("span",{className:"text-purple-300 text-sm",children:[e.views.toLocaleString()," views"]})]}),s.jsx("div",{className:"w-full bg-purple-500/20 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 h-2 rounded-full transition-all",style:{width:e.views/r.topPages[0].views*100+"%",animation:o?`slideIn 0.5s ease-out ${.1*t}s forwards`:"none"}})})]})},t))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-6 border border-blue-500/20",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(O,{className:"w-5 h-5"}),"Top Locations"]}),s.jsx("div",{className:"space-y-3",children:r.userLocations.map((e,t)=>s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-white font-medium",children:e.country}),s.jsxs("span",{className:"text-blue-300 text-sm",children:[e.users.toLocaleString()," users"]})]}),s.jsx("div",{className:"w-full bg-blue-500/20 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2 rounded-full transition-all",style:{width:e.users/r.userLocations[0].users*100+"%",animation:o?`slideIn 0.5s ease-out ${.1*t}s forwards`:"none"}})})]})},t))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-6 border border-green-500/20",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(G,{className:"w-5 h-5"}),"Device Breakdown"]}),s.jsx("div",{className:"space-y-4",children:r.deviceBreakdown.map((e,t)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-white",children:e.device}),s.jsxs("span",{className:"text-green-300",children:[e.percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-green-500/20 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 h-3 rounded-full transition-all",style:{width:`${e.percentage}%`,animation:o?`slideIn 0.5s ease-out ${.1*t}s forwards`:"none"}})})]},t))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-6 border border-orange-500/20",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(I,{className:"w-5 h-5"}),"Peak Activity Hours"]}),s.jsx("div",{className:"h-48 flex items-end justify-between gap-1",children:r.peakHours.filter((e,t)=>t%2==0).map((e,t)=>{const a=Math.max(...r.peakHours.map(e=>e.activity));return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[s.jsx("div",{className:"w-full bg-gradient-to-t from-orange-600 to-orange-700 rounded-t hover:from-orange-500 hover:to-orange-600 transition-all cursor-pointer",style:{height:e.activity/a*100+"%",animation:o?`slideUp 0.5s ease-out ${.05*t}s forwards`:"none",opacity:o?1:0}}),s.jsxs("span",{className:"text-xs text-orange-300",children:[e.hour,":00"]})]},t)})})]})]})]}),s.jsx("style",{children:"\n        @keyframes slideIn {\n          from {\n            width: 0;\n          }\n        }\n        @keyframes slideUp {\n          from {\n            height: 0;\n            opacity: 0;\n          }\n        }\n      "})]})}const Ne=()=>{const[e,t]=n.useState(null),[r,a]=n.useState(!1),[l,i]=n.useState(!1),[o,d]=n.useState(!1),[p,u]=n.useState(!1);n.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return void i(!0);const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;d(e);const s=e=>{e.preventDefault(),t(e),a(!0)};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",()=>{i(!0),a(!1)}),()=>{window.removeEventListener("beforeinstallprompt",s)}},[]);return l?null:s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:async()=>{if(o)return void u(!0);if(!e)return void alert('To install this app:\n\n1. Click the menu button (‚ãÆ) in your browser\n2. Select "Install App" or "Add to Home Screen"\n3. Follow the prompts');e.prompt();const{outcome:s}=await e.userChoice;"accepted"===s&&i(!0),t(null),a(!1)},className:"w-full mt-4 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold text-sm transition-all hover:shadow-lg hover:shadow-green-500/50 hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2",children:[s.jsx(H,{size:18}),"Install App"]}),p&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] rounded-2xl p-6 max-w-md w-full border border-purple-500/30 shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(W,{size:24,className:"text-purple-300"}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"Install on iOS"})]}),s.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:s.jsx(c,{size:20,className:"text-purple-300"})})]}),s.jsxs("div",{className:"space-y-4 text-purple-200",children:[s.jsx("p",{className:"text-sm",children:"To install this app on your iPhone or iPad:"}),s.jsxs("ol",{className:"space-y-3 text-sm",children:[s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),s.jsxs("span",{children:["Tap the ",s.jsx("strong",{className:"text-white",children:"Share"})," button at the bottom of Safari"]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),s.jsxs("span",{children:["Scroll down and tap ",s.jsx("strong",{className:"text-white",children:'"Add to Home Screen"'})]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),s.jsxs("span",{children:["Tap ",s.jsx("strong",{className:"text-white",children:'"Add"'})," in the top right corner"]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-purple-500/10 rounded-lg border border-purple-500/20",children:s.jsx("p",{className:"text-xs text-purple-300",children:"üí° The app icon will appear on your home screen and work like a native app!"})})]}),s.jsx("button",{onClick:()=>u(!1),className:"w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Got it!"})]})}),!o&&!e&&r&&s.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(J,{size:18,className:"text-blue-300 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs text-blue-200",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Install this app:"}),s.jsx("p",{children:'Click the menu (‚ãÆ) ‚Üí "Install App" or "Add to Home Screen"'})]})]})}),s.jsxs("div",{className:"mt-3 flex items-center justify-center gap-4 text-xs text-purple-400",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(G,{size:14}),s.jsx("span",{children:"Mobile"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Y,{size:14}),s.jsx("span",{children:"Desktop"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(W,{size:14}),s.jsx("span",{children:"iOS"})]})]})]})};const we=new class{constructor(){this.audio=null,this.notificationCount=0,this.initializeAudio(),this.requestPermission()}initializeAudio(){}async requestPermission(){"Notification"in window&&"default"===Notification.permission&&await Notification.requestPermission()}playSound(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.value=800,t.type="sine",s.gain.setValueAtTime(.3,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5)}catch(e){}}async showNotification(e,t){if("Notification"in window&&"granted"===Notification.permission)try{const s=new Notification(e,{icon:"/icon-192x192.png",badge:"/icon-192x192.png",...t});return setTimeout(()=>s.close(),5e3),s}catch(s){}}async updateBadge(e){if(this.notificationCount=e,"setAppBadge"in navigator)try{e>0?await navigator.setAppBadge(e):await navigator.clearAppBadge()}catch(t){}if("serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage({type:"UPDATE_BADGE",count:e})}catch(t){}this.updateFaviconBadge(e)}updateFaviconBadge(e){const t=document.createElement("canvas");t.width=32,t.height=32;const s=t.getContext("2d");if(!s)return;s.fillStyle="#a855f7",s.beginPath(),s.arc(16,16,16,0,2*Math.PI),s.fill(),e>0&&(s.fillStyle="#ff0000",s.beginPath(),s.arc(24,8,8,0,2*Math.PI),s.fill(),s.fillStyle="#ffffff",s.font="bold 10px Arial",s.textAlign="center",s.textBaseline="middle",s.fillText(e>99?"99+":e.toString(),24,8));const r=document.querySelector("link[rel*='icon']")||document.createElement("link");r.type="image/x-icon",r.rel="shortcut icon",r.href=t.toDataURL(),document.getElementsByTagName("head")[0].appendChild(r)}async clearBadge(){await this.updateBadge(0)}async notifyNewMessage(e,t){this.playSound(),await this.showNotification("New Message",{body:`From ${e}: ${t}`,tag:"new-message"})}async notifyNewSongRequest(e,t){this.playSound(),await this.showNotification("New Song Request",{body:`${t} requested: ${e}`,tag:"new-song-request"})}async notifyUserLogin(e,t){this.playSound(),await this.showNotification("User Logged In",{body:`${e} (${t}) has logged in`,tag:"user-login"})}async notifyNewFanMessage(e,t){this.playSound(),await this.showNotification("New Fan Message",{body:`${e} from ${t}`,tag:"new-fan-message"})}},ke=({onClose:a})=>{var l;const{profilePicture:o}=e(),[p,x]=n.useState(!1),[m,h]=n.useState(null),[g,b]=n.useState(""),[f,y]=n.useState(""),[v,N]=n.useState(!1),[w,k]=n.useState(!1),[_,S]=n.useState(""),[C,z]=n.useState(!1),[D,P]=n.useState("dashboard"),[q,M]=n.useState([]),[I,R]=n.useState({total_visitors:0,page_visits:{},artist_logins:0,last_updated:(new Date).toISOString()}),[F,U]=n.useState({videoUpdates:[],loginFrequency:[],siteVisits:[]}),{unreadCount:O,updateUnreadCount:G}=(e=>{const[s,r]=n.useState(0);n.useEffect(()=>{if(!e)return;const s=t.channel("fan_messages_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"fan_messages"},e=>{const t=e.new;we.notifyNewFanMessage(t.message_type,t.from_name||"Anonymous"),a()}).subscribe(),r=t.channel("song_requests_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"song_requests"},e=>{const t=e.new;we.notifyNewSongRequest(t.song_title,t.requested_by_name||"Anonymous"),a()}).subscribe();return a(),()=>{s.unsubscribe(),r.unsubscribe()}},[e]);const a=async()=>{try{const{count:e}=await t.from("fan_messages").select("*",{count:"exact",head:!0}).eq("status","unread"),{count:s}=await t.from("song_requests").select("*",{count:"exact",head:!0}).eq("status","new"),a=(e||0)+(s||0);r(a),await we.updateBadge(a)}catch(e){}};return{unreadCount:s,updateUnreadCount:a}})(m);n.useEffect(()=>(document.body.classList.add("admin-panel-active"),()=>{document.body.classList.remove("admin-panel-active")}),[]),n.useEffect(()=>{(async()=>{var e;try{const{data:s}=await t.auth.getUser();if(null==s?void 0:s.user){const r=s.user.email||"";let a=null;if(r){const{data:e}=await t.from("users").select("*").eq("email",r).maybeSingle();e&&(a={id:e.id,email:e.email,role:e.role,phone:e.phone||"",name:e.full_name,profilePicture:o||localStorage.getItem("admin_profile_picture")||void 0})}const l=(null==(e=s.user.email)?void 0:e.split("@")[0])||"Admin",i=a||{id:s.user.id,email:r,role:"artist",phone:"",name:l,profilePicture:o||localStorage.getItem("admin_profile_picture")||void 0};h(i),x(!0),localStorage.setItem("admin_session",JSON.stringify({user:i}))}else{const e=localStorage.getItem("admin_session");if(e){const t=JSON.parse(e),s=o||localStorage.getItem("admin_profile_picture");s&&!t.user.profilePicture&&(t.user.profilePicture=s),h(t.user),x(!0)}}}catch(s){}finally{H()}})()},[o]);const H=async()=>{const{getVideos:e,getSettings:t}=await r(async()=>{const{getVideos:e,getSettings:t}=await import("./supabaseData-Dg2cJyP6.js");return{getVideos:e,getSettings:t}},__vite__mapDeps([0,1,2,3,4])),[s,a]=await Promise.all([e(),t()]);M(s),R({total_visitors:(null==a?void 0:a.total_visits)||0,page_visits:{home:(null==a?void 0:a.total_visits)||0},artist_logins:(null==a?void 0:a.artist_logins)||0,last_updated:(new Date).toISOString()});const l=(e,t=2)=>{const s=[];for(let r=6;r>=0;r--){const a=new Date;a.setDate(a.getDate()-r);const l=Math.max(0,e+Math.floor(Math.random()*t*2-t));s.push({date:a.toISOString(),value:l})}return s},i=s.filter(e=>"completed"===e.status).length;U({videoUpdates:l(Math.floor(i/7),1),loginFrequency:l(Math.floor((null==a?void 0:a.artist_logins)/7||1),1),siteVisits:l(Math.floor(((null==a?void 0:a.total_visits)||0)/7),3)})},W=async e=>{e.preventDefault();try{const{data:e,error:s}=await t.auth.signInWithPassword({email:g,password:f});if(s||!e.user)return void alert("Invalid email or password. Please check your credentials.");let a=null;const{data:l}=await t.from("users").select("*").eq("email",g).maybeSingle();l&&(a=l);const i={id:(null==a?void 0:a.id)||e.user.id,email:g,role:(null==a?void 0:a.role)||"artist",phone:(null==a?void 0:a.phone)||"",name:(null==a?void 0:a.full_name)||g.split("@")[0]||"Admin",profilePicture:localStorage.getItem("admin_profile_picture")||void 0};h(i),x(!0),localStorage.setItem("admin_session",JSON.stringify({user:i})),we.notifyUserLogin(i.name,i.role);const{getSettings:n,updateSettings:o}=await r(async()=>{const{getSettings:e,updateSettings:t}=await import("./supabaseData-Dg2cJyP6.js");return{getSettings:e,updateSettings:t}},__vite__mapDeps([0,1,2,3,4])),d=await n(),c=(null==d?void 0:d.artist_logins)||0;await o({artist_logins:c+1})}catch(s){alert("Login failed due to a server error. Please try again.")}},J=async e=>{e.preventDefault();["artist@estherreign.com","editor@estherreign.com"].includes(_)?(z(!0),setTimeout(()=>{alert(`Password reset instructions have been sent to ${_}.\n\nFor demo purposes:\n- Artist password: artist2024\n- Editor password: editor2024`),k(!1),z(!1),S("")},1500)):alert("Email not found. Please check your email address.")};return p?s.jsxs("div",{className:"admin-panel fixed inset-0 bg-black overflow-hidden z-50 flex flex-col",children:[s.jsxs("div",{className:"fixed inset-0 z-0",children:[s.jsx(i,{}),s.jsx("div",{className:"absolute inset-0 bg-black/60 z-[1]"})]}),s.jsx("nav",{className:"flex-shrink-0 bg-black/95 backdrop-blur-xl border-b border-purple-500/30 relative z-[90]",style:{zIndex:90,position:"relative"},children:s.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[o||(null==m?void 0:m.profilePicture)?s.jsx("img",{src:o||(null==m?void 0:m.profilePicture)||"",alt:"Profile",className:"w-12 h-12 rounded-xl object-cover shadow-lg shadow-purple-500/30"}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:s.jsx("span",{className:"text-white font-black text-xl",children:null==(l=null==m?void 0:m.name)?void 0:l.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-black text-white",children:"Esther Reign Admin"}),s.jsxs("p",{className:"text-sm text-purple-300",children:[null==m?void 0:m.name," ‚Ä¢ ","artist"===(null==m?void 0:m.role)?"Artist":"Editor"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[s.jsx(ce,{currentUser:m,externalUnreadCount:O}),s.jsxs("button",{onClick:a,className:"px-3 py-2 md:px-4 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all text-purple-200 border border-purple-500/20 flex items-center gap-1.5 md:gap-2 touch-manipulation min-h-[44px]",children:[s.jsx(B,{size:16,className:"md:w-[18px] md:h-[18px]"}),s.jsx("span",{className:"hidden md:inline",children:"View Site"})]}),s.jsxs("button",{onClick:async()=>{try{await t.auth.signOut()}catch(e){}x(!1),h(null),localStorage.removeItem("admin_session")},className:"px-3 py-2 md:px-4 bg-red-500/10 hover:bg-red-500/20 rounded-xl transition-all text-red-300 border border-red-500/20 flex items-center gap-1.5 md:gap-2 touch-manipulation min-h-[44px]",children:[s.jsx(K,{size:16,className:"md:w-[18px] md:h-[18px]"}),s.jsx("span",{className:"hidden md:inline",children:"Logout"})]})]})]})}),s.jsxs("div",{className:"flex-1 overflow-hidden flex relative z-[50]",children:[s.jsx("aside",{className:"hidden lg:block w-64 bg-[#2d1b4e]/90 backdrop-blur-xl border-r border-purple-500/20 overflow-y-auto relative z-[40]",children:s.jsx("div",{className:"p-4 space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:X},{id:"videos",label:"Videos",icon:u},{id:"messages",label:"Messages",icon:A},{id:"songs",label:"Song Requests",icon:T},{id:"calendar",label:"Calendar",icon:E},{id:"financial",label:"Financial",icon:$},{id:"goals",label:"Goals",icon:V},{id:"analytics",label:"Analytics",icon:L},{id:"settings",label:"Settings",icon:ee}].map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>P(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all "+(D===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg shadow-purple-500/30":"text-purple-200 hover:bg-purple-500/10 hover:text-white"),children:[s.jsx(t,{size:20}),s.jsx("span",{children:e.label})]},e.id)})})}),s.jsx("main",{className:"flex-1 overflow-y-auto relative z-[30]",children:s.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 relative z-[30]",children:[s.jsx("div",{className:"lg:hidden flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide touch-pan-x",children:[{id:"dashboard",label:"Dashboard",icon:X},{id:"videos",label:"Videos",icon:u},{id:"messages",label:"Messages",icon:A},{id:"songs",label:"Songs",icon:T},{id:"calendar",label:"Calendar",icon:E},{id:"financial",label:"Financial",icon:$},{id:"goals",label:"Goals",icon:V},{id:"analytics",label:"Analytics",icon:L},{id:"settings",label:"Settings",icon:ee}].map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>P(e.id),className:"flex-shrink-0 px-3 py-2.5 rounded-lg font-semibold transition-all flex items-center gap-1.5 text-sm min-h-[44px] touch-manipulation "+(D===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg":"bg-purple-500/10 text-purple-200 hover:bg-purple-500/20 active:bg-purple-500/30"),children:[s.jsx(t,{size:16}),s.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:e.label})]},e.id)})}),"dashboard"===D&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(ue,{videoUpdates:F.videoUpdates,loginFrequency:F.loginFrequency,siteVisits:F.siteVisits}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/30 bg-black/40",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-purple-500/30 rounded-xl flex items-center justify-center",children:s.jsx(u,{size:24,className:"text-purple-400"})})}),s.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:q.length}),s.jsx("p",{className:"text-purple-200 text-shadow text-sm font-semibold",children:"Total Videos"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/30 bg-black/40",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center",children:s.jsx(L,{size:24,className:"text-blue-400"})})}),s.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:I.total_visitors}),s.jsx("p",{className:"text-blue-200 text-shadow text-sm font-semibold",children:"Total Visitors"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/20 backdrop-blur-xl rounded-2xl p-6 border border-green-500/30 bg-black/40",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-500/30 rounded-xl flex items-center justify-center",children:s.jsx(d,{size:24,className:"text-green-400"})})}),s.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:q.filter(e=>"completed"===e.status).length}),s.jsx("p",{className:"text-green-200 text-shadow text-sm font-semibold",children:"Published"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-500/20 to-orange-600/20 backdrop-blur-xl rounded-2xl p-6 border border-orange-500/30 bg-black/40",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:s.jsx(j,{size:24,className:"text-orange-400"})})}),s.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:I.artist_logins}),s.jsx("p",{className:"text-orange-200 text-shadow text-sm font-semibold",children:"Admin Logins"})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-8 border border-purple-500/30 bg-black/40",children:[s.jsxs("h2",{className:"text-2xl font-black text-white text-shadow-strong mb-2",children:["Welcome back, ",null==m?void 0:m.name,"! üëã"]}),s.jsx("p",{className:"text-purple-100 text-shadow mb-6 font-medium",children:"Here's what's happening with your platform today."}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[s.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Active Videos"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:q.filter(e=>"completed"===e.status).length})]}),s.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[s.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:q.filter(e=>"pending"===e.status).length})]}),s.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[s.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Total Views"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:I.total_visitors})]})]})]})]}),"videos"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(pe,{})}),"messages"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(me,{})}),"songs"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(he,{})}),"calendar"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(ge,{})}),"financial"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(je,{})}),"goals"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(ye,{})}),"analytics"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(ve,{})}),"settings"===D&&s.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:s.jsx(xe,{})})]})})]}),m&&s.jsx(de,{currentUser:m,videos:q})]}):s.jsxs("div",{className:"admin-panel fixed inset-0 bg-black flex items-center justify-center z-50 overflow-y-auto p-4",children:[s.jsx(i,{}),s.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-3 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all border border-purple-500/20 backdrop-blur-sm z-10",children:s.jsx(c,{size:24,className:"text-white"})}),s.jsx("div",{className:"max-w-lg w-full my-auto relative z-10",children:s.jsxs("div",{className:"bg-black/90 backdrop-blur-2xl rounded-3xl p-6 md:p-8 border border-purple-500/30 shadow-2xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/50",children:s.jsx(j,{size:48,className:"text-white"})}),s.jsx("h2",{className:"text-4xl font-black text-white mb-3",children:"Admin Panel"}),s.jsx("p",{className:"text-purple-200",children:"Enter your credentials to access the admin dashboard"})]}),w?s.jsxs("form",{onSubmit:J,className:"space-y-5",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Z,{size:32,className:"text-purple-300"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Reset Password"}),s.jsx("p",{className:"text-sm text-purple-200",children:"Enter your email to receive reset instructions"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",value:_,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>{k(!1),S("")},className:"flex-1 bg-purple-500/10 border border-purple-500/30 text-purple-200 px-6 py-3 rounded-xl font-semibold transition-all hover:bg-purple-500/20",children:"Back"}),s.jsx("button",{type:"submit",disabled:C,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Sending...":"Send Reset Link"})]})]}):s.jsxs("form",{onSubmit:W,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",value:g,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:v?"text":"password",value:f,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 pr-12 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your password",required:!0}),s.jsx("button",{type:"button",onClick:()=>N(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-purple-300 hover:text-purple-200 transition-colors",children:v?s.jsx(Q,{size:20}):s.jsx(B,{size:20})})]})]}),s.jsx("div",{className:"flex items-center justify-between text-sm",children:s.jsxs("button",{type:"button",onClick:()=>k(!0),className:"text-purple-300 hover:text-purple-200 transition-colors flex items-center gap-1",children:[s.jsx(Z,{size:16}),"Forgot Password?"]})}),s.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all hover:shadow-lg hover:shadow-purple-500/50 hover:scale-[1.02] active:scale-[0.98]",children:"Sign In"}),s.jsx(Ne,{})]})]})})]})};export{ke as default};
