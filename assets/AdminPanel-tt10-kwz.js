const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabaseData-PmD0rX_k.js","assets/index-BXC4dLVF.js","assets/react-vendor-9mwbaf1v.js","assets/icons-D3sHNqvn.js","assets/index-FwW47yGk.css"])))=>i.map(i=>d[i]);
import{s as e,j as t,_ as s,u as r,a,P as l}from"./index-BXC4dLVF.js";import{r as i,a as n}from"./react-vendor-9mwbaf1v.js";import{g as o,X as d,h as c,V as p,i as x,T as u,j as m,k as g,S as h,B as b,U as f,l as j,m as y,E as v,n as N,L as w,o as k,p as _,q as S,r as C,f as z,H as A,M as D,a as T,b as E,s as P,t as q,u as I,v as M,w as L,D as R,C as $,x as F,y as V,A as B,z as O,F as U,J as G,K as H,N as W,O as J,Q as Y,R as Q,W as Z,Z as K,_ as X}from"./icons-D3sHNqvn.js";import{getVideos as ee,addVideo as te,updateVideo as se,deleteVideo as re,reorderVideos as ae,getSettings as le}from"./supabaseData-PmD0rX_k.js";const ie=["ðŸ˜Š","ðŸ˜‚","ðŸ¥°","ðŸ˜","ðŸ¤—","ðŸ˜˜","ðŸ˜Ž","ðŸ¤©","ðŸ¥³","ðŸ‘","ðŸ‘","ðŸ™Œ","ðŸ’ª","ðŸ™","â¤ï¸","ðŸ’–","ðŸ’•","ðŸŽµ","ðŸŽ¶","ðŸŽ¤","âœ¨","â­","ðŸŒŸ","ðŸ”¥","ðŸ’¯","ðŸŽ‰"],ne=()=>{try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e;"suspended"===t.state&&t.resume();const s=t.createOscillator(),r=t.createGain();s.connect(r),r.connect(t.destination),s.frequency.value=800,s.type="sine",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),s.start(t.currentTime),s.stop(t.currentTime+.2),s.onended=()=>{t.close()}}catch(e){}},oe=({currentUser:s,videos:r=[]})=>{var a;const[l,n]=i.useState(!1),[b,f]=i.useState([]),[j,y]=i.useState(""),[v,N]=i.useState(!1),[w,k]=i.useState(!1),[_,S]=i.useState(""),[C,z]=i.useState(null),[A,D]=i.useState(""),[T,E]=i.useState(0),[P,q]=i.useState(null),I=i.useRef(null),M=i.useRef(null),L="artist"===s.role?"Editor":"Esther Reign";i.useEffect(()=>{R(),$(),G(),H()},[]),i.useEffect(()=>{l&&I.current&&(I.current.scrollIntoView({behavior:"smooth"}),E(0))},[b,l]);const R=async()=>{try{const{data:t,error:r}=await e.from("chat_messages").select("*").order("timestamp",{ascending:!0});if(r)throw r;if(f(t||[]),!l){const e=(t||[]).filter(e=>e.sender_id!==s.id).length;E(Math.min(e,9))}}catch(t){}},$=()=>{const t=e.channel("admin_chat_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_messages"},e=>{if("INSERT"===e.eventType){const t=e.new;f(e=>e.find(e=>e.id===t.id)?e:[...e,t]),t.sender_id!==s.id&&(ne(),l||E(e=>Math.min(e+1,9)))}else"DELETE"===e.eventType?f(t=>t.filter(t=>t.id!==e.old.id)):"UPDATE"===e.eventType&&f(t=>t.map(t=>t.id===e.new.id?e.new:t))}).subscribe();return()=>{e.removeChannel(t)}},F=async()=>{if(!j.trim()&&!_)return;const t=_?r.find(e=>e.id===_):null,a=j.trim()||(_&&t?`ðŸ“¹ Referencing: ${t.title}`:"ðŸ“¹ Video reference"),l={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender_id:s.id,sender_name:s.name,message:a,timestamp:(new Date).toISOString(),video_id:_||null,edited:!1};try{const t={...l,timestamp:(new Date).toISOString()};f(e=>[...e,t]),y(""),S(""),k(!1);const{data:s,error:r}=await e.from("chat_messages").insert([l]).select().single();if(r)throw f(e=>e.filter(e=>e.id!==l.id)),r}catch(i){alert("Failed to send message: "+i.message)}},V=()=>{z(null),D("")},B=async t=>{if(A.trim())try{const{error:s}=await e.from("chat_messages").update({message:A.trim(),edited:!0,timestamp:(new Date).toISOString()}).eq("id",t);if(s)throw s;z(null),D("")}catch(s){alert("Failed to edit message")}},O=e=>r.find(t=>t.id===e),U=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),r=Math.floor(s/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()},G=async()=>{try{const{data:t,error:s}=await e.from("chat_clear_requests").select("*").eq("status","pending").order("created_at",{ascending:!1}).limit(1).single();if(s&&"PGRST116"!==s.code)throw s;q(t||null)}catch(t){}},H=()=>{const t=e.channel("clear_requests_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_clear_requests"},e=>{if("INSERT"===e.eventType||"UPDATE"===e.eventType){const t=e.new;"pending"===t.status?q(t):"approved"===t.status?(f([]),q(null),ne()):q(null)}else"DELETE"===e.eventType&&q(null)}).subscribe();return()=>{e.removeChannel(t)}};return l?t.jsxs("div",{className:"fixed inset-0 lg:inset-auto lg:fixed lg:right-4 lg:bottom-4 lg:w-[380px] lg:h-[580px] max-w-full max-h-full bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] backdrop-blur-2xl rounded-none lg:rounded-3xl shadow-2xl flex flex-col border-0 lg:border border-purple-500/30 z-[9999]",style:{zIndex:999999,position:"fixed"},children:[t.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-purple-600/30 to-purple-700/30 p-4 flex items-center justify-between border-b border-purple-500/30 rounded-t-2xl lg:rounded-t-3xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:L.charAt(0)}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-white font-bold text-sm md:text-base",children:L}),t.jsx("p",{className:"text-xs text-purple-300",children:"Online"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[!P&&t.jsx("button",{onClick:async()=>{if(confirm(`Request to clear all messages? ${L} must approve.`))try{const{data:t,error:r}=await e.from("chat_clear_requests").insert([{requested_by:s.id,requested_by_name:s.name,requested_by_role:s.role,status:"pending"}]).select().single();if(r)throw r;q(t),alert("Clear request sent. Waiting for approval...")}catch(t){alert("Failed to send clear request")}},className:"px-3 py-1 text-xs bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg transition-colors",title:"Request to clear all messages",children:"Clear Chat"}),t.jsx("button",{onClick:()=>n(!1),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-purple-500/20 rounded-full transition-colors",children:t.jsx(d,{size:20})})]})]}),P&&P.requested_by!==s.id&&t.jsx("div",{className:"flex-shrink-0 p-4 bg-yellow-500/20 border-b border-yellow-500/50",children:t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-semibold text-sm",children:"Clear Chat Request"}),t.jsxs("p",{className:"text-yellow-200 text-xs mt-1",children:[P.requested_by_name," wants to clear all messages"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:async()=>{if(P&&confirm("Approve clearing all messages? This cannot be undone."))try{const{error:t}=await e.from("chat_clear_requests").update({status:"approved"}).eq("id",P.id);if(t)throw t;const{error:s}=await e.from("chat_messages").delete().neq("id","00000000-0000-0000-0000-000000000000");if(s)throw s;f([]),q(null),alert("Chat cleared successfully!")}catch(t){alert("Failed to clear chat")}},className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded-lg transition-colors",children:"Approve"}),t.jsx("button",{onClick:async()=>{if(P)try{const{error:t}=await e.from("chat_clear_requests").update({status:"rejected"}).eq("id",P.id);if(t)throw t;q(null),alert("Clear request rejected")}catch(t){alert("Failed to reject request")}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded-lg transition-colors",children:"Reject"})]})]})}),P&&P.requested_by===s.id&&t.jsx("div",{className:"flex-shrink-0 p-3 bg-blue-500/20 border-b border-blue-500/50",children:t.jsxs("p",{className:"text-blue-200 text-xs text-center",children:["â³ Waiting for ",L," to approve clear request..."]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[b.map(r=>{const a=r.sender_id===s.id,l=r.video_id?O(r.video_id):null;return C===r.id?t.jsx("div",{className:"flex "+(a?"justify-end":"justify-start"),children:t.jsxs("div",{className:"max-w-[85%] bg-purple-500/20 rounded-xl p-3 border border-purple-500/30",children:[t.jsx("input",{type:"text",value:A,onChange:e=>D(e.target.value),className:"w-full bg-transparent text-white outline-none text-sm mb-2",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&B(r.id),"Escape"===e.key&&V()}}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>B(r.id),className:"px-3 py-1 bg-purple-600 rounded-lg text-white text-xs hover:bg-purple-700",children:t.jsx(c,{size:12})}),t.jsx("button",{onClick:V,className:"px-3 py-1 bg-gray-600 rounded-lg text-white text-xs hover:bg-gray-700",children:t.jsx(d,{size:12})})]})]})},r.id):t.jsx("div",{className:"flex "+(a?"justify-end":"justify-start"),children:t.jsxs("div",{className:`max-w-[85%] ${a?"bg-gradient-to-br from-purple-600 to-purple-700":"bg-purple-500/20"} rounded-xl p-3 border ${a?"border-purple-500/50":"border-purple-500/30"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-xs font-bold text-purple-100",children:r.sender_name}),r.edited&&t.jsx("span",{className:"text-xs text-purple-300",children:"(edited)"})]}),l&&t.jsxs("div",{className:"mb-2 p-2 bg-white/10 rounded-lg flex items-center gap-2",children:[t.jsx(p,{size:14,className:"text-purple-200"}),t.jsx("span",{className:"text-xs text-purple-200 truncate",children:l.title})]}),t.jsx("p",{className:"text-white text-sm whitespace-pre-wrap break-words",children:r.message}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("span",{className:"text-xs text-purple-200",children:U(r.timestamp)}),a&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{return z((e=r).id),void D(e.message);var e},className:"p-1 hover:bg-purple-500/30 rounded transition-colors",title:"Edit",children:t.jsx(x,{size:12,className:"text-purple-200"})}),t.jsx("button",{onClick:()=>(async t=>{if(confirm("Are you sure you want to delete this message?"))try{const{error:s}=await e.from("chat_messages").delete().eq("id",t);if(s)throw s}catch(s){alert("Failed to delete message")}})(r.id),className:"p-1 hover:bg-red-500/30 rounded transition-colors",title:"Delete",children:t.jsx(u,{size:12,className:"text-red-300"})})]})]})]})},r.id)}),t.jsx("div",{ref:I})]}),t.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-purple-500/30 bg-[#2d1b4e]/80 rounded-b-2xl lg:rounded-b-3xl",children:[w&&t.jsxs("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 max-h-32 overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-xs font-semibold text-purple-200",children:"Select Video"}),t.jsx("button",{onClick:()=>k(!1),className:"text-purple-300 hover:text-white",children:t.jsx(d,{size:14})})]}),t.jsx("div",{className:"space-y-1",children:0===r.length?t.jsx("p",{className:"text-xs text-purple-300",children:"No videos available"}):r.map(e=>t.jsx("button",{onClick:()=>{S(e.id),k(!1)},className:"w-full text-left p-2 rounded-lg text-xs transition-colors "+(_===e.id?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-200 hover:bg-purple-500/20"),children:e.title},e.id))})]}),v&&t.jsx("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 grid grid-cols-8 gap-1 max-h-32 overflow-y-auto",children:ie.map(e=>t.jsx("button",{onClick:()=>(e=>{var t;y(t=>t+e),N(!1),null==(t=M.current)||t.focus()})(e),className:"text-xl hover:bg-purple-500/20 rounded-lg p-1 transition-colors",children:e},e))}),_&&t.jsxs("div",{className:"mb-2 p-2 bg-purple-600/20 rounded-lg flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(p,{size:14,className:"text-purple-300"}),t.jsx("span",{className:"text-xs text-purple-200 truncate",children:(null==(a=O(_))?void 0:a.title)||"Video selected"})]}),t.jsx("button",{onClick:()=>S(""),className:"text-purple-300 hover:text-white",children:t.jsx(d,{size:14})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>k(!w),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Attach Video",children:t.jsx(m,{size:18,className:"text-purple-300"})}),t.jsx("button",{onClick:()=>N(!v),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Emoji",children:t.jsx(g,{size:18,className:"text-purple-300"})}),t.jsx("input",{ref:M,type:"text",value:j,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),F())},placeholder:"Type a message...",className:"flex-1 px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white placeholder-purple-400 text-sm focus:outline-none focus:border-purple-500"}),t.jsx("button",{onClick:F,disabled:!j.trim()&&!_,className:"p-2 bg-gradient-to-br from-purple-600 to-purple-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:t.jsx(h,{size:18,className:"text-white"})})]})]})]}):t.jsxs("button",{onClick:()=>n(!0),className:"fixed right-4 bottom-4 w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-700 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-purple-500/50 transition-all z-[9999] hover:scale-110",style:{zIndex:999999,position:"fixed"},children:[t.jsx(o,{size:24}),T>0&&t.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold",children:T})]})},de=({currentUser:s,onNotificationClick:r,externalUnreadCount:a=0})=>{const[l,n]=i.useState([]),[c,p]=i.useState(0),[x,u]=i.useState(!1);i.useEffect(()=>{a>0&&p(a)},[a]),i.useEffect(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]);const m=i.useCallback(e=>{n(t=>t.some(t=>t.id===e.id)?t:[e,...t].slice(0,50)),p(e=>e+1)},[]),g=i.useCallback((e,t,s)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t,icon:s||"/icons/ios/128.png",badge:"/icons/ios/128.png",tag:"esther-reign-admin",requireInteraction:!1})},[]),h=i.useCallback(()=>{try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e;"suspended"===t.state&&t.resume();const s=t.createOscillator(),r=t.createGain();s.connect(r),r.connect(t.destination),s.frequency.value=800,s.type="sine",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),s.start(t.currentTime),s.stop(t.currentTime+.2),s.onended=()=>{t.close()}}catch(e){try{const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGW57+OeTQ8MT6Xh8LZjHAY4kdfyzHksBSR3x/DdkEAKFF606euoVRQKRp/g8r5sIQUrgc7y2Yk2CBhlue/jnk0PDE+l4fC2YxwGOJHX8sx5LAUkd8fw3ZBAC");e.volume=.3,e.play().catch(()=>{})}catch(t){}}},[]);i.useEffect(()=>{if(!s)return;const t=e.channel("admin_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"admin_logins"},e=>{const t=e.new;if(t.user_id!==s.id){const e="artist"===t.user_role?"Esther Reign":"Editor",s={id:`login_${Date.now()}`,type:"login",title:`${e} logged in`,message:`${e} just logged into the admin panel`,timestamp:new Date,read:!1,userId:t.user_id};m(s),h(),g(`${e} logged in`,`${e} just logged into the admin panel`)}}).subscribe();return()=>{e.removeChannel(t)}},[s,h,g,m]),i.useEffect(()=>{if(!s)return;const t=e.channel("chat_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},e=>{const t=e.new;if(t.sender_id!==s.id){const e=t.sender_name||"Someone",s={id:`message_${t.id}`,type:"message",title:`New message from ${e}`,message:t.message.substring(0,50)+(t.message.length>50?"...":""),timestamp:new Date(t.timestamp),read:!1,userId:t.sender_id};m(s),h(),g(`New message from ${e}`,t.message.substring(0,100))}}).subscribe();return()=>{e.removeChannel(t)}},[s,h,g,m]);const j=e=>{const t=(new Date).getTime()-e.getTime(),s=Math.floor(t/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:e.toLocaleDateString()},y=e=>{switch(e){case"login":return t.jsx(f,{size:18,className:"text-blue-400"});case"message":return t.jsx(o,{size:18,className:"text-purple-400"});default:return t.jsx(b,{size:18,className:"text-green-400"})}};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>u(!x),className:"relative p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:[t.jsx(b,{size:20,className:"text-purple-300"}),c>0&&t.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold text-white",children:c>9?"9+":c})]}),x&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),t.jsxs("div",{className:"absolute right-0 top-12 w-80 md:w-96 bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-2xl border border-purple-500/30 z-50 max-h-[500px] flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/30",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Notifications"}),c>0&&t.jsx("button",{onClick:()=>{n(e=>e.map(e=>({...e,read:!0}))),p(0)},className:"text-xs text-purple-300 hover:text-purple-200",children:"Mark all as read"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:0===l.length?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(b,{size:48,className:"mx-auto mb-4 text-purple-400 opacity-50"}),t.jsx("p",{className:"text-purple-300",children:"No notifications"})]}):t.jsx("div",{className:"divide-y divide-purple-500/20",children:l.map(e=>t.jsx("div",{className:"p-4 hover:bg-purple-500/10 transition-colors cursor-pointer "+(e.read?"":"bg-purple-500/5"),onClick:()=>{var t;t=e.id,n(e=>e.map(e=>e.id===t?{...e,read:!0}:e)),p(e=>Math.max(0,e-1)),null==r||r(e),u(!1)},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:y(e.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h4",{className:"text-sm font-semibold text-white",children:e.title}),!e.read&&t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full flex-shrink-0 mt-1"})]}),t.jsx("p",{className:"text-xs text-purple-300 mt-1 line-clamp-2",children:e.message}),t.jsx("p",{className:"text-xs text-purple-400 mt-2",children:j(e.timestamp)})]}),t.jsx("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,n(e=>{const t=e.find(e=>e.id===s);return t&&!t.read&&p(e=>Math.max(0,e-1)),e.filter(e=>e.id!==s)})},className:"flex-shrink-0 p-1 hover:bg-purple-500/20 rounded transition-colors",children:t.jsx(d,{size:14,className:"text-purple-400"})})]})},e.id))})})]})]})]})},ce=({onVideoChange:e})=>{const[s,r]=i.useState([]),[a,l]=i.useState(null),[n,o]=i.useState(!1),[c,p]=i.useState(!0),[x,m]=i.useState(null),[g,h]=i.useState("link"),[b,f]=i.useState(!1),[S,C]=i.useState(0),[z,A]=i.useState(0),D=i.useRef(null);i.useEffect(()=>{T()},[]);const T=async()=>{p(!0);const e=await ee();r(e),p(!1)},E=async()=>{if(null!==x)try{await ae(s),null==e||e()}catch(t){await T()}m(null)};return c?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"p-6 bg-[#2d1b4e]/50 backdrop-blur-xl rounded-2xl border border-purple-500/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Video Management"}),t.jsxs("button",{onClick:()=>{const e={id:`temp_${Date.now()}`,title:"",video_link:"",thumbnail_url:"",status:"pending",template_type:"default",order_index:s.length,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};l(e),o(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[t.jsx(j,{size:20}),"Add Video"]})]}),t.jsxs("div",{className:"space-y-4",children:[s.map((a,i)=>t.jsx("div",{draggable:!0,onDragStart:()=>(e=>{m(e)})(i),onDragOver:e=>((e,t)=>{if(e.preventDefault(),null===x||x===t)return;const a=[...s],l=a[x];a.splice(x,1),a.splice(t,0,l);const i=a.map((e,t)=>({...e,order_index:t}));r(i),m(t)})(e,i),onDragEnd:E,className:"p-4 border border-purple-500/20 rounded-lg cursor-move transition-all bg-purple-500/10 hover:bg-purple-500/20 "+(x===i?"opacity-50":""),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(y,{size:20,className:"text-purple-300"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-white",children:a.title||"Untitled Video"}),t.jsxs("p",{className:"text-sm text-purple-300",children:["Status: ",a.status," â€¢ Order: ",a.order_index]}),a.video_link&&t.jsxs("a",{href:a.video_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-purple-400 hover:text-purple-300 transition-colors",children:[t.jsx(v,{size:14}),"View Video"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{const e=document.querySelector(".flex-1.overflow-y-auto");e&&A(e.scrollTop),l(a),o(!1)},className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:t.jsx(N,{size:16,className:"text-purple-300"})}),t.jsx("button",{onClick:()=>(async t=>{if(confirm("Are you sure you want to delete this video?"))try{await re(t)&&(r(s.filter(e=>e.id!==t)),null==e||e())}catch(a){alert("Failed to delete video. Please try again.")}})(a.id),className:"p-2 rounded hover:bg-red-500/20 transition-colors",children:t.jsx(u,{size:16,className:"text-red-400"})})]})]})},a.id)),0===s.length&&t.jsx("div",{className:"text-center py-8 text-purple-300",children:'No videos yet. Click "Add Video" to get started.'})]}),a&&t.jsx("div",{className:"modal-overlay fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] overflow-y-auto",children:t.jsx("div",{className:"flex justify-center",style:{paddingTop:`${z}px`,paddingBottom:"2rem"},children:t.jsx("div",{className:"w-full max-w-md bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:n?"Add New Video":"Edit Video"}),t.jsx("button",{onClick:()=>{l(null),o(!1)},className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:t.jsx(d,{size:20,className:"text-purple-300"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Title *"}),t.jsx("input",{type:"text",value:a.title,onChange:e=>l({...a,title:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"Enter video title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Upload Method"}),t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsxs("button",{type:"button",onClick:()=>h("link"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all "+("link"===g?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[t.jsx(w,{size:16}),"Link"]}),t.jsxs("button",{type:"button",onClick:()=>h("file"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all "+("file"===g?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[t.jsx(k,{size:16}),"Upload File (Max 200MB)"]})]})]}),"link"===g&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video Link"}),t.jsx("input",{type:"url",value:a.video_link||"",onChange:e=>l({...a,video_link:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://youtube.com/watch?v=... or https://cloudinary.com/..."})]}),"file"===g&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video File (Max 200MB)"}),t.jsx("input",{ref:D,type:"file",accept:"video/*",onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(s.size>209715200)alert(`File size exceeds 200MB limit. Your file is ${(s.size/1048576).toFixed(2)}MB`);else{f(!0),C(0);try{(new FormData).append("file",s);const e=setInterval(()=>{C(t=>t>=90?(clearInterval(e),90):t+10)},200),t=URL.createObjectURL(s);setTimeout(()=>{clearInterval(e),C(100),l({...a,video_link:t}),f(!1),alert("Note: This is a temporary URL. In production, upload to Cloudinary or Supabase Storage for permanent storage.")},2e3)}catch(r){alert("Failed to upload video. Please try again or use a link instead."),f(!1),C(0)}}},className:"hidden"}),t.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=D.current)?void 0:e.click()},disabled:b,className:"w-full px-4 py-3 border-2 border-dashed rounded-lg transition-all "+(b?"border-purple-400 bg-purple-500/10":"border-purple-500/30 bg-purple-500/10 hover:border-purple-500 hover:bg-purple-500/20"),children:b?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-300",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-300"}),t.jsxs("span",{children:["Uploading... ",S,"%"]})]}),t.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden bg-purple-500/20",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-700 transition-all duration-300",style:{width:`${S}%`}})})]}):t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(k,{size:24,className:"text-purple-300"}),t.jsx("span",{className:"text-purple-200",children:"Click to select video file"}),t.jsx("span",{className:"text-xs text-purple-400",children:"Max size: 200MB"})]})}),a.video_link&&"file"===g&&t.jsxs("p",{className:"mt-2 text-xs text-purple-400",children:["Video URL: ",a.video_link.substring(0,50),"..."]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Thumbnail URL"}),t.jsx("input",{type:"url",value:a.thumbnail_url||"",onChange:e=>l({...a,thumbnail_url:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://img.youtube.com/vi/..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),t.jsxs("select",{value:a.status,onChange:e=>l({...a,status:e.target.value}),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white",children:[t.jsx("option",{value:"pending",className:"bg-[#2d1b4e]",children:"Pending"}),t.jsx("option",{value:"completed",className:"bg-[#2d1b4e]",children:"Completed"})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>{l(null),o(!1)},className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg transition-colors text-purple-200 hover:bg-purple-500/20",children:"Cancel"}),t.jsxs("button",{onClick:async()=>{if(a)try{if(n){const{id:e,created_at:t,updated_at:l,...i}=a,n=await te(i);n&&r([...s,n])}else{await se(a.id,a)&&r(s.map(e=>e.id===a.id?a:e))}l(null),o(!1),null==e||e(),await T()}catch(t){alert("Failed to save video. Please try again.")}},disabled:!a.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(_,{size:16}),n?"Add Video":"Save Changes"]})]})]})})})})]})},pe=({videoUpdates:e,loginFrequency:s,siteVisits:r})=>{const[a,l]=i.useState(!1);i.useEffect(()=>{setTimeout(()=>l(!0),100)},[]);const n=Math.max(...e.map(e=>e.value),...s.map(e=>e.value),...r.map(e=>e.value),1),o=(e,s,r,l)=>{if(0===e.length)return t.jsx("div",{className:"flex items-center justify-center h-48 text-purple-300",children:t.jsx("p",{children:"No data available"})});const i=e.map((t,s)=>({x:s/(e.length-1||1)*100,y:100-t.value/n*80})),o=i.map((e,t)=>`${0===t?"M":"L"} ${e.x},${e.y}`).join(" "),d=`${o} L ${i[i.length-1].x},100 L 0,100 Z`;return t.jsxs("div",{className:"relative h-48",children:[t.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:r,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:s,stopOpacity:"0.4"}),t.jsx("stop",{offset:"100%",stopColor:s,stopOpacity:"0.05"})]})}),t.jsx("path",{d:d,fill:`url(#${r})`,className:a?"animate-fade-in":"opacity-0",style:{animation:a?"drawPath 1.5s ease-out forwards":"none",strokeDasharray:a?"0":"1000",strokeDashoffset:a?"0":"1000"}}),t.jsx("path",{d:o,fill:"none",stroke:s,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",className:a?"animate-fade-in":"opacity-0",style:{animation:a?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:a?"1000":"0",strokeDashoffset:a?"0":"1000"}}),i.map((e,r)=>t.jsxs("g",{children:[t.jsx("circle",{cx:e.x,cy:e.y,r:"1.5",fill:s,className:a?"animate-scale-in":"opacity-0",style:{animation:a?`fadeInScale 0.3s ease-out ${.5+.1*r}s forwards`:"none"}}),t.jsx("circle",{cx:e.x,cy:e.y,r:"3",fill:s,fillOpacity:"0.2",className:a?"animate-pulse":"opacity-0",style:{animation:a?`fadeInScale 0.3s ease-out ${.5+.1*r}s forwards, pulse 2s ease-in-out infinite ${1+.1*r}s`:"none"}})]},r))]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-purple-300 px-2",children:e.map((e,s)=>{const r=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});return t.jsx("span",{className:"transform -rotate-45 origin-left",style:{opacity:a?1:0,transition:`opacity 0.3s ${.8+.1*s}s`},children:r},s)})})]})};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        @keyframes pulse {\n          0%, 100% {\n            opacity: 0.2;\n            transform: scale(1);\n          }\n          50% {\n            opacity: 0.4;\n            transform: scale(1.2);\n          }\n        }\n      "}),t.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:t.jsx(p,{size:20,className:"text-purple-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-white",children:"Video Updates"}),t.jsx("p",{className:"text-xs text-purple-300",children:"Last 7 days"})]})]}),t.jsx("div",{className:"mb-2",children:t.jsx("p",{className:"text-2xl font-black text-white",children:e.reduce((e,t)=>e+t.value,0)})}),o(e,"#9333ea","gradient-purple")]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/20",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:t.jsx(S,{size:20,className:"text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-white",children:"Login Frequency"}),t.jsx("p",{className:"text-xs text-blue-300",children:"Last 7 days"})]})]}),t.jsx("div",{className:"mb-2",children:t.jsx("p",{className:"text-2xl font-black text-white",children:s.reduce((e,t)=>e+t.value,0)})}),o(s,"#3b82f6","gradient-blue")]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-2xl p-6 border border-green-500/20 md:col-span-2 lg:col-span-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center",children:t.jsx(C,{size:20,className:"text-green-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-white",children:"Site Visits"}),t.jsx("p",{className:"text-xs text-green-300",children:"Last 7 days"})]})]}),t.jsx("div",{className:"mb-2",children:t.jsx("p",{className:"text-2xl font-black text-white",children:r.reduce((e,t)=>e+t.value,0)})}),o(r,"#10b981","gradient-green")]})]})]})},xe=()=>{const[e,a]=i.useState({hero_image:"/Estherreign.jpg",about_image:"/IMG-20250915-WA0023.jpg",about_text:"I am an emerging gospel artist with a deep passion for worship and praise...",phone:"+234 818 019 4269",email:"contact@estherreign.com",location:"Lagos, Nigeria",social_links:{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),[l,n]=i.useState(""),[o,d]=i.useState(""),[c,p]=i.useState(!1),[x,u]=i.useState({hero:!1,about:!1});i.useEffect(()=>{const e=localStorage.getItem("admin_profile_picture");e&&d(e)},[]);i.useEffect(()=>{m()},[]);const m=async()=>{const{getSettings:e}=await s(async()=>{const{getSettings:e}=await import("./supabaseData-PmD0rX_k.js");return{getSettings:e}},__vite__mapDeps([0,1,2,3,4])),t=await e();t&&(a({hero_image:t.hero_image||"/Estherreign.jpg",about_image:t.about_image||"/IMG-20250915-WA0023.jpg",about_text:t.about_text||"I am an emerging gospel artist with a deep passion for worship and praise...",phone:t.contact_phone||"+234 818 019 4269",email:t.contact_email||"contact@estherreign.com",location:"Lagos, Nigeria",social_links:t.social_links||{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),n(t.hero_description||"Lifting voices in worship through powerful gospel music. Experience the presence of God through every note."))},g=async(t,s)=>{var l;const i=null==(l=s.target.files)?void 0:l[0];if(i)if(i.size>5242880)alert("Image size should be less than 5MB");else try{u(e=>({...e,[t]:!0}));const s=await r(i,t);if(!s)return void alert("Upload failed. Please try again.");a("hero"===t?{...e,hero_image:s}:{...e,about_image:s}),alert('Image uploaded! Remember to hit "Save All Settings".')}catch(n){alert("Upload failed. Please try again.")}finally{u(e=>({...e,[t]:!1}))}};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black mb-2 text-white",children:"Site Settings"}),t.jsx("p",{className:"text-gray-400",children:"Manage your website content and appearance"})]}),t.jsxs("div",{className:"grid gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-blue-500/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[t.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Profile Picture"}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("div",{className:"relative",children:o||localStorage.getItem("admin_profile_picture")?t.jsx("img",{src:o||localStorage.getItem("admin_profile_picture")||"",alt:"Profile",className:"w-24 h-24 rounded-xl object-cover shadow-lg"}):t.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx("span",{className:"text-white font-black text-4xl",children:"E"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Upload Profile Picture"}),t.jsx("input",{type:"file",accept:"image/*",disabled:c,onChange:async e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s)if(s.size>5242880)alert("Image size should be less than 5MB");else try{p(!0);const e=await r(s,"profile");if(!e)return void alert("Upload failed. Please try again.");d(e),localStorage.setItem("admin_profile_picture",e);const t=localStorage.getItem("admin_session");if(t){const s=JSON.parse(t);s.user.profilePicture=e,localStorage.setItem("admin_session",JSON.stringify(s))}alert("Profile picture updated! Refresh the page to see changes.")}catch(a){alert("Upload failed. Please try again.")}finally{p(!1)}},className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/20 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-gradient-to-r file:from-purple-600 file:to-blue-600 file:text-white hover:file:shadow-lg file:cursor-pointer "+(c?"opacity-60 cursor-not-allowed":"")}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:c?"Uploading image...":"Max size: 5MB. Recommended: Square image (500x500px)"})]})]})]}),t.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[t.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Images"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Image"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"file",accept:"image/*",disabled:x.hero,onChange:e=>g("hero",e),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer "+(x.hero?"opacity-60 cursor-not-allowed":"")}),t.jsx("input",{type:"url",value:e.hero_image.startsWith("data:")?"":e.hero_image,onChange:t=>a({...e,hero_image:t.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),e.hero_image&&t.jsx("img",{src:e.hero_image,alt:"Hero",className:"mt-2 w-full h-32 object-cover rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Image"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"file",accept:"image/*",disabled:x.about,onChange:e=>g("about",e),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer "+(x.about?"opacity-60 cursor-not-allowed":"")}),t.jsx("input",{type:"url",value:e.about_image.startsWith("data:")?"":e.about_image,onChange:t=>a({...e,about_image:t.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),e.about_image&&t.jsx("img",{src:e.about_image,alt:"About",className:"mt-2 w-full h-32 object-cover rounded-lg"})]})]})]}),t.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[t.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Hero Section"}),t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Description"}),t.jsx("textarea",{value:l,onChange:e=>n(e.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Brief description for hero section..."})]}),t.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[t.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"About Section"}),t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Text"}),t.jsx("textarea",{value:e.about_text,onChange:t=>a({...e,about_text:t.target.value}),rows:6,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Tell your story..."})]}),t.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[t.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Contact Information"}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Phone"}),t.jsx("input",{type:"tel",value:e.phone,onChange:t=>a({...e,phone:t.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"+234..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Email"}),t.jsx("input",{type:"email",value:e.email,onChange:t=>a({...e,email:t.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"contact@..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Location"}),t.jsx("input",{type:"text",value:e.location,onChange:t=>a({...e,location:t.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"City, Country"})]})]})]}),t.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[t.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Social Media Links"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Instagram"}),t.jsx("input",{type:"url",value:e.social_links.instagram,onChange:t=>a({...e,social_links:{...e.social_links,instagram:t.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://instagram.com/..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"YouTube"}),t.jsx("input",{type:"url",value:e.social_links.youtube,onChange:t=>a({...e,social_links:{...e.social_links,youtube:t.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://youtube.com/..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"TikTok"}),t.jsx("input",{type:"url",value:e.social_links.tiktok,onChange:t=>a({...e,social_links:{...e.social_links,tiktok:t.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://tiktok.com/..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Facebook"}),t.jsx("input",{type:"url",value:e.social_links.facebook,onChange:t=>a({...e,social_links:{...e.social_links,facebook:t.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://facebook.com/..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Twitter"}),t.jsx("input",{type:"url",value:e.social_links.twitter,onChange:t=>a({...e,social_links:{...e.social_links,twitter:t.target.value}}),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://twitter.com/..."})]})]})]}),t.jsxs("button",{onClick:async()=>{try{const{updateSettings:t}=await s(async()=>{const{updateSettings:e}=await import("./supabaseData-PmD0rX_k.js");return{updateSettings:e}},__vite__mapDeps([0,1,2,3,4]));await t({hero_image:e.hero_image,hero_description:l,about_image:e.about_image,about_text:e.about_text,contact_email:e.email,contact_phone:e.phone,social_links:e.social_links})?(alert("Settings saved successfully! Changes will appear immediately."),window.dispatchEvent(new Event("storage"))):alert("Failed to save settings. Please try again.")}catch(t){alert("Error saving settings. Please check console for details.")}},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 flex items-center justify-center gap-2",children:[t.jsx(_,{size:20}),"Save All Settings"]})]})]})};(()=>{const e=localStorage.getItem("current_sync_code")||Math.random().toString(36).substring(2,8).toUpperCase();localStorage.getItem("current_sync_code")||localStorage.setItem("current_sync_code",e),window.location.origin,window.location.pathname})();const ue=()=>{const[s,r]=i.useState([]),[a,l]=i.useState(!0),[o,c]=i.useState(null),[p,x]=i.useState(""),[m,g]=i.useState("all"),[b,f]=i.useState(0);i.useEffect(()=>{j()},[]);const j=async()=>{l(!0);try{const{data:t,error:s}=await e.from("fan_messages").select("*").order("created_at",{ascending:!1});if(s)throw s;r(t||[])}catch(t){}l(!1)},y=s.filter(e=>"all"===m||("unread"===m?"unread"===e.status:e.message_type===m)),v=s.filter(e=>"unread"===e.status).length;return a?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-white",children:"Fan Messages"}),t.jsxs("p",{className:"text-sm text-purple-300",children:[v," unread messages"]})]}),t.jsx("div",{className:"flex gap-2",children:["all","unread","prayer_request","testimony"].map(e=>t.jsx("button",{onClick:()=>g(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(m===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:e.replace("_"," ")},e))})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[y.map(a=>{const l=(i=a.message_type,{prayer_request:A,testimony:D,song_request:T,booking_inquiry:E,general:z}[i]||z);var i;const n=(e=>({prayer_request:"pink",testimony:"green",song_request:"purple",booking_inquiry:"blue",general:"gray"}[e]||"gray"))(a.message_type);return t.jsx("div",{className:"p-6 rounded-xl border transition-all cursor-pointer "+("unread"===a.status?"bg-purple-900/30 border-purple-500/50":"bg-purple-500/10 border-purple-500/20"),onClick:()=>{const t=document.querySelector(".flex-1.overflow-y-auto");t&&f(t.scrollTop),c(a),"unread"===a.status&&(async t=>{try{const{error:a}=await e.from("fan_messages").update({status:"read"}).eq("id",t);if(a)throw a;r(s.map(e=>e.id===t?{...e,status:"read"}:e))}catch(a){}})(a.id)},children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`p-3 rounded-lg bg-${n}-100`,children:t.jsx(l,{size:24,className:`text-${n}-600`})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${n}-100 text-${n}-700`,children:a.message_type.replace("_"," ")}),"unread"===a.status&&t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"New"}),a.is_prayed_for&&t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:"ðŸ™ Prayed"}),a.is_featured&&t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-700",children:"â­ Featured"})]}),t.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:a.subject||"No Subject"}),t.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["From: ",a.is_anonymous?"Anonymous":a.from_name]}),t.jsx("p",{className:"text-sm line-clamp-2 text-purple-200",children:a.message}),t.jsx("p",{className:"text-xs mt-2 text-purple-400",children:new Date(a.created_at).toLocaleString()})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:["prayer_request"===a.message_type&&!a.is_prayed_for&&t.jsx("button",{onClick:t=>{t.stopPropagation(),(async t=>{try{const{error:a}=await e.from("fan_messages").update({is_prayed_for:!0}).eq("id",t);if(a)throw a;r(s.map(e=>e.id===t?{...e,is_prayed_for:!0}:e))}catch(a){}})(a.id)},className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Prayed"}),t.jsx("button",{onClick:t=>{t.stopPropagation(),(async t=>{if(confirm("Are you sure you want to delete this message? This action cannot be undone."))try{const{error:a}=await e.from("fan_messages").delete().eq("id",t);if(a)throw a;r(s.filter(e=>e.id!==t)),(null==o?void 0:o.id)===t&&c(null),alert("Message deleted successfully")}catch(a){alert("Failed to delete message")}})(a.id)},className:"p-2 rounded hover:bg-red-500/20 transition-colors",title:"Delete message",children:t.jsx(u,{size:18,className:"text-red-400 hover:text-red-300"})})]})]})},a.id)}),0===y.length&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(z,{size:48,className:"mx-auto mb-4 text-purple-400"}),t.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No messages yet"})]})]})]}),o&&n.createPortal(t.jsx("div",{className:"message-modal-overlay fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] overflow-y-auto",children:t.jsx("div",{className:"flex justify-center",style:{paddingTop:`${b}px`,paddingBottom:"2rem"},children:t.jsx("div",{className:"w-full max-w-2xl bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:o.subject||"Message Details"}),t.jsx("button",{onClick:()=>c(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:t.jsx(d,{size:20,className:"text-purple-300"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"From"}),t.jsxs("p",{className:"text-white",children:[o.is_anonymous?"Anonymous":o.from_name,o.from_email&&` (${o.from_email})`]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Message"}),t.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:o.message})]}),o.response&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Your Response"}),t.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:o.response})]}),"responded"!==o.status&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Send Response"}),t.jsx("textarea",{value:p,onChange:e=>x(e.target.value),rows:4,className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg resize-none text-white placeholder-purple-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type your response..."}),t.jsxs("button",{onClick:async()=>{if(o&&p.trim())try{const{error:t}=await e.from("fan_messages").update({status:"responded",response:p,responded_at:(new Date).toISOString()}).eq("id",o.id);if(t)throw t;r(s.map(e=>e.id===o.id?{...e,status:"responded",response:p,responded_at:(new Date).toISOString()}:e)),c(null),x(""),alert("Response sent!")}catch(t){alert("Failed to send response")}},disabled:!p.trim(),className:"mt-2 flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50",children:[t.jsx(h,{size:16}),"Send Response"]})]})]}),t.jsx("div",{className:"flex gap-3 mt-6",children:t.jsx("button",{onClick:()=>c(null),className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg text-purple-200 hover:bg-purple-500/20 transition-colors",children:"Close"})})]})})})}),document.body)]})},me=()=>{const[s,r]=i.useState([]),[a,l]=i.useState(!0),[n,o]=i.useState(null),[c,p]=i.useState("all"),[x,m]=i.useState("votes");i.useEffect(()=>{g()},[]);const g=async()=>{l(!0);try{const{data:t,error:s}=await e.from("song_requests").select("*").order("votes",{ascending:!1});if(s)throw s;r(t||[])}catch(t){}l(!1)},h=async(t,a)=>{try{const{error:l}=await e.from("song_requests").update({status:a,updated_at:(new Date).toISOString()}).eq("id",t);if(l)throw l;r(s.map(e=>e.id===t?{...e,status:a}:e))}catch(l){}},b=e=>({new:"blue",considering:"yellow",planned:"purple",recording:"orange",completed:"green",declined:"red"}[e]||"gray"),f=[...s.filter(e=>"all"===c||e.status===c)].sort((e,t)=>"votes"===x?t.votes-e.votes:"priority"===x?t.priority_score-e.priority_score:new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return a?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-white",children:"Song Requests"}),t.jsx("p",{className:"text-sm text-purple-300",children:"Manage fan song requests"})]}),t.jsx("div",{className:"flex gap-2",children:["all","new","considering","planned"].map(e=>t.jsx("button",{onClick:()=>p(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(c===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:e},e))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:"text-sm text-purple-300",children:"Sort by:"}),["votes","recent","priority"].map(e=>t.jsx("button",{onClick:()=>m(e),className:"px-3 py-1 rounded text-sm font-medium capitalize "+(x===e?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 border border-purple-500/30"),children:e},e))]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.map(a=>{return t.jsxs("div",{className:"p-6 rounded-xl border transition-all bg-black/40 backdrop-blur-xl border-purple-500/30 hover:border-purple-500/50",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(T,{size:20,className:"text-purple-500"}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${b(a.status)}-100 text-${b(a.status)}-700`,children:a.status}),a.difficulty&&t.jsx("span",{className:"text-xs font-medium "+(l=a.difficulty,"easy"===l?"text-green-500":"medium"===l?"text-yellow-500":"hard"===l?"text-red-500":"text-gray-500"),children:a.difficulty})]}),t.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:a.song_title}),a.original_artist&&t.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["by ",a.original_artist]}),a.reason&&t.jsxs("p",{className:"text-sm mb-3 text-purple-200",children:['"',a.reason,'"']}),a.requested_by_name&&t.jsxs("p",{className:"text-xs mb-2 text-purple-400",children:["Requested by ",a.requested_by_name]}),a.genre_tags&&a.genre_tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:a.genre_tags.map((e,s)=>t.jsx("span",{className:"px-2 py-1 rounded text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",children:e},s))}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:()=>(async t=>{try{const a=s.find(e=>e.id===t);if(!a)return;const{error:l}=await e.from("song_requests").update({votes:a.votes+1,priority_score:a.priority_score+1,updated_at:(new Date).toISOString()}).eq("id",t);if(l)throw l;r(s.map(e=>e.id===t?{...e,votes:e.votes+1,priority_score:e.priority_score+1}:e))}catch(a){}})(a.id),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700",children:[t.jsx(P,{size:16}),t.jsx("span",{className:"font-bold",children:a.votes}),t.jsx("span",{children:"votes"})]}),a.priority_score>0&&t.jsxs("div",{className:"flex items-center gap-1 text-sm text-yellow-600",children:[t.jsx(q,{size:16}),t.jsx("span",{children:a.priority_score})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("button",{onClick:()=>o(a),className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:t.jsx(N,{size:16,className:"text-purple-300"})}),t.jsx("button",{onClick:()=>(async t=>{if(confirm("Delete this song request?"))try{const{error:a}=await e.from("song_requests").delete().eq("id",t);if(a)throw a;r(s.filter(e=>e.id!==t))}catch(a){}})(a.id),className:"p-2 rounded hover:bg-red-100",children:t.jsx(u,{size:16,className:"text-red-600"})})]})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:["new"===a.status&&t.jsx("button",{onClick:()=>h(a.id,"considering"),className:"flex-1 px-3 py-1 text-xs bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Consider"}),"considering"===a.status&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>h(a.id,"planned"),className:"flex-1 px-3 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"Plan"}),t.jsx("button",{onClick:()=>h(a.id,"declined"),className:"flex-1 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Decline"})]}),"planned"===a.status&&t.jsx("button",{onClick:()=>h(a.id,"recording"),className:"flex-1 px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Start Recording"}),"recording"===a.status&&t.jsx("button",{onClick:()=>h(a.id,"completed"),className:"flex-1 px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Complete"})]})]},a.id);var l}),0===f.length&&t.jsxs("div",{className:"col-span-2 text-center py-12",children:[t.jsx(T,{size:48,className:"mx-auto mb-4 text-purple-500/50"}),t.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No song requests yet"})]})]}),n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"w-full max-w-lg bg-black/95 backdrop-blur-xl rounded-lg shadow-xl max-h-[90vh] overflow-y-auto border border-purple-500/30",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:"Edit Song Request"}),t.jsx("button",{onClick:()=>o(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:t.jsx(d,{size:20,className:"text-purple-300"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),t.jsxs("select",{value:n.status,onChange:e=>o({...n,status:e.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",children:[t.jsx("option",{value:"new",children:"New"}),t.jsx("option",{value:"considering",children:"Considering"}),t.jsx("option",{value:"planned",children:"Planned"}),t.jsx("option",{value:"recording",children:"Recording"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"declined",children:"Declined"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 "+(theme,"text-gray-300"),children:"Difficulty"}),t.jsxs("select",{value:n.difficulty||"",onChange:e=>o({...n,difficulty:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===theme?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[t.jsx("option",{value:"",children:"Not set"}),t.jsx("option",{value:"easy",children:"Easy"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"hard",children:"Hard"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Priority Score"}),t.jsx("input",{type:"number",value:n.priority_score,onChange:e=>o({...n,priority_score:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Estimated Production Days"}),t.jsx("input",{type:"number",value:n.estimated_production_days||"",onChange:e=>o({...n,estimated_production_days:Number(e.target.value)||void 0}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., 7"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"YouTube Reference"}),t.jsx("input",{type:"url",value:n.youtube_reference_url||"",onChange:e=>o({...n,youtube_reference_url:e.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"https://youtube.com/..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Notes"}),t.jsx("textarea",{value:n.notes||"",onChange:e=>o({...n,notes:e.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"Add notes about this request..."})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>o(null),className:"flex-1 px-4 py-2 border rounded-lg border-purple-500/30 text-purple-300 hover:bg-purple-500/20 transition-colors",children:"Cancel"}),t.jsxs("button",{onClick:async()=>{if(n)try{const{error:t}=await e.from("song_requests").update(n).eq("id",n.id);if(t)throw t;r(s.map(e=>e.id===n.id?n:e)),o(null)}catch(t){alert("Failed to save request")}},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700",children:[t.jsx(_,{size:16}),"Save Changes"]})]})]})})})]})},ge=()=>{const{theme:s}=a(),[r,l]=i.useState([]),[n,o]=i.useState(!0),[c,p]=i.useState(null),[x,m]=i.useState(!1),[g,h]=i.useState("all");i.useState("list"),i.useEffect(()=>{b()},[]);const b=async()=>{o(!0);try{const{data:t,error:s}=await e.from("content_calendar").select("*").order("target_publish_date",{ascending:!0});if(s)throw s;l(t||[])}catch(t){}o(!1)},f=e=>({idea:"gray",planning:"blue",recording:"purple",editing:"yellow",review:"orange",scheduled:"green",published:"emerald",cancelled:"red"}[e]||"gray"),y=r.filter(e=>"all"===g||("upcoming"===g?e.target_publish_date&&new Date(e.target_publish_date)>new Date:"in-progress"!==g||["planning","recording","editing","review"].includes(e.status)));return n?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-white",children:"Content Calendar"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Plan and schedule your content"})]}),t.jsxs("div",{className:"flex gap-2",children:[["all","upcoming","in-progress"].map(e=>t.jsx("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(g===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===s?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:e.replace("-"," ")},e)),t.jsxs("button",{onClick:()=>{const e={id:"",title:"",content_type:"cover",platforms:[],status:"idea",priority:"medium",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};p(e),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[t.jsx(j,{size:20}),"Add Content"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[y.map(a=>{const i=a.target_publish_date?Math.ceil((new Date(a.target_publish_date).getTime()-(new Date).getTime())/864e5):null;return t.jsx("div",{className:"p-6 rounded-xl border transition-all "+("dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-xl",children:(n=a.priority,"urgent"===n?"ðŸ”´":"high"===n?"ðŸŸ ":"medium"===n?"ðŸŸ¡":"ðŸŸ¢")}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${f(a.status)}-100 text-${f(a.status)}-700`,children:a.status}),t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize "+("dark"===s?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:a.content_type.replace("_"," ")})]}),t.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:a.title}),a.scripture_reference&&t.jsxs("p",{className:"text-sm mb-2 "+("dark"===s?"text-purple-400":"text-purple-600"),children:["ðŸ“– ",a.scripture_reference]}),a.notes&&t.jsx("p",{className:"text-sm mb-3 text-gray-400",children:a.notes}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.platforms.map(e=>t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("dark"===s?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:e},e))}),a.target_publish_date&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(I,{size:16,className:"text-gray-400"}),t.jsxs("span",{className:"text-gray-400",children:[new Date(a.target_publish_date).toLocaleDateString(),null!==i&&t.jsxs("span",{className:i<0?"text-red-500":i<7?"text-orange-500":"",children:[" ","(",i>0?`in ${i} days`:0===i?"today":`${Math.abs(i)} days overdue`,")"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{p(a),m(!1)},className:"p-2 rounded "+("dark"===s?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:t.jsx(N,{size:16,className:"text-gray-400"})}),t.jsx("button",{onClick:()=>(async t=>{if(confirm("Delete this content item?"))try{const{error:s}=await e.from("content_calendar").delete().eq("id",t);if(s)throw s;l(r.filter(e=>e.id!==t))}catch(s){}})(a.id),className:"p-2 rounded hover:bg-red-100",children:t.jsx(u,{size:16,className:"text-red-600"})})]})]})},a.id);var n}),0===y.length&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(E,{size:48,className:"mx-auto mb-4 text-gray-400"}),t.jsx("p",{className:"text-lg font-medium text-gray-400",children:"No content planned yet"}),t.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Content" to start planning'})]})]}),c&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:`w-full max-w-2xl ${"dark"===s?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl max-h-[90vh] overflow-y-auto`,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:x?"Add Content":"Edit Content"}),t.jsx("button",{onClick:()=>{p(null),m(!1)},className:"p-1 rounded "+("dark"===s?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:t.jsx(d,{size:20})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Title *"}),t.jsx("input",{type:"text",value:c.title,onChange:e=>p({...c,title:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Amazing Grace Cover"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Content Type"}),t.jsxs("select",{value:c.content_type,onChange:e=>p({...c,content_type:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[t.jsx("option",{value:"cover",children:"Cover"}),t.jsx("option",{value:"original",children:"Original"}),t.jsx("option",{value:"worship_moment",children:"Worship Moment"}),t.jsx("option",{value:"testimony",children:"Testimony"}),t.jsx("option",{value:"bts",children:"Behind the Scenes"}),t.jsx("option",{value:"live",children:"Live Performance"}),t.jsx("option",{value:"collaboration",children:"Collaboration"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Status"}),t.jsxs("select",{value:c.status,onChange:e=>p({...c,status:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[t.jsx("option",{value:"idea",children:"Idea"}),t.jsx("option",{value:"planning",children:"Planning"}),t.jsx("option",{value:"recording",children:"Recording"}),t.jsx("option",{value:"editing",children:"Editing"}),t.jsx("option",{value:"review",children:"Review"}),t.jsx("option",{value:"scheduled",children:"Scheduled"}),t.jsx("option",{value:"published",children:"Published"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),t.jsxs("select",{value:c.priority,onChange:e=>p({...c,priority:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"urgent",children:"Urgent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),t.jsx("input",{type:"date",value:c.target_publish_date||"",onChange:e=>p({...c,target_publish_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Scripture Reference"}),t.jsx("input",{type:"text",value:c.scripture_reference||"",onChange:e=>p({...c,scripture_reference:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Psalm 23:1-6"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Platforms"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["YouTube","Instagram","TikTok","Facebook"].map(e=>t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c.platforms.includes(e),onChange:t=>{t.target.checked?p({...c,platforms:[...c.platforms,e]}):p({...c,platforms:c.platforms.filter(t=>t!==e)})},className:"rounded"}),t.jsx("span",{className:"text-sm text-gray-300",children:e})]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),t.jsx("textarea",{value:c.notes||"",onChange:e=>p({...c,notes:e.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or ideas..."})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>{p(null),m(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),t.jsxs("button",{onClick:async()=>{if(c&&c.title.trim())try{if(x){const{id:t,created_at:s,updated_at:a,...i}=c,{data:n,error:o}=await e.from("content_calendar").insert([i]).select().single();if(o)throw o;n&&l([...r,n])}else{const{error:t}=await e.from("content_calendar").update(c).eq("id",c.id);if(t)throw t;l(r.map(e=>e.id===c.id?c:e))}p(null),m(!1)}catch(t){alert("Failed to save item")}},disabled:!c.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(_,{size:16}),x?"Add Content":"Save Changes"]})]})]})})})]})},he=async(t,s)=>{try{const{error:r}=await e.from("goals").update(s).eq("id",t);if(r)throw r;return!0}catch(r){return!1}},be=async(t,s)=>{try{let s=e.from("revenue_expenses").select("*").order("transaction_date",{ascending:!1});t&&(s=s.gte("transaction_date",t));const{data:r,error:a}=await s;if(a)throw a;return r||[]}catch(r){return[]}},fe=()=>{const{theme:s}=a(),[r,l]=i.useState([]),[n,o]=i.useState(!0),[c,p]=i.useState(null),[x,m]=i.useState(!1),[g,h]=i.useState("all"),[b,f]=i.useState("30d"),[j,y]=i.useState({totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}});i.useEffect(()=>{v()},[b]);const v=async()=>{o(!0);try{const e="30d"===b?30:"90d"===b?90:365,t=new Date;t.setDate(t.getDate()-e);const s=await be(t.toISOString().split("T")[0]);l(s);const r=await(async e=>{try{const t=await be(e),s=t.filter(e=>"revenue"===e.type),r=t.filter(e=>"expense"===e.type),a=s.reduce((e,t)=>e+t.amount,0),l=r.reduce((e,t)=>e+t.amount,0),i={};s.forEach(e=>{i[e.category]=(i[e.category]||0)+e.amount});const n={};return r.forEach(e=>{n[e.category]=(n[e.category]||0)+e.amount}),{totalRevenue:a,totalExpenses:l,netProfit:a-l,revenueByCategory:i,expensesByCategory:n}}catch(t){return{totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}}}})(t.toISOString().split("T")[0]);y(r)}catch(e){}o(!1)},N=e=>{const t={id:"",transaction_date:(new Date).toISOString().split("T")[0],type:e,category:"",amount:0,currency:"NGN",is_recurring:!1,created_at:(new Date).toISOString()};p(t),m(!0)},w=async t=>{if(!confirm("Delete this transaction?"))return;const s=await(async t=>{try{const{error:s}=await e.from("revenue_expenses").delete().eq("id",t);if(s)throw s;return!0}catch(s){return!1}})(t);s&&(l(r.filter(e=>e.id!==t)),await v())},k=r.filter(e=>"all"===g||e.type===g);return n?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-white",children:"Financial Dashboard"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Track revenue and expenses"})]}),t.jsx("div",{className:"flex gap-2",children:["30d","90d","year"].map(e=>t.jsx("button",{onClick:()=>f(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(b===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===s?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:"30d"===e?"30 Days":"90d"===e?"90 Days":"Year"},e))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Revenue"}),t.jsx(M,{size:20,className:"text-green-500"})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["â‚¦",j.totalRevenue.toLocaleString()]})]}),t.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Expenses"}),t.jsx(L,{size:20,className:"text-red-500"})]}),t.jsxs("p",{className:"text-3xl font-bold text-red-500",children:["â‚¦",j.totalExpenses.toLocaleString()]})]}),t.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Net Profit"}),t.jsx(R,{size:20,className:j.netProfit>=0?"text-green-500":"text-red-500"})]}),t.jsxs("p",{className:"text-3xl font-bold "+(j.netProfit>=0?"text-green-500":"text-red-500"),children:["â‚¦",j.netProfit.toLocaleString()]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Revenue by Category"}),t.jsxs("div",{className:"space-y-3",children:[Object.entries(j.revenueByCategory).map(([e,r])=>{const a=j.totalRevenue>0?r/j.totalRevenue*100:0;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:e}),t.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["â‚¦",r.toLocaleString()," (",a.toFixed(1),"%)"]})]}),t.jsx("div",{className:"h-2 rounded-full overflow-hidden "+("dark"===s?"bg-gray-700":"bg-gray-200"),children:t.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600",style:{width:`${a}%`}})})]},e)}),0===Object.keys(j.revenueByCategory).length&&t.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No revenue recorded yet"})]})]}),t.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Expenses by Category"}),t.jsxs("div",{className:"space-y-3",children:[Object.entries(j.expensesByCategory).map(([e,r])=>{const a=j.totalExpenses>0?r/j.totalExpenses*100:0;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:"text-sm text-gray-300",children:e}),t.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["â‚¦",r.toLocaleString()," (",a.toFixed(1),"%)"]})]}),t.jsx("div",{className:"h-2 rounded-full overflow-hidden "+("dark"===s?"bg-gray-700":"bg-gray-200"),children:t.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600",style:{width:`${a}%`}})})]},e)}),0===Object.keys(j.expensesByCategory).length&&t.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No expenses recorded yet"})]})]})]}),t.jsxs("div",{className:"p-6 rounded-xl border "+("dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:"Recent Transactions"}),t.jsxs("div",{className:"flex gap-2",children:[["all","revenue","expense"].map(e=>t.jsx("button",{onClick:()=>h(e),className:"px-3 py-1 rounded text-sm font-medium capitalize "+(g===e?"bg-purple-600 text-white":"dark"===s?"bg-gray-800 text-gray-100":"bg-black text-gray-100"),children:e},e)),t.jsx("button",{onClick:()=>N("revenue"),className:"px-3 py-1 rounded text-sm font-medium bg-green-600 text-white hover:bg-green-700",children:"+ Revenue"}),t.jsx("button",{onClick:()=>N("expense"),className:"px-3 py-1 rounded text-sm font-medium bg-red-600 text-white hover:bg-red-700",children:"+ Expense"})]})]}),t.jsxs("div",{className:"space-y-2",children:[k.slice(0,20).map(e=>t.jsxs("div",{className:"p-4 rounded-lg border flex items-center justify-between "+("dark"===s?"bg-gray-700 border-gray-600":"bg-gray-800/50 border-purple-500/20"),children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("revenue"===e.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.type}),t.jsx("span",{className:"text-sm font-medium text-white",children:e.category})]}),e.description&&t.jsx("p",{className:"text-sm text-gray-400",children:e.description}),t.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.transaction_date).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-lg font-bold "+("revenue"===e.type?"text-green-500":"text-red-500"),children:["revenue"===e.type?"+":"-","â‚¦",e.amount.toLocaleString()]}),t.jsx("button",{onClick:()=>w(e.id),className:"p-2 rounded hover:bg-red-100",children:t.jsx(u,{size:16,className:"text-red-600"})})]})]},e.id)),0===k.length&&t.jsx("p",{className:"text-center py-8 text-gray-500",children:"No transactions yet"})]})]}),c&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:`w-full max-w-md ${"dark"===s?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl`,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Add ","revenue"===c.type?"Revenue":"Expense"]}),t.jsx("button",{onClick:()=>{p(null),m(!1)},className:"p-1 rounded "+("dark"===s?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:t.jsx(d,{size:20})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category *"}),t.jsxs("select",{value:c.category,onChange:e=>p({...c,category:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[t.jsx("option",{value:"",children:"Select category"}),("revenue"===c.type?["YouTube Ad Revenue","Bookings","Donations","Merchandise","Streaming","Teaching","Sponsorships"]:["Equipment","Software","Studio Rental","Travel","Marketing","Website","Production","Costumes","Professional Services"]).map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Amount (â‚¦) *"}),t.jsx("input",{type:"number",value:c.amount,onChange:e=>p({...c,amount:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"0.00"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Date"}),t.jsx("input",{type:"date",value:c.transaction_date,onChange:e=>p({...c,transaction_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Description"}),t.jsx("textarea",{value:c.description||"",onChange:e=>p({...c,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add details..."})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>{p(null),m(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),t.jsxs("button",{onClick:async()=>{if(!c||!c.category||c.amount<=0)alert("Please fill in all required fields");else try{if(x){const{id:t,created_at:s,...a}=c,i=await(async t=>{try{const{data:s,error:r}=await e.from("revenue_expenses").insert([t]).select().single();if(r)throw r;return s}catch(s){return null}})(a);i&&(l([i,...r]),await v())}p(null),m(!1)}catch(t){alert("Failed to save transaction")}},disabled:!c.category||c.amount<=0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(_,{size:16}),"Save"]})]})]})})})]})},je=()=>{const{theme:s}=a(),[r,l]=i.useState([]),[n,o]=i.useState(!0),[c,p]=i.useState(null),[x,m]=i.useState(!1),[g,h]=i.useState("all");i.useEffect(()=>{b()},[]);const b=async()=>{o(!0);const t=await(async()=>{try{const{data:t,error:s}=await e.from("goals").select("*").order("created_at",{ascending:!1});if(s)throw s;return t||[]}catch(t){return[]}})();l(t),o(!1)},f=async t=>{if(!confirm("Delete this goal?"))return;const s=await(async t=>{try{const{error:s}=await e.from("goals").delete().eq("id",t);if(s)throw s;return!0}catch(s){return!1}})(t);s&&l(r.filter(e=>e.id!==t))},y=r.filter(e=>"all"===g||e.status===g),v=e=>({content:"purple",growth:"blue",ministry:"pink",financial:"green",engagement:"orange",learning:"indigo",personal:"red"}[e]||"gray");return n?t.jsx("div",{className:"flex items-center justify-center p-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-white",children:"Goals Tracker"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Set and track your ministry goals"})]}),t.jsxs("div",{className:"flex gap-2",children:[["all","active","completed"].map(e=>t.jsx("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all "+(g===e?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"dark"===s?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:e},e)),t.jsxs("button",{onClick:()=>{const e={id:"",title:"",category:"content",target_value:0,current_value:0,start_date:(new Date).toISOString().split("T")[0],priority:"medium",status:"active",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};p(e),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[t.jsx(j,{size:20}),"Add Goal"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.map(e=>{const a=e.target_value>0?e.current_value/e.target_value*100:0,i="completed"===e.status,n=e.target_date?Math.ceil((new Date(e.target_date).getTime()-(new Date).getTime())/864e5):null;return t.jsxs("div",{className:`p-6 rounded-xl border transition-all ${"dark"===s?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"} ${i?"opacity-75":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize bg-${v(e.category)}-100 text-${v(e.category)}-700`,children:e.category}),t.jsx("span",{className:`text-xs font-medium ${o=e.priority,{low:"text-gray-500",medium:"text-yellow-500",high:"text-red-500"}[o]||"text-gray-500"}`,children:e.priority})]}),t.jsx("h3",{className:"text-lg font-bold text-white",children:e.title}),e.notes&&t.jsx("p",{className:"text-sm mt-1 text-gray-400",children:e.notes})]}),t.jsx("div",{className:"flex items-center gap-2",children:i?t.jsx($,{size:24,className:"text-green-500"}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{p(e),m(!1)},className:"p-2 rounded "+("dark"===s?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:t.jsx(N,{size:16,className:"text-gray-400"})}),t.jsx("button",{onClick:()=>f(e.id),className:"p-2 rounded hover:bg-red-100",children:t.jsx(u,{size:16,className:"text-red-600"})})]})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Progress"}),t.jsxs("span",{className:"text-sm font-bold text-white",children:[e.current_value," / ",e.target_value," ",e.unit||""]})]}),t.jsx("div",{className:"h-3 rounded-full overflow-hidden "+("dark"===s?"bg-gray-700":"bg-gray-200"),children:t.jsx("div",{className:"h-full transition-all "+(i?"bg-green-500":"bg-gradient-to-r from-purple-600 to-pink-600"),style:{width:`${Math.min(a,100)}%`}})}),t.jsxs("div",{className:"flex justify-between items-center mt-2",children:[t.jsxs("span",{className:"text-xs text-gray-500",children:[a.toFixed(1),"% complete"]}),!i&&t.jsx("input",{type:"number",value:e.current_value,onChange:t=>(async(e,t)=>{const s={...e,current_value:t};t>=e.target_value&&"active"===e.status&&(s.status="completed"),await he(e.id,s)&&l(r.map(t=>t.id===e.id?s:t))})(e,Number(t.target.value)),className:"w-20 px-2 py-1 text-xs rounded border "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),null!==n&&!i&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(I,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"text-gray-400",children:n>0?`${n} days left`:0===n?"Due today":`${Math.abs(n)} days overdue`})]})]},e.id);var o}),0===y.length&&t.jsxs("div",{className:"col-span-2 text-center py-12",children:[t.jsx(F,{size:48,className:"mx-auto mb-4 text-gray-400"}),t.jsxs("p",{className:"text-lg font-medium text-gray-400",children:["No ","all"!==g?g:""," goals yet"]}),t.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Goal" to create your first goal'})]})]}),c&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:`w-full max-w-lg ${"dark"===s?"bg-gray-800":"bg-gray-900/80"} rounded-lg shadow-xl max-h-[90vh] overflow-y-auto`,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:x?"Add New Goal":"Edit Goal"}),t.jsx("button",{onClick:()=>{p(null),m(!1)},className:"p-1 rounded "+("dark"===s?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:t.jsx(d,{size:20,className:"text-gray-400"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Goal Title *"}),t.jsx("input",{type:"text",value:c.title,onChange:e=>p({...c,title:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Upload 10 videos this month"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category"}),t.jsxs("select",{value:c.category,onChange:e=>p({...c,category:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[t.jsx("option",{value:"content",children:"Content"}),t.jsx("option",{value:"growth",children:"Growth"}),t.jsx("option",{value:"ministry",children:"Ministry"}),t.jsx("option",{value:"financial",children:"Financial"}),t.jsx("option",{value:"engagement",children:"Engagement"}),t.jsx("option",{value:"learning",children:"Learning"}),t.jsx("option",{value:"personal",children:"Personal"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),t.jsxs("select",{value:c.priority,onChange:e=>p({...c,priority:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Value"}),t.jsx("input",{type:"number",value:c.target_value,onChange:e=>p({...c,target_value:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Current Value"}),t.jsx("input",{type:"number",value:c.current_value,onChange:e=>p({...c,current_value:Number(e.target.value)}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Unit (optional)"}),t.jsx("input",{type:"text",value:c.unit||"",onChange:e=>p({...c,unit:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., videos, subscribers, â‚¦"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),t.jsx("input",{type:"date",value:c.target_date||"",onChange:e=>p({...c,target_date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),t.jsx("textarea",{value:c.notes||"",onChange:e=>p({...c,notes:e.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none "+("dark"===s?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or strategy..."})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:()=>{p(null),m(!1)},className:"flex-1 px-4 py-2 border rounded-lg "+("dark"===s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),t.jsxs("button",{onClick:async()=>{if(c&&c.title.trim())try{if(x){const{id:t,created_at:s,updated_at:a,...i}=c,n=await(async t=>{try{const{data:s,error:r}=await e.from("goals").insert([t]).select().single();if(r)throw r;return s}catch(s){return null}})(i);n&&l([n,...r])}else{await he(c.id,c)&&l(r.map(e=>e.id===c.id?c:e))}p(null),m(!1)}catch(t){alert("Failed to save goal")}},disabled:!c.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(_,{size:16}),x?"Add Goal":"Save Changes"]})]})]})})})]})};function ye(){const[e,s]=i.useState("7d"),[r,a]=i.useState({pageViews:[],topPages:[],userLocations:[],deviceBreakdown:[],peakHours:[],userRetention:[]}),[l,n]=i.useState(!0),[o,d]=i.useState(!1);i.useEffect(()=>{c(),setTimeout(()=>d(!0),100)},[e]);const c=async()=>{try{const t=await le(),s=(null==t?void 0:t.total_visits)||0,r="7d"===e?7:"30d"===e?30:90,l=Math.floor(s/r);a({pageViews:p(r,l),topPages:[{page:"/home",views:Math.floor(.35*s)},{page:"/videos",views:Math.floor(.28*s)},{page:"/about",views:Math.floor(.2*s)},{page:"/contact",views:Math.floor(.12*s)},{page:"/gallery",views:Math.floor(.05*s)}],userLocations:[{country:"United States",users:Math.floor(.32*s)},{country:"United Kingdom",users:Math.floor(.18*s)},{country:"Canada",users:Math.floor(.12*s)},{country:"Australia",users:Math.floor(.1*s)},{country:"Germany",users:Math.floor(.08*s)}],deviceBreakdown:[{device:"Mobile",percentage:65},{device:"Desktop",percentage:28},{device:"Tablet",percentage:7}],peakHours:x(),userRetention:u()})}catch(t){}finally{n(!1)}},p=(e,t)=>Array.from({length:e},(s,r)=>{const a=new Date;a.setDate(a.getDate()-(e-r-1));const l=Math.floor(.3*t);return{date:a.toLocaleDateString("en-US",{month:"short",day:"numeric"}),views:Math.max(10,t+Math.floor(Math.random()*l*2-l))}}),x=()=>Array.from({length:24},(e,t)=>({hour:t,activity:Math.floor(80*Math.random())+(t>=8&&t<=22?40:10)})),u=()=>Array.from({length:8},(e,t)=>({week:`Week ${t+1}`,rate:Math.max(30,100-8*t-10*Math.random())}));return l?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):t.jsxs(t.Fragment,{children:[t.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n      "}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Advanced Analytics"}),t.jsx("p",{className:"text-purple-300 mt-1",children:"Deep insights into user behavior and engagement"})]}),t.jsxs("select",{value:e,onChange:e=>s(e.target.value),className:"px-4 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[t.jsx("option",{value:"7d",children:"Last 7 Days"}),t.jsx("option",{value:"30d",children:"Last 30 Days"}),t.jsx("option",{value:"90d",children:"Last 90 Days"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-4 border border-purple-500/20",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-300 text-sm",children:"Total Page Views"}),t.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.pageViews.reduce((e,t)=>e+t.views,0).toLocaleString()}),t.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 12.5% vs last period"})]}),t.jsx(V,{className:"w-8 h-8 text-purple-400"})]})}),t.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-4 border border-blue-500/20",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-blue-300 text-sm",children:"Unique Visitors"}),t.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.userLocations.reduce((e,t)=>e+t.users,0).toLocaleString()}),t.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 8.3% vs last period"})]}),t.jsx(C,{className:"w-8 h-8 text-blue-400"})]})}),t.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-4 border border-green-500/20",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-green-300 text-sm",children:"Avg Session Time"}),t.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"4m 32s"}),t.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 15.2% vs last period"})]}),t.jsx(I,{className:"w-8 h-8 text-green-400"})]})}),t.jsx("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-4 border border-orange-500/20",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-orange-300 text-sm",children:"Bounce Rate"}),t.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"32.4%"}),t.jsx("p",{className:"text-red-400 text-xs mt-1",children:"â†“ 5.1% vs last period"})]}),t.jsx(B,{className:"w-8 h-8 text-orange-400"})]})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Page Views Over Time"}),((e,s)=>{const r=Math.max(...e.map(e=>e.views),1),a=e.map((t,s)=>({x:s/(e.length-1||1)*100,y:100-t.views/r*80})),l=a.map((e,t)=>`${0===t?"M":"L"} ${e.x},${e.y}`).join(" "),i=`${l} L ${a[a.length-1].x},100 L 0,100 Z`;return t.jsx("div",{className:"relative h-64",children:t.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"analytics-gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:s,stopOpacity:"0.4"}),t.jsx("stop",{offset:"100%",stopColor:s,stopOpacity:"0.05"})]})}),t.jsx("path",{d:i,fill:"url(#analytics-gradient)",style:{animation:o?"drawPath 1.5s ease-out forwards":"none",opacity:o?1:0}}),t.jsx("path",{d:l,fill:"none",stroke:s,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:o?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:"1000",strokeDashoffset:o?"0":"1000"}}),a.map((e,r)=>t.jsx("circle",{cx:e.x,cy:e.y,r:"1.5",fill:s,style:{animation:o?`fadeInScale 0.3s ease-out ${.5+.05*r}s forwards`:"none",opacity:o?1:0}},r))]})})})(r.pageViews,"#9333ea")]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(M,{className:"w-5 h-5"}),"Top Pages"]}),t.jsx("div",{className:"space-y-3",children:r.topPages.map((e,s)=>t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-white font-medium",children:e.page}),t.jsxs("span",{className:"text-purple-300 text-sm",children:[e.views.toLocaleString()," views"]})]}),t.jsx("div",{className:"w-full bg-purple-500/20 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 h-2 rounded-full transition-all",style:{width:e.views/r.topPages[0].views*100+"%",animation:o?`slideIn 0.5s ease-out ${.1*s}s forwards`:"none"}})})]})},s))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-6 border border-blue-500/20",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(O,{className:"w-5 h-5"}),"Top Locations"]}),t.jsx("div",{className:"space-y-3",children:r.userLocations.map((e,s)=>t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-white font-medium",children:e.country}),t.jsxs("span",{className:"text-blue-300 text-sm",children:[e.users.toLocaleString()," users"]})]}),t.jsx("div",{className:"w-full bg-blue-500/20 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2 rounded-full transition-all",style:{width:e.users/r.userLocations[0].users*100+"%",animation:o?`slideIn 0.5s ease-out ${.1*s}s forwards`:"none"}})})]})},s))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-6 border border-green-500/20",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(U,{className:"w-5 h-5"}),"Device Breakdown"]}),t.jsx("div",{className:"space-y-4",children:r.deviceBreakdown.map((e,s)=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between mb-2",children:[t.jsx("span",{className:"text-white",children:e.device}),t.jsxs("span",{className:"text-green-300",children:[e.percentage,"%"]})]}),t.jsx("div",{className:"w-full bg-green-500/20 rounded-full h-3",children:t.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 h-3 rounded-full transition-all",style:{width:`${e.percentage}%`,animation:o?`slideIn 0.5s ease-out ${.1*s}s forwards`:"none"}})})]},s))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-6 border border-orange-500/20",children:[t.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[t.jsx(I,{className:"w-5 h-5"}),"Peak Activity Hours"]}),t.jsx("div",{className:"h-48 flex items-end justify-between gap-1",children:r.peakHours.filter((e,t)=>t%2==0).map((e,s)=>{const a=Math.max(...r.peakHours.map(e=>e.activity));return t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[t.jsx("div",{className:"w-full bg-gradient-to-t from-orange-600 to-orange-700 rounded-t hover:from-orange-500 hover:to-orange-600 transition-all cursor-pointer",style:{height:e.activity/a*100+"%",animation:o?`slideUp 0.5s ease-out ${.05*s}s forwards`:"none",opacity:o?1:0}}),t.jsxs("span",{className:"text-xs text-orange-300",children:[e.hour,":00"]})]},s)})})]})]})]}),t.jsx("style",{children:"\n        @keyframes slideIn {\n          from {\n            width: 0;\n          }\n        }\n        @keyframes slideUp {\n          from {\n            height: 0;\n            opacity: 0;\n          }\n        }\n      "})]})}const ve=()=>{const[e,s]=i.useState(null),[r,a]=i.useState(!1),[l,n]=i.useState(!1),[o,c]=i.useState(!1),[p,x]=i.useState(!1);i.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return void n(!0);const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;c(e);const t=e=>{e.preventDefault(),s(e),a(!0)};return window.addEventListener("beforeinstallprompt",t),window.addEventListener("appinstalled",()=>{n(!0),a(!1)}),()=>{window.removeEventListener("beforeinstallprompt",t)}},[]);return l?null:t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:async()=>{if(o)return void x(!0);if(!e)return void alert('To install this app:\n\n1. Click the menu button (â‹®) in your browser\n2. Select "Install App" or "Add to Home Screen"\n3. Follow the prompts');e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&n(!0),s(null),a(!1)},className:"w-full mt-4 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold text-sm transition-all hover:shadow-lg hover:shadow-green-500/50 hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2",children:[t.jsx(G,{size:18}),"Install App"]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] rounded-2xl p-6 max-w-md w-full border border-purple-500/30 shadow-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(H,{size:24,className:"text-purple-300"}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Install on iOS"})]}),t.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:t.jsx(d,{size:20,className:"text-purple-300"})})]}),t.jsxs("div",{className:"space-y-4 text-purple-200",children:[t.jsx("p",{className:"text-sm",children:"To install this app on your iPhone or iPad:"}),t.jsxs("ol",{className:"space-y-3 text-sm",children:[t.jsxs("li",{className:"flex gap-3",children:[t.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),t.jsxs("span",{children:["Tap the ",t.jsx("strong",{className:"text-white",children:"Share"})," button at the bottom of Safari"]})]}),t.jsxs("li",{className:"flex gap-3",children:[t.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),t.jsxs("span",{children:["Scroll down and tap ",t.jsx("strong",{className:"text-white",children:'"Add to Home Screen"'})]})]}),t.jsxs("li",{className:"flex gap-3",children:[t.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),t.jsxs("span",{children:["Tap ",t.jsx("strong",{className:"text-white",children:'"Add"'})," in the top right corner"]})]})]}),t.jsx("div",{className:"mt-4 p-3 bg-purple-500/10 rounded-lg border border-purple-500/20",children:t.jsx("p",{className:"text-xs text-purple-300",children:"ðŸ’¡ The app icon will appear on your home screen and work like a native app!"})})]}),t.jsx("button",{onClick:()=>x(!1),className:"w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Got it!"})]})}),!o&&!e&&r&&t.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(W,{size:18,className:"text-blue-300 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"text-xs text-blue-200",children:[t.jsx("p",{className:"font-semibold mb-1",children:"Install this app:"}),t.jsx("p",{children:'Click the menu (â‹®) â†’ "Install App" or "Add to Home Screen"'})]})]})}),t.jsxs("div",{className:"mt-3 flex items-center justify-center gap-4 text-xs text-purple-400",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(U,{size:14}),t.jsx("span",{children:"Mobile"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(J,{size:14}),t.jsx("span",{children:"Desktop"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(H,{size:14}),t.jsx("span",{children:"iOS"})]})]})]})};const Ne=new class{constructor(){this.audio=null,this.notificationCount=0,this.initializeAudio(),this.requestPermission()}initializeAudio(){}async requestPermission(){"Notification"in window&&"default"===Notification.permission&&await Notification.requestPermission()}playSound(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.value=800,t.type="sine",s.gain.setValueAtTime(.3,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5)}catch(e){}}async showNotification(e,t){if("Notification"in window&&"granted"===Notification.permission)try{const s=new Notification(e,{icon:"/icon-192x192.png",badge:"/icon-192x192.png",...t});return setTimeout(()=>s.close(),5e3),s}catch(s){}}async updateBadge(e){if(this.notificationCount=e,"setAppBadge"in navigator)try{e>0?await navigator.setAppBadge(e):await navigator.clearAppBadge()}catch(t){}if("serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage({type:"UPDATE_BADGE",count:e})}catch(t){}this.updateFaviconBadge(e)}updateFaviconBadge(e){const t=document.createElement("canvas");t.width=32,t.height=32;const s=t.getContext("2d");if(!s)return;s.fillStyle="#a855f7",s.beginPath(),s.arc(16,16,16,0,2*Math.PI),s.fill(),e>0&&(s.fillStyle="#ff0000",s.beginPath(),s.arc(24,8,8,0,2*Math.PI),s.fill(),s.fillStyle="#ffffff",s.font="bold 10px Arial",s.textAlign="center",s.textBaseline="middle",s.fillText(e>99?"99+":e.toString(),24,8));const r=document.querySelector("link[rel*='icon']")||document.createElement("link");r.type="image/x-icon",r.rel="shortcut icon",r.href=t.toDataURL(),document.getElementsByTagName("head")[0].appendChild(r)}async clearBadge(){await this.updateBadge(0)}async notifyNewMessage(e,t){this.playSound(),await this.showNotification("New Message",{body:`From ${e}: ${t}`,tag:"new-message"})}async notifyNewSongRequest(e,t){this.playSound(),await this.showNotification("New Song Request",{body:`${t} requested: ${e}`,tag:"new-song-request"})}async notifyUserLogin(e,t){this.playSound(),await this.showNotification("User Logged In",{body:`${e} (${t}) has logged in`,tag:"user-login"})}async notifyNewFanMessage(e,t){this.playSound(),await this.showNotification("New Fan Message",{body:`${e} from ${t}`,tag:"new-fan-message"})}},we=({onClose:r})=>{var a;const[n,c]=i.useState(!1),[x,u]=i.useState(null),[m,g]=i.useState(""),[h,b]=i.useState(""),[j,y]=i.useState(!1),[v,N]=i.useState(!1),[w,k]=i.useState(""),[_,S]=i.useState(!1),[C,A]=i.useState("dashboard"),[D,P]=i.useState([]),[q,I]=i.useState({total_visitors:0,page_visits:{},artist_logins:0,last_updated:(new Date).toISOString()}),[L,$]=i.useState({videoUpdates:[],loginFrequency:[],siteVisits:[]}),{unreadCount:B,updateUnreadCount:O}=(t=>{const[s,r]=i.useState(0);i.useEffect(()=>{if(!t)return;const s=e.channel("fan_messages_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"fan_messages"},e=>{const t=e.new;Ne.notifyNewFanMessage(t.message_type,t.from_name||"Anonymous"),a()}).subscribe(),r=e.channel("song_requests_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"song_requests"},e=>{const t=e.new;Ne.notifyNewSongRequest(t.song_title,t.requested_by_name||"Anonymous"),a()}).subscribe();return a(),()=>{s.unsubscribe(),r.unsubscribe()}},[t]);const a=async()=>{try{const{count:t}=await e.from("fan_messages").select("*",{count:"exact",head:!0}).eq("status","unread"),{count:s}=await e.from("song_requests").select("*",{count:"exact",head:!0}).eq("status","new"),a=(t||0)+(s||0);r(a),await Ne.updateBadge(a)}catch(t){}};return{unreadCount:s,updateUnreadCount:a}})(x);i.useEffect(()=>(document.body.classList.add("admin-panel-active"),()=>{document.body.classList.remove("admin-panel-active")}),[]),i.useEffect(()=>{(async()=>{var t;try{const{data:s}=await e.auth.getUser();if(null==s?void 0:s.user){const r=s.user.email||"";let a=null;if(r){const{data:t}=await e.from("users").select("*").eq("email",r).maybeSingle();t&&(a={id:t.id,email:t.email,role:t.role,phone:t.phone||"",name:t.full_name,profilePicture:localStorage.getItem("admin_profile_picture")||void 0})}const l=(null==(t=s.user.email)?void 0:t.split("@")[0])||"Admin",i=a||{id:s.user.id,email:r,role:"artist",phone:"",name:l,profilePicture:localStorage.getItem("admin_profile_picture")||void 0};u(i),c(!0),localStorage.setItem("admin_session",JSON.stringify({user:i}))}else{const e=localStorage.getItem("admin_session");if(e){const t=JSON.parse(e),s=localStorage.getItem("admin_profile_picture");s&&!t.user.profilePicture&&(t.user.profilePicture=s),u(t.user),c(!0)}}}catch(s){}finally{U()}})()},[]);const U=async()=>{const{getVideos:e,getSettings:t}=await s(async()=>{const{getVideos:e,getSettings:t}=await import("./supabaseData-PmD0rX_k.js");return{getVideos:e,getSettings:t}},__vite__mapDeps([0,1,2,3,4])),[r,a]=await Promise.all([e(),t()]);P(r),I({total_visitors:(null==a?void 0:a.total_visits)||0,page_visits:{home:(null==a?void 0:a.total_visits)||0},artist_logins:(null==a?void 0:a.artist_logins)||0,last_updated:(new Date).toISOString()});const l=(e,t=2)=>{const s=[];for(let r=6;r>=0;r--){const a=new Date;a.setDate(a.getDate()-r);const l=Math.max(0,e+Math.floor(Math.random()*t*2-t));s.push({date:a.toISOString(),value:l})}return s},i=r.filter(e=>"completed"===e.status).length;$({videoUpdates:l(Math.floor(i/7),1),loginFrequency:l(Math.floor((null==a?void 0:a.artist_logins)/7||1),1),siteVisits:l(Math.floor(((null==a?void 0:a.total_visits)||0)/7),3)})},G=async t=>{t.preventDefault();try{const{data:t,error:r}=await e.auth.signInWithPassword({email:m,password:h});if(r||!t.user)return void alert("Invalid email or password. Please check your credentials.");let a=null;const{data:l}=await e.from("users").select("*").eq("email",m).maybeSingle();l&&(a=l);const i={id:(null==a?void 0:a.id)||t.user.id,email:m,role:(null==a?void 0:a.role)||"artist",phone:(null==a?void 0:a.phone)||"",name:(null==a?void 0:a.full_name)||m.split("@")[0]||"Admin",profilePicture:localStorage.getItem("admin_profile_picture")||void 0};u(i),c(!0),localStorage.setItem("admin_session",JSON.stringify({user:i})),Ne.notifyUserLogin(i.name,i.role);const{getSettings:n,updateSettings:o}=await s(async()=>{const{getSettings:e,updateSettings:t}=await import("./supabaseData-PmD0rX_k.js");return{getSettings:e,updateSettings:t}},__vite__mapDeps([0,1,2,3,4])),d=await n(),p=(null==d?void 0:d.artist_logins)||0;await o({artist_logins:p+1})}catch(r){alert("Login failed due to a server error. Please try again.")}},H=async e=>{e.preventDefault();["artist@estherreign.com","editor@estherreign.com"].includes(w)?(S(!0),setTimeout(()=>{alert(`Password reset instructions have been sent to ${w}.\n\nFor demo purposes:\n- Artist password: artist2024\n- Editor password: editor2024`),N(!1),S(!1),k("")},1500)):alert("Email not found. Please check your email address.")};return n?t.jsxs("div",{className:"admin-panel fixed inset-0 bg-black overflow-hidden z-50 flex flex-col",children:[t.jsxs("div",{className:"fixed inset-0 z-0",children:[t.jsx(l,{}),t.jsx("div",{className:"absolute inset-0 bg-black/60 z-[1]"})]}),t.jsx("nav",{className:"flex-shrink-0 bg-black/95 backdrop-blur-xl border-b border-purple-500/30 relative z-[90]",style:{zIndex:90,position:"relative"},children:t.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[(null==x?void 0:x.profilePicture)?t.jsx("img",{src:x.profilePicture,alt:"Profile",className:"w-12 h-12 rounded-xl object-cover shadow-lg shadow-purple-500/30"}):t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:t.jsx("span",{className:"text-white font-black text-xl",children:null==(a=null==x?void 0:x.name)?void 0:a.charAt(0)})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl md:text-2xl font-black text-white",children:"Esther Reign Admin"}),t.jsxs("p",{className:"text-sm text-purple-300",children:[null==x?void 0:x.name," â€¢ ","artist"===(null==x?void 0:x.role)?"Artist":"Editor"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(de,{currentUser:x,externalUnreadCount:B}),t.jsxs("button",{onClick:r,className:"px-4 py-2 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all text-purple-200 border border-purple-500/20 flex items-center gap-2",children:[t.jsx(V,{size:18}),t.jsx("span",{className:"hidden md:inline",children:"View Site"})]}),t.jsxs("button",{onClick:async()=>{try{await e.auth.signOut()}catch(t){}c(!1),u(null),localStorage.removeItem("admin_session")},className:"px-4 py-2 bg-red-500/10 hover:bg-red-500/20 rounded-xl transition-all text-red-300 border border-red-500/20 flex items-center gap-2",children:[t.jsx(Z,{size:18}),t.jsx("span",{className:"hidden md:inline",children:"Logout"})]})]})]})}),t.jsxs("div",{className:"flex-1 overflow-hidden flex relative z-[50]",children:[t.jsx("aside",{className:"hidden lg:block w-64 bg-[#2d1b4e]/90 backdrop-blur-xl border-r border-purple-500/20 overflow-y-auto relative z-[40]",children:t.jsx("div",{className:"p-4 space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:K},{id:"videos",label:"Videos",icon:p},{id:"messages",label:"Messages",icon:z},{id:"songs",label:"Song Requests",icon:T},{id:"calendar",label:"Calendar",icon:E},{id:"financial",label:"Financial",icon:R},{id:"goals",label:"Goals",icon:F},{id:"analytics",label:"Analytics",icon:M},{id:"settings",label:"Settings",icon:X}].map(e=>{const s=e.icon;return t.jsxs("button",{onClick:()=>A(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all "+(C===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg shadow-purple-500/30":"text-purple-200 hover:bg-purple-500/10 hover:text-white"),children:[t.jsx(s,{size:20}),t.jsx("span",{children:e.label})]},e.id)})})}),t.jsx("main",{className:"flex-1 overflow-y-auto relative z-[30]",children:t.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 relative z-[30]",children:[t.jsx("div",{className:"lg:hidden flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:[{id:"dashboard",label:"Dashboard",icon:K},{id:"videos",label:"Videos",icon:p},{id:"messages",label:"Messages",icon:z},{id:"songs",label:"Songs",icon:T},{id:"calendar",label:"Calendar",icon:E},{id:"financial",label:"Financial",icon:R},{id:"goals",label:"Goals",icon:F},{id:"analytics",label:"Analytics",icon:M},{id:"settings",label:"Settings",icon:X}].map(e=>{const s=e.icon;return t.jsxs("button",{onClick:()=>A(e.id),className:"flex-shrink-0 px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2 "+(C===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg":"bg-purple-500/10 text-purple-200 hover:bg-purple-500/20"),children:[t.jsx(s,{size:18}),t.jsx("span",{className:"text-sm",children:e.label})]},e.id)})}),"dashboard"===C&&t.jsxs("div",{className:"space-y-6",children:[t.jsx(pe,{videoUpdates:L.videoUpdates,loginFrequency:L.loginFrequency,siteVisits:L.siteVisits}),t.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/30 bg-black/40",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"w-12 h-12 bg-purple-500/30 rounded-xl flex items-center justify-center",children:t.jsx(p,{size:24,className:"text-purple-400"})})}),t.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:D.length}),t.jsx("p",{className:"text-purple-200 text-shadow text-sm font-semibold",children:"Total Videos"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/30 bg-black/40",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center",children:t.jsx(M,{size:24,className:"text-blue-400"})})}),t.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:q.total_visitors}),t.jsx("p",{className:"text-blue-200 text-shadow text-sm font-semibold",children:"Total Visitors"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/20 backdrop-blur-xl rounded-2xl p-6 border border-green-500/30 bg-black/40",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"w-12 h-12 bg-green-500/30 rounded-xl flex items-center justify-center",children:t.jsx(o,{size:24,className:"text-green-400"})})}),t.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:D.filter(e=>"completed"===e.status).length}),t.jsx("p",{className:"text-green-200 text-shadow text-sm font-semibold",children:"Published"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-500/20 to-orange-600/20 backdrop-blur-xl rounded-2xl p-6 border border-orange-500/30 bg-black/40",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:t.jsx(f,{size:24,className:"text-orange-400"})})}),t.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:q.artist_logins}),t.jsx("p",{className:"text-orange-200 text-shadow text-sm font-semibold",children:"Admin Logins"})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-8 border border-purple-500/30 bg-black/40",children:[t.jsxs("h2",{className:"text-2xl font-black text-white text-shadow-strong mb-2",children:["Welcome back, ",null==x?void 0:x.name,"! ðŸ‘‹"]}),t.jsx("p",{className:"text-purple-100 text-shadow mb-6 font-medium",children:"Here's what's happening with your platform today."}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[t.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Active Videos"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:D.filter(e=>"completed"===e.status).length})]}),t.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[t.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:D.filter(e=>"pending"===e.status).length})]}),t.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[t.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Total Views"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:q.total_visitors})]})]})]})]}),"videos"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(ce,{})}),"messages"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(ue,{})}),"songs"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(me,{})}),"calendar"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(ge,{})}),"financial"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(fe,{})}),"goals"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(je,{})}),"analytics"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(ye,{})}),"settings"===C&&t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:t.jsx(xe,{})})]})})]}),x&&t.jsx(oe,{currentUser:x,videos:D})]}):t.jsxs("div",{className:"admin-panel fixed inset-0 bg-black flex items-center justify-center z-50 overflow-y-auto p-4",children:[t.jsx(l,{}),t.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-3 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all border border-purple-500/20 backdrop-blur-sm z-10",children:t.jsx(d,{size:24,className:"text-white"})}),t.jsx("div",{className:"max-w-lg w-full my-auto relative z-10",children:t.jsxs("div",{className:"bg-black/90 backdrop-blur-2xl rounded-3xl p-6 md:p-8 border border-purple-500/30 shadow-2xl",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/50",children:t.jsx(f,{size:48,className:"text-white"})}),t.jsx("h2",{className:"text-4xl font-black text-white mb-3",children:"Admin Panel"}),t.jsx("p",{className:"text-purple-200",children:"Enter your credentials to access the admin dashboard"})]}),v?t.jsxs("form",{onSubmit:H,className:"space-y-5",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(Q,{size:32,className:"text-purple-300"})}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Reset Password"}),t.jsx("p",{className:"text-sm text-purple-200",children:"Enter your email to receive reset instructions"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),t.jsx("input",{type:"email",value:w,onChange:e=>k(e.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:()=>{N(!1),k("")},className:"flex-1 bg-purple-500/10 border border-purple-500/30 text-purple-200 px-6 py-3 rounded-xl font-semibold transition-all hover:bg-purple-500/20",children:"Back"}),t.jsx("button",{type:"submit",disabled:_,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Sending...":"Send Reset Link"})]})]}):t.jsxs("form",{onSubmit:G,className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),t.jsx("input",{type:"email",value:m,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:j?"text":"password",value:h,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 pr-12 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your password",required:!0}),t.jsx("button",{type:"button",onClick:()=>y(!j),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-purple-300 hover:text-purple-200 transition-colors",children:j?t.jsx(Y,{size:20}):t.jsx(V,{size:20})})]})]}),t.jsx("div",{className:"flex items-center justify-between text-sm",children:t.jsxs("button",{type:"button",onClick:()=>N(!0),className:"text-purple-300 hover:text-purple-200 transition-colors flex items-center gap-1",children:[t.jsx(Q,{size:16}),"Forgot Password?"]})}),t.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all hover:shadow-lg hover:shadow-purple-500/50 hover:scale-[1.02] active:scale-[0.98]",children:"Sign In"}),t.jsx(ve,{})]})]})})]})};export{we as default};
