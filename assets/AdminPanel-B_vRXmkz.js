const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabaseData-ByrMHVQX.js","assets/index-DmXzS1E9.js","assets/react-vendor-BkZfVlwG.js","assets/icons-BMGuJ0FM.js","assets/index-ChWpW5vb.css"])))=>i.map(i=>d[i]);
import{u as Be,s as S,j as e,a as Je,_ as ke,b as Ue,P as Ye}from"./index-DmXzS1E9.js";import{r as g,a as he}from"./react-vendor-BkZfVlwG.js";import{g as Ge,X as B,h as At,V as ge,i as zt,T as le,j as Tt,k as Mt,S as bt,B as Te,U as Ve,l as He,m as Rt,E as Lt,n as Ie,L as qt,o as me,p as ie,q as Vt,r as yt,f as Ne,H as Ft,M as Bt,a as Se,b as We,s as Ut,t as Gt,u as $e,v as Pe,w as Ht,D as vt,C as Wt,x as jt,y as Fe,A as Jt,z as Yt,F as wt,J as Qt,K as Qe,N as Zt,O as Kt,Q as Xt,R as Ze,c as er,W as tr,Z as rr,_ as sr}from"./icons-BMGuJ0FM.js";import{getVideos as ar,addVideo as lr,updateVideo as nr,deleteVideo as or,reorderVideos as ir,getSettings as dr}from"./supabaseData-ByrMHVQX.js";var cr=Object.defineProperty,ur=Object.defineProperties,pr=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable,Xe=(t,s,r)=>s in t?cr(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,gr=(t,s)=>{for(var r in s||(s={}))xr.call(s,r)&&Xe(t,r,s[r]);if(Ke)for(var r of Ke(s))mr.call(s,r)&&Xe(t,r,s[r]);return t},hr=(t,s)=>ur(t,pr(s)),ee=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const fr=["ðŸ˜Š","ðŸ˜‚","ðŸ¥°","ðŸ˜","ðŸ¤—","ðŸ˜˜","ðŸ˜Ž","ðŸ¤©","ðŸ¥³","ðŸ‘","ðŸ‘","ðŸ™Œ","ðŸ’ª","ðŸ™","â¤ï¸","ðŸ’–","ðŸ’•","ðŸŽµ","ðŸŽ¶","ðŸŽ¤","âœ¨","â­","ðŸŒŸ","ðŸ”¥","ðŸ’¯","ðŸŽ‰"],et=()=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const s=new t;s.state==="suspended"&&s.resume();const r=s.createOscillator(),l=s.createGain();r.connect(l),l.connect(s.destination),r.frequency.value=800,r.type="sine",l.gain.setValueAtTime(.3,s.currentTime),l.gain.exponentialRampToValueAtTime(.01,s.currentTime+.2),r.start(s.currentTime),r.stop(s.currentTime+.2),r.onended=()=>{s.close()}}catch(t){console.log("Audio notification error:",t)}},br=({currentUser:t,videos:s=[]})=>{var r;const{profilePicture:l}=Be(),[i,o]=g.useState(!1),[c,u]=g.useState([]),[n,x]=g.useState(""),[P,k]=g.useState(!1),[E,y]=g.useState(!1),[p,j]=g.useState(""),[$,b]=g.useState(null),[d,a]=g.useState(""),[f,h]=g.useState(0),[m,N]=g.useState(null),C=g.useRef(null),_=g.useRef(null),A=t.role==="artist"?"Editor":"Esther Reign";g.useEffect(()=>{R(),W(),O(),V()},[]),g.useEffect(()=>{i&&C.current&&(C.current.scrollIntoView({behavior:"smooth"}),h(0))},[c,i]);const R=()=>ee(void 0,null,function*(){try{const{data:v,error:w}=yield S.from("chat_messages").select("*").order("timestamp",{ascending:!0});if(w)throw w;if(u(v||[]),!i){const z=(v||[]).filter(I=>I.sender_id!==t.id).length;h(Math.min(z,9))}}catch(v){console.error("Error loading messages:",v)}}),W=()=>{const v=S.channel("admin_chat_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_messages"},w=>{if(w.eventType==="INSERT"){const z=w.new;u(I=>I.find(L=>L.id===z.id)?I:[...I,z]),z.sender_id!==t.id&&(et(),i||h(I=>Math.min(I+1,9)))}else w.eventType==="DELETE"?u(z=>z.filter(I=>I.id!==w.old.id)):w.eventType==="UPDATE"&&u(z=>z.map(I=>I.id===w.new.id?w.new:I))}).subscribe();return()=>{S.removeChannel(v)}},U=()=>ee(void 0,null,function*(){if(!n.trim()&&!p)return;const v=p?s.find(L=>L.id===p):null,w=n.trim()||(p&&v?"ðŸ“¹ Referencing: ".concat(v.title):"ðŸ“¹ Video reference"),I={id:"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sender_id:t.id,sender_name:t.name,message:w,timestamp:new Date().toISOString(),video_id:p||null,edited:!1};console.log("ðŸ“¤ Sending message:",I);try{const L=hr(gr({},I),{timestamp:new Date().toISOString()});u(ze=>[...ze,L]),x(""),j(""),y(!1);const{data:Dt,error:Ae}=yield S.from("chat_messages").insert([I]).select().single();if(Ae)throw console.error("âŒ Error sending message:",Ae),u(ze=>ze.filter(It=>It.id!==I.id)),Ae;console.log("âœ… Message sent successfully:",Dt)}catch(L){console.error("âŒ Failed to send message:",L),alert("Failed to send message: "+L.message)}}),J=v=>ee(void 0,null,function*(){if(confirm("Are you sure you want to delete this message?"))try{const{error:w}=yield S.from("chat_messages").delete().eq("id",v);if(w)throw w}catch(w){console.error("Error deleting message:",w),alert("Failed to delete message")}}),de=v=>{b(v.id),a(v.message)},fe=()=>{b(null),a("")},be=v=>ee(void 0,null,function*(){if(d.trim())try{const{error:w}=yield S.from("chat_messages").update({message:d.trim(),edited:!0,timestamp:new Date().toISOString()}).eq("id",v);if(w)throw w;b(null),a("")}catch(w){console.error("Error editing message:",w),alert("Failed to edit message")}}),D=v=>{var w;x(z=>z+v),k(!1),(w=_.current)==null||w.focus()},q=v=>s.find(w=>w.id===v),F=v=>{const w=new Date(v),I=new Date().getTime()-w.getTime(),L=Math.floor(I/6e4);return L<1?"Just now":L<60?"".concat(L,"m ago"):L<1440?"".concat(Math.floor(L/60),"h ago"):w.toLocaleDateString()},O=()=>ee(void 0,null,function*(){try{const{data:v,error:w}=yield S.from("chat_clear_requests").select("*").eq("status","pending").order("created_at",{ascending:!1}).limit(1).single();if(w&&w.code!=="PGRST116")throw w;N(v||null)}catch(v){console.error("Error loading clear request:",v)}}),V=()=>{const v=S.channel("clear_requests_channel").on("postgres_changes",{event:"*",schema:"public",table:"chat_clear_requests"},w=>{if(w.eventType==="INSERT"||w.eventType==="UPDATE"){const z=w.new;z.status==="pending"?N(z):z.status==="approved"?(u([]),N(null),et()):N(null)}else w.eventType==="DELETE"&&N(null)}).subscribe();return()=>{S.removeChannel(v)}},G=()=>ee(void 0,null,function*(){if(confirm("Request to clear all messages? ".concat(A," must approve.")))try{const{data:v,error:w}=yield S.from("chat_clear_requests").insert([{requested_by:t.id,requested_by_name:t.name,requested_by_role:t.role,status:"pending"}]).select().single();if(w)throw w;N(v),alert("Clear request sent. Waiting for approval...")}catch(v){console.error("Error requesting clear:",v),alert("Failed to send clear request")}}),Y=()=>ee(void 0,null,function*(){if(m&&confirm("Approve clearing all messages? This cannot be undone."))try{const{error:v}=yield S.from("chat_clear_requests").update({status:"approved"}).eq("id",m.id);if(v)throw v;const{error:w}=yield S.from("chat_messages").delete().neq("id","00000000-0000-0000-0000-000000000000");if(w)throw w;u([]),N(null),alert("Chat cleared successfully!")}catch(v){console.error("Error approving clear:",v),alert("Failed to clear chat")}}),H=()=>ee(void 0,null,function*(){if(m)try{const{error:v}=yield S.from("chat_clear_requests").update({status:"rejected"}).eq("id",m.id);if(v)throw v;N(null),alert("Clear request rejected")}catch(v){console.error("Error rejecting clear:",v),alert("Failed to reject request")}});return i?e.jsxs("div",{className:"fixed inset-0 lg:inset-auto lg:fixed lg:right-4 lg:bottom-4 lg:w-[380px] lg:h-[580px] max-w-full max-h-full bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] backdrop-blur-2xl rounded-none lg:rounded-3xl shadow-2xl flex flex-col border-0 lg:border border-purple-500/30 z-[9999]",style:{zIndex:999999,position:"fixed"},children:[e.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-purple-600/30 to-purple-700/30 p-4 flex items-center justify-between border-b border-purple-500/30 rounded-t-2xl lg:rounded-t-3xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l||t!=null&&t.profilePicture?e.jsx("img",{src:l||(t==null?void 0:t.profilePicture)||"",alt:"Profile",className:"w-10 h-10 rounded-full object-cover shadow-lg"}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:A.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm md:text-base",children:A}),e.jsx("p",{className:"text-xs text-purple-300",children:"Online"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!m&&e.jsx("button",{onClick:G,className:"px-3 py-1 text-xs bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg transition-colors",title:"Request to clear all messages",children:"Clear Chat"}),e.jsx("button",{onClick:()=>o(!1),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-purple-500/20 rounded-full transition-colors",children:e.jsx(B,{size:20})})]})]}),m&&m.requested_by!==t.id&&e.jsx("div",{className:"flex-shrink-0 p-4 bg-yellow-500/20 border-b border-yellow-500/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold text-sm",children:"Clear Chat Request"}),e.jsxs("p",{className:"text-yellow-200 text-xs mt-1",children:[m.requested_by_name," wants to clear all messages"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Y,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded-lg transition-colors",children:"Approve"}),e.jsx("button",{onClick:H,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded-lg transition-colors",children:"Reject"})]})]})}),m&&m.requested_by===t.id&&e.jsx("div",{className:"flex-shrink-0 p-3 bg-blue-500/20 border-b border-blue-500/50",children:e.jsxs("p",{className:"text-blue-200 text-xs text-center",children:["â³ Waiting for ",A," to approve clear request..."]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[c.map(v=>{const w=v.sender_id===t.id,z=v.video_id?q(v.video_id):null;return $===v.id?e.jsx("div",{className:"flex ".concat(w?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-[85%] bg-purple-500/20 rounded-xl p-3 border border-purple-500/30",children:[e.jsx("input",{type:"text",value:d,onChange:I=>a(I.target.value),className:"w-full bg-transparent text-white outline-none text-sm mb-2",autoFocus:!0,onKeyDown:I=>{I.key==="Enter"&&be(v.id),I.key==="Escape"&&fe()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>be(v.id),className:"px-3 py-1 bg-purple-600 rounded-lg text-white text-xs hover:bg-purple-700",children:e.jsx(At,{size:12})}),e.jsx("button",{onClick:fe,className:"px-3 py-1 bg-gray-600 rounded-lg text-white text-xs hover:bg-gray-700",children:e.jsx(B,{size:12})})]})]})},v.id):e.jsx("div",{className:"flex ".concat(w?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-[85%] ".concat(w?"bg-gradient-to-br from-purple-600 to-purple-700":"bg-purple-500/20"," rounded-xl p-3 border ").concat(w?"border-purple-500/50":"border-purple-500/30"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-purple-100",children:v.sender_name}),v.edited&&e.jsx("span",{className:"text-xs text-purple-300",children:"(edited)"})]}),z&&e.jsxs("div",{className:"mb-2 p-2 bg-white/10 rounded-lg flex items-center gap-2",children:[e.jsx(ge,{size:14,className:"text-purple-200"}),e.jsx("span",{className:"text-xs text-purple-200 truncate",children:z.title})]}),e.jsx("p",{className:"text-white text-sm whitespace-pre-wrap break-words",children:v.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-purple-200",children:F(v.timestamp)}),w&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>de(v),className:"p-1 hover:bg-purple-500/30 rounded transition-colors",title:"Edit",children:e.jsx(zt,{size:12,className:"text-purple-200"})}),e.jsx("button",{onClick:()=>J(v.id),className:"p-1 hover:bg-red-500/30 rounded transition-colors",title:"Delete",children:e.jsx(le,{size:12,className:"text-red-300"})})]})]})]})},v.id)}),e.jsx("div",{ref:C})]}),e.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-purple-500/30 bg-[#2d1b4e]/80 rounded-b-2xl lg:rounded-b-3xl",children:[E&&e.jsxs("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 max-h-32 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-purple-200",children:"Select Video"}),e.jsx("button",{onClick:()=>y(!1),className:"text-purple-300 hover:text-white",children:e.jsx(B,{size:14})})]}),e.jsx("div",{className:"space-y-1",children:s.length===0?e.jsx("p",{className:"text-xs text-purple-300",children:"No videos available"}):s.map(v=>e.jsx("button",{onClick:()=>{j(v.id),y(!1)},className:"w-full text-left p-2 rounded-lg text-xs transition-colors ".concat(p===v.id?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-200 hover:bg-purple-500/20"),children:v.title},v.id))})]}),P&&e.jsx("div",{className:"mb-3 p-3 bg-purple-500/10 rounded-xl border border-purple-500/20 grid grid-cols-8 gap-1 max-h-32 overflow-y-auto",children:fr.map(v=>e.jsx("button",{onClick:()=>D(v),className:"text-xl hover:bg-purple-500/20 rounded-lg p-1 transition-colors",children:v},v))}),p&&e.jsxs("div",{className:"mb-2 p-2 bg-purple-600/20 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:14,className:"text-purple-300"}),e.jsx("span",{className:"text-xs text-purple-200 truncate",children:((r=q(p))==null?void 0:r.title)||"Video selected"})]}),e.jsx("button",{onClick:()=>j(""),className:"text-purple-300 hover:text-white",children:e.jsx(B,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(!E),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Attach Video",children:e.jsx(Tt,{size:18,className:"text-purple-300"})}),e.jsx("button",{onClick:()=>k(!P),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",title:"Emoji",children:e.jsx(Mt,{size:18,className:"text-purple-300"})}),e.jsx("input",{ref:_,type:"text",value:n,onChange:v=>x(v.target.value),onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),U())},placeholder:"Type a message...",className:"flex-1 px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white placeholder-purple-400 text-sm focus:outline-none focus:border-purple-500"}),e.jsx("button",{onClick:U,disabled:!n.trim()&&!p,className:"p-2 bg-gradient-to-br from-purple-600 to-purple-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:shadow-purple-500/50 transition-all",children:e.jsx(bt,{size:18,className:"text-white"})})]})]})]}):e.jsxs("button",{onClick:()=>o(!0),className:"fixed right-4 bottom-4 w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-700 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-purple-500/50 transition-all z-[9999] hover:scale-110",style:{zIndex:999999,position:"fixed"},children:[e.jsx(Ge,{size:24}),f>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold",children:f})]})};var yr=Object.defineProperty,vr=Object.defineProperties,jr=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,rt=(t,s,r)=>s in t?yr(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,st=(t,s)=>{for(var r in s||(s={}))wr.call(s,r)&&rt(t,r,s[r]);if(tt)for(var r of tt(s))Nr.call(s,r)&&rt(t,r,s[r]);return t},at=(t,s)=>vr(t,jr(s));const _r=({currentUser:t,onNotificationClick:s,externalUnreadCount:r=0})=>{const[l,i]=g.useState([]),[o,c]=g.useState(0),[u,n]=g.useState(!1);g.useEffect(()=>{r>0&&c(r)},[r]),g.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const x=g.useCallback(b=>{i(d=>d.some(f=>f.id===b.id)?d:[b,...d].slice(0,50)),c(d=>d+1)},[]),P=g.useCallback((b,d,a)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(b,{body:d,icon:a||"/icons/ios/128.png",badge:"/icons/ios/128.png",tag:"esther-reign-admin",requireInteraction:!1})},[]),k=g.useCallback(()=>{try{const b=window.AudioContext||window.webkitAudioContext;if(!b)return;const d=new b;d.state==="suspended"&&d.resume();const a=d.createOscillator(),f=d.createGain();a.connect(f),f.connect(d.destination),a.frequency.value=800,a.type="sine",f.gain.setValueAtTime(.3,d.currentTime),f.gain.exponentialRampToValueAtTime(.01,d.currentTime+.2),a.start(d.currentTime),a.stop(d.currentTime+.2),a.onended=()=>{d.close()}}catch(b){console.log("Audio notification error:",b);try{const d=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGW57+OeTQ8MT6Xh8LZjHAY4kdfyzHksBSR3x/DdkEAKFF606euoVRQKRp/g8r5sIQUrgc7y2Yk2CBhlue/jnk0PDE+l4fC2YxwGOJHX8sx5LAUkd8fw3ZBAC");d.volume=.3,d.play().catch(()=>{})}catch(d){console.log("Fallback audio failed")}}},[]);g.useEffect(()=>{if(!t)return;const b=S.channel("admin_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"admin_logins"},d=>{const a=d.new;if(a.user_id!==t.id){const f=a.user_role==="artist"?"Esther Reign":"Editor",h={id:"login_".concat(Date.now()),type:"login",title:"".concat(f," logged in"),message:"".concat(f," just logged into the admin panel"),timestamp:new Date,read:!1,userId:a.user_id};x(h),k(),P("".concat(f," logged in"),"".concat(f," just logged into the admin panel"))}}).subscribe();return()=>{S.removeChannel(b)}},[t,k,P,x]),g.useEffect(()=>{if(!t)return;const b=S.channel("chat_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},d=>{const a=d.new;if(a.sender_id!==t.id){const f=a.sender_name||"Someone",h={id:"message_".concat(a.id),type:"message",title:"New message from ".concat(f),message:a.message.substring(0,50)+(a.message.length>50?"...":""),timestamp:new Date(a.timestamp),read:!1,userId:a.sender_id};x(h),k(),P("New message from ".concat(f),a.message.substring(0,100))}}).subscribe();return()=>{S.removeChannel(b)}},[t,k,P,x]);const E=b=>{i(d=>d.map(a=>a.id===b?at(st({},a),{read:!0}):a)),c(d=>Math.max(0,d-1))},y=()=>{i(b=>b.map(d=>at(st({},d),{read:!0}))),c(0)},p=b=>{i(d=>{const a=d.find(f=>f.id===b);return a&&!a.read&&c(f=>Math.max(0,f-1)),d.filter(f=>f.id!==b)})},j=b=>{const a=new Date().getTime()-b.getTime(),f=Math.floor(a/6e4);return f<1?"Just now":f<60?"".concat(f,"m ago"):f<1440?"".concat(Math.floor(f/60),"h ago"):b.toLocaleDateString()},$=b=>{switch(b){case"login":return e.jsx(Ve,{size:18,className:"text-blue-400"});case"message":return e.jsx(Ge,{size:18,className:"text-purple-400"});default:return e.jsx(Te,{size:18,className:"text-green-400"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>n(!u),className:"relative p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:[e.jsx(Te,{size:20,className:"text-purple-300"}),o>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold text-white",children:o>9?"9+":o})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute right-0 top-12 w-80 md:w-96 bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-2xl border border-purple-500/30 z-50 max-h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/30",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Notifications"}),o>0&&e.jsx("button",{onClick:y,className:"text-xs text-purple-300 hover:text-purple-200",children:"Mark all as read"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:l.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Te,{size:48,className:"mx-auto mb-4 text-purple-400 opacity-50"}),e.jsx("p",{className:"text-purple-300",children:"No notifications"})]}):e.jsx("div",{className:"divide-y divide-purple-500/20",children:l.map(b=>e.jsx("div",{className:"p-4 hover:bg-purple-500/10 transition-colors cursor-pointer ".concat(b.read?"":"bg-purple-500/5"),onClick:()=>{E(b.id),s==null||s(b),n(!1)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:$(b.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-white",children:b.title}),!b.read&&e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full flex-shrink-0 mt-1"})]}),e.jsx("p",{className:"text-xs text-purple-300 mt-1 line-clamp-2",children:b.message}),e.jsx("p",{className:"text-xs text-purple-400 mt-2",children:j(b.timestamp)})]}),e.jsx("button",{onClick:d=>{d.stopPropagation(),p(b.id)},className:"flex-shrink-0 p-1 hover:bg-purple-500/20 rounded transition-colors",children:e.jsx(B,{size:14,className:"text-purple-400"})})]})},b.id))})})]})]})]})};var kr=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const Sr=(t,s)=>kr(void 0,null,function*(){if(!t.type.startsWith("video/"))throw new Error("Invalid file type. Please upload a video file.");const r=200*1024*1024;if(t.size>r)throw new Error("File size exceeds 200MB limit. Your file is ".concat((t.size/(1024*1024)).toFixed(2),"MB"));return new Promise(l=>{let i=0;const o=setInterval(()=>{if(i+=5,s==null||s(i),i>=100){clearInterval(o);const c=URL.createObjectURL(t);l(c)}},100)})});var $r=Object.defineProperty,Pr=Object.defineProperties,Cr=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,lt=(t,s,r)=>s in t?$r(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,ne=(t,s)=>{for(var r in s||(s={}))Nt.call(s,r)&&lt(t,r,s[r]);if(Ce)for(var r of Ce(s))_t.call(s,r)&&lt(t,r,s[r]);return t},oe=(t,s)=>Pr(t,Cr(s)),Er=(t,s)=>{var r={};for(var l in t)Nt.call(t,l)&&s.indexOf(l)<0&&(r[l]=t[l]);if(t!=null&&Ce)for(var l of Ce(t))s.indexOf(l)<0&&_t.call(t,l)&&(r[l]=t[l]);return r},ce=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const Or=({onVideoChange:t})=>{const[s,r]=g.useState([]),[l,i]=g.useState(null),[o,c]=g.useState(!1),[u,n]=g.useState(!0),[x,P]=g.useState(null),[k,E]=g.useState("link"),[y,p]=g.useState(!1),[j,$]=g.useState(0),b=g.useRef(null);g.useEffect(()=>{d()},[]);const d=()=>ce(void 0,null,function*(){n(!0);const _=yield ar();r(_),n(!1)}),a=()=>{const _={id:"temp_".concat(Date.now()),title:"",video_link:"",thumbnail_url:"",status:"pending",template_type:"default",order_index:s.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};i(_),c(!0)},f=()=>ce(void 0,null,function*(){if(l)try{if(o){const _=l,{id:A,created_at:R,updated_at:W}=_,U=Er(_,["id","created_at","updated_at"]),J=yield lr(U);J&&r([...s,J])}else(yield nr(l.id,l))&&r(s.map(A=>A.id===l.id?l:A));i(null),c(!1),t==null||t(),yield d()}catch(_){console.error("Error saving video:",_),alert("Failed to save video. Please try again.")}}),h=_=>ce(void 0,null,function*(){if(confirm("Are you sure you want to delete this video?"))try{(yield or(_))&&(r(s.filter(R=>R.id!==_)),t==null||t())}catch(A){console.error("Error deleting video:",A),alert("Failed to delete video. Please try again.")}}),m=_=>{P(_)},N=(_,A)=>{if(_.preventDefault(),x===null||x===A)return;const R=[...s],W=R[x];R.splice(x,1),R.splice(A,0,W);const U=R.map((J,de)=>oe(ne({},J),{order_index:de}));r(U),P(A)},C=()=>ce(void 0,null,function*(){if(x!==null)try{yield ir(s),t==null||t()}catch(_){console.error("Error reordering videos:",_),yield d()}P(null)});return u?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"p-6 bg-[#2d1b4e]/50 backdrop-blur-xl rounded-2xl border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Video Management"}),e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[e.jsx(He,{size:20}),"Add Video"]})]}),e.jsxs("div",{className:"space-y-4",children:[s.map((_,A)=>e.jsx("div",{draggable:!0,onDragStart:()=>m(A),onDragOver:R=>N(R,A),onDragEnd:C,className:"p-4 border border-purple-500/20 rounded-lg cursor-move transition-all bg-purple-500/10 hover:bg-purple-500/20 ".concat(x===A?"opacity-50":""),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx(Rt,{size:20,className:"text-purple-300 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-white truncate",children:_.title||"Untitled Video"}),e.jsxs("p",{className:"text-sm text-purple-300 truncate",children:["Status: ",_.status," â€¢ Order: ",_.order_index]}),_.video_link&&e.jsxs("a",{href:_.video_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-purple-400 hover:text-purple-300 transition-colors mt-1",children:[e.jsx(Lt,{size:14}),"View Video"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-8 sm:ml-0",children:[e.jsx("button",{onClick:()=>{i(_),c(!1)},className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:e.jsx(Ie,{size:16,className:"text-purple-300"})}),e.jsx("button",{onClick:()=>h(_.id),className:"p-2 rounded hover:bg-red-500/20 transition-colors",children:e.jsx(le,{size:16,className:"text-red-400"})})]})]})},_.id)),s.length===0&&e.jsx("div",{className:"text-center py-8 text-purple-300",children:'No videos yet. Click "Add Video" to get started.'})]}),l&&he.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:o?"Add New Video":"Edit Video"}),e.jsx("button",{onClick:()=>{i(null),c(!1)},className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:e.jsx(B,{size:20,className:"text-purple-300"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Title *"}),e.jsx("input",{type:"text",value:l.title,onChange:_=>i(oe(ne({},l),{title:_.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"Enter video title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-purple-200",children:"Upload Method"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{type:"button",onClick:()=>E("link"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all ".concat(k==="link"?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[e.jsx(qt,{size:16}),"Link"]}),e.jsxs("button",{type:"button",onClick:()=>E("file"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg transition-all ".concat(k==="file"?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:[e.jsx(me,{size:16}),"Upload File (Max 200MB)"]})]})]}),k==="link"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video Link"}),e.jsx("input",{type:"url",value:l.video_link||"",onChange:_=>i(oe(ne({},l),{video_link:_.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://youtube.com/watch?v=... or https://cloudinary.com/..."})]}),k==="file"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Video File (Max 200MB)"}),e.jsx("input",{ref:b,type:"file",accept:"video/*",onChange:_=>ce(void 0,null,function*(){var A;const R=(A=_.target.files)==null?void 0:A[0];if(!R)return;const W=200*1024*1024;if(R.size>W){alert("File size exceeds 200MB limit. Your file is ".concat((R.size/(1024*1024)).toFixed(2),"MB"));return}p(!0),$(0);try{const U=yield Sr(R,J=>{$(J)});i(oe(ne({},l),{video_link:U})),p(!1),$(0),alert("Video uploaded successfully! (Note: Using local preview URL)")}catch(U){console.error("Upload error:",U),alert(U.message||"Failed to upload video"),p(!1),$(0)}}),className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>{var _;return(_=b.current)==null?void 0:_.click()},disabled:y,className:"w-full px-4 py-3 border-2 border-dashed rounded-lg transition-all ".concat(y?"border-purple-400 bg-purple-500/10":"border-purple-500/30 bg-purple-500/10 hover:border-purple-500 hover:bg-purple-500/20"),children:y?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-300",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-300"}),e.jsxs("span",{children:["Uploading... ",j,"%"]})]}),e.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden bg-purple-500/20",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-700 transition-all duration-300",style:{width:"".concat(j,"%")}})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(me,{size:24,className:"text-purple-300"}),e.jsx("span",{className:"text-purple-200",children:"Click to select video file"}),e.jsx("span",{className:"text-xs text-purple-400",children:"Max size: 200MB"})]})}),l.video_link&&k==="file"&&e.jsxs("p",{className:"mt-2 text-xs text-purple-400",children:["Video URL: ",l.video_link.substring(0,50),"..."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Thumbnail URL"}),e.jsx("input",{type:"url",value:l.thumbnail_url||"",onChange:_=>i(oe(ne({},l),{thumbnail_url:_.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white placeholder-purple-400",placeholder:"https://img.youtube.com/vi/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),e.jsxs("select",{value:l.status,onChange:_=>i(oe(ne({},l),{status:_.target.value})),className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white",children:[e.jsx("option",{value:"pending",className:"bg-[#2d1b4e]",children:"Pending"}),e.jsx("option",{value:"completed",className:"bg-[#2d1b4e]",children:"Completed"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{i(null),c(!1)},className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg transition-colors text-purple-200 hover:bg-purple-500/20",children:"Cancel"}),e.jsxs("button",{onClick:f,disabled:!l.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{size:16}),o?"Add Video":"Save Changes"]})]})]})})}),document.body)]})},Dr=({videoUpdates:t,loginFrequency:s,siteVisits:r})=>{const[l,i]=g.useState(!1);g.useEffect(()=>{setTimeout(()=>i(!0),100)},[]);const o=Math.max(...t.map(u=>u.value),...s.map(u=>u.value),...r.map(u=>u.value),1),c=(u,n,x,P)=>{if(u.length===0)return e.jsx("div",{className:"flex items-center justify-center h-48 text-purple-300",children:e.jsx("p",{children:"No data available"})});const k=u.map((p,j)=>{const $=j/(u.length-1||1)*100,b=100-p.value/o*80;return{x:$,y:b}}),E=k.map((p,j)=>"".concat(j===0?"M":"L"," ").concat(p.x,",").concat(p.y)).join(" "),y="".concat(E," L ").concat(k[k.length-1].x,",100 L 0,100 Z");return e.jsxs("div",{className:"relative h-48",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:x,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:n,stopOpacity:"0.4"}),e.jsx("stop",{offset:"100%",stopColor:n,stopOpacity:"0.05"})]})}),e.jsx("path",{d:y,fill:"url(#".concat(x,")"),className:l?"animate-fade-in":"opacity-0",style:{animation:l?"drawPath 1.5s ease-out forwards":"none",strokeDasharray:l?"0":"1000",strokeDashoffset:l?"0":"1000"}}),e.jsx("path",{d:E,fill:"none",stroke:n,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",className:l?"animate-fade-in":"opacity-0",style:{animation:l?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:l?"1000":"0",strokeDashoffset:l?"0":"1000"}}),k.map((p,j)=>e.jsxs("g",{children:[e.jsx("circle",{cx:p.x,cy:p.y,r:"1.5",fill:n,className:l?"animate-scale-in":"opacity-0",style:{animation:l?"fadeInScale 0.3s ease-out ".concat(.5+j*.1,"s forwards"):"none"}}),e.jsx("circle",{cx:p.x,cy:p.y,r:"3",fill:n,fillOpacity:"0.2",className:l?"animate-pulse":"opacity-0",style:{animation:l?"fadeInScale 0.3s ease-out ".concat(.5+j*.1,"s forwards, pulse 2s ease-in-out infinite ").concat(1+j*.1,"s"):"none"}})]},j))]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between text-xs text-purple-300 px-2",children:u.map((p,j)=>{const b=new Date(p.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsx("span",{className:"transform -rotate-45 origin-left",style:{opacity:l?1:0,transition:"opacity 0.3s ".concat(.8+j*.1,"s")},children:b},j)})})]})};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        @keyframes pulse {\n          0%, 100% {\n            opacity: 0.2;\n            transform: scale(1);\n          }\n          50% {\n            opacity: 0.4;\n            transform: scale(1.2);\n          }\n        }\n      "}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:e.jsx(ge,{size:20,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Video Updates"}),e.jsx("p",{className:"text-xs text-purple-300",children:"Last 7 days"})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-2xl font-black text-white",children:t.reduce((u,n)=>u+n.value,0)})}),c(t,"#9333ea","gradient-purple")]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Vt,{size:20,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Login Frequency"}),e.jsx("p",{className:"text-xs text-blue-300",children:"Last 7 days"})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-2xl font-black text-white",children:s.reduce((u,n)=>u+n.value,0)})}),c(s,"#3b82f6","gradient-blue")]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-2xl p-6 border border-green-500/20 md:col-span-2 lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(yt,{size:20,className:"text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Site Visits"}),e.jsx("p",{className:"text-xs text-green-300",children:"Last 7 days"})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-2xl font-black text-white",children:r.reduce((u,n)=>u+n.value,0)})}),c(r,"#10b981","gradient-green")]})]})]})};var Ir=Object.defineProperty,Ar=Object.defineProperties,zr=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,ot=(t,s,r)=>s in t?Ir(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,T=(t,s)=>{for(var r in s||(s={}))Tr.call(s,r)&&ot(t,r,s[r]);if(nt)for(var r of nt(s))Mr.call(s,r)&&ot(t,r,s[r]);return t},M=(t,s)=>Ar(t,zr(s)),ye=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const Rr=()=>{const{profilePicture:t,updateProfilePicture:s}=Be(),[r,l]=g.useState({hero_image:"/Estherreign.jpg",about_image:"/IMG-20250915-WA0023.jpg",about_text:"I am an emerging gospel artist with a deep passion for worship and praise...",phone:"+234 818 019 4269",email:"contact@estherreign.com",location:"Lagos, Nigeria",social_links:{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),[i,o]=g.useState(""),[c,u]=g.useState(!1),[n,x]=g.useState({hero:!1,about:!1}),P=p=>ye(void 0,null,function*(){var j;const $=(j=p.target.files)==null?void 0:j[0];if($){if($.size>5*1024*1024){alert("Image size should be less than 5MB");return}if(!$.type.startsWith("image/")){alert("Please select a valid image file (JPG, PNG, etc.)");return}try{u(!0);const b=yield Je($,"profile");if(!b){alert("Upload failed: No URL returned. Please check your Supabase Storage configuration.");return}s(b);const d=localStorage.getItem("admin_session");if(d){const a=JSON.parse(d);a.user.profilePicture=b,localStorage.setItem("admin_session",JSON.stringify(a))}alert("Profile picture updated successfully!")}catch(b){console.error("Error uploading profile picture:",b);const d=(b==null?void 0:b.message)||(b==null?void 0:b.toString())||"Unknown error occurred";alert("Upload failed: ".concat(d,'\n\nPlease check:\n1. Supabase Storage bucket "media" exists\n2. Bucket has public access enabled\n3. RLS policies allow uploads'))}finally{u(!1)}}});g.useEffect(()=>{k()},[]);const k=()=>ye(void 0,null,function*(){const{getSettings:p}=yield ke(()=>import("./supabaseData-ByrMHVQX.js"),__vite__mapDeps([0,1,2,3,4])),j=yield p();j&&(l({hero_image:j.hero_image||"/Estherreign.jpg",about_image:j.about_image||"/IMG-20250915-WA0023.jpg",about_text:j.about_text||"I am an emerging gospel artist with a deep passion for worship and praise...",phone:j.contact_phone||"+234 818 019 4269",email:j.contact_email||"contact@estherreign.com",location:"Lagos, Nigeria",social_links:j.social_links||{instagram:"https://instagram.com/estherreign",youtube:"https://youtube.com/@estherreign",tiktok:"https://tiktok.com/@estherreign",facebook:"https://facebook.com/estherreign",twitter:"https://twitter.com/estherreign"}}),o(j.hero_description||"Lifting voices in worship through powerful gospel music. Experience the presence of God through every note."))}),E=()=>ye(void 0,null,function*(){try{const{updateSettings:p}=yield ke(()=>import("./supabaseData-ByrMHVQX.js"),__vite__mapDeps([0,1,2,3,4]));(yield p({hero_image:r.hero_image,hero_description:i,about_image:r.about_image,about_text:r.about_text,contact_email:r.email,contact_phone:r.phone,social_links:r.social_links}))?(alert("Settings saved successfully! Changes will appear immediately."),window.dispatchEvent(new Event("storage"))):alert("Failed to save settings. Please try again.")}catch(p){console.error("Error saving settings:",p),alert("Error saving settings. Please check console for details.")}}),y=(p,j)=>ye(void 0,null,function*(){var $;const b=($=j.target.files)==null?void 0:$[0];if(b){if(b.size>5*1024*1024){alert("Image size should be less than 5MB");return}try{x(a=>M(T({},a),{[p]:!0}));const d=yield Je(b,p);if(!d){alert("Upload failed. Please try again.");return}l(p==="hero"?M(T({},r),{hero_image:d}):M(T({},r),{about_image:d})),alert('Image uploaded! Remember to hit "Save All Settings".')}catch(d){console.error("Error uploading image:",d),alert("Upload failed. Please try again.")}finally{x(d=>M(T({},d),{[p]:!1}))}}});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black mb-2 text-white",children:"Site Settings"}),e.jsx("p",{className:"text-gray-400",children:"Manage your website content and appearance"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-blue-500/10 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/20",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative",children:t?e.jsx("img",{src:t,alt:"Profile",className:"w-24 h-24 rounded-xl object-cover shadow-lg"}):e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-black text-4xl",children:"E"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Upload Profile Picture"}),e.jsx("input",{type:"file",accept:"image/*",disabled:c,onChange:P,className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/20 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-gradient-to-r file:from-purple-600 file:to-blue-600 file:text-white hover:file:shadow-lg file:cursor-pointer ".concat(c?"opacity-60 cursor-not-allowed":"")}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:c?"Uploading image...":"Max size: 5MB. Recommended: Square image (500x500px)"})]})]})]}),e.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Images"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Image"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"file",accept:"image/*",disabled:n.hero,onChange:p=>y("hero",p),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer ".concat(n.hero?"opacity-60 cursor-not-allowed":"")}),e.jsx("input",{type:"url",value:r.hero_image.startsWith("data:")?"":r.hero_image,onChange:p=>l(M(T({},r),{hero_image:p.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),r.hero_image&&e.jsx("img",{src:r.hero_image,alt:"Hero",className:"mt-2 w-full h-32 object-cover rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Image"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"file",accept:"image/*",disabled:n.about,onChange:p=>y("about",p),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white hover:file:bg-purple-700 file:cursor-pointer ".concat(n.about?"opacity-60 cursor-not-allowed":"")}),e.jsx("input",{type:"url",value:r.about_image.startsWith("data:")?"":r.about_image,onChange:p=>l(M(T({},r),{about_image:p.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"Or paste image URL..."})]}),r.about_image&&e.jsx("img",{src:r.about_image,alt:"About",className:"mt-2 w-full h-32 object-cover rounded-lg"})]})]})]}),e.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Hero Section"}),e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Hero Description"}),e.jsx("textarea",{value:i,onChange:p=>o(p.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Brief description for hero section..."})]}),e.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"About Section"}),e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"About Text"}),e.jsx("textarea",{value:r.about_text,onChange:p=>l(M(T({},r),{about_text:p.target.value})),rows:6,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white resize-none",placeholder:"Tell your story..."})]}),e.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Contact Information"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Phone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:p=>l(M(T({},r),{phone:p.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"+234..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:p=>l(M(T({},r),{email:p.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"contact@..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Location"}),e.jsx("input",{type:"text",value:r.location,onChange:p=>l(M(T({},r),{location:p.target.value})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"City, Country"})]})]})]}),e.jsxs("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Social Media Links"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Instagram"}),e.jsx("input",{type:"url",value:r.social_links.instagram,onChange:p=>l(M(T({},r),{social_links:M(T({},r.social_links),{instagram:p.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"YouTube"}),e.jsx("input",{type:"url",value:r.social_links.youtube,onChange:p=>l(M(T({},r),{social_links:M(T({},r.social_links),{youtube:p.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://youtube.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"TikTok"}),e.jsx("input",{type:"url",value:r.social_links.tiktok,onChange:p=>l(M(T({},r),{social_links:M(T({},r.social_links),{tiktok:p.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://tiktok.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Facebook"}),e.jsx("input",{type:"url",value:r.social_links.facebook,onChange:p=>l(M(T({},r),{social_links:M(T({},r.social_links),{facebook:p.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://facebook.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Twitter"}),e.jsx("input",{type:"url",value:r.social_links.twitter,onChange:p=>l(M(T({},r),{social_links:M(T({},r.social_links),{twitter:p.target.value})})),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-purple-500 text-white",placeholder:"https://twitter.com/..."})]})]})]}),e.jsxs("button",{onClick:E,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 flex items-center justify-center gap-2",children:[e.jsx(ie,{size:20}),"Save All Settings"]})]})]})};me,(()=>{const t=localStorage.getItem("current_sync_code")||Math.random().toString(36).substring(2,8).toUpperCase();return localStorage.getItem("current_sync_code")||localStorage.setItem("current_sync_code",t),"".concat(window.location.origin).concat(window.location.pathname,"?sync=").concat(t)})(),me,me;var Lr=Object.defineProperty,qr=Object.defineProperties,Vr=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable,dt=(t,s,r)=>s in t?Lr(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,Me=(t,s)=>{for(var r in s||(s={}))Fr.call(s,r)&&dt(t,r,s[r]);if(it)for(var r of it(s))Br.call(s,r)&&dt(t,r,s[r]);return t},Re=(t,s)=>qr(t,Vr(s)),ue=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const Ur=()=>{const[t,s]=g.useState([]),[r,l]=g.useState(!0),[i,o]=g.useState(null),[c,u]=g.useState(""),[n,x]=g.useState("all"),[P,k]=g.useState(0);g.useEffect(()=>{E()},[]);const E=()=>ue(void 0,null,function*(){l(!0);try{const{data:h,error:m}=yield S.from("fan_messages").select("*").order("created_at",{ascending:!1});if(m)throw m;s(h||[])}catch(h){console.error("Error loading messages:",h)}l(!1)}),y=h=>ue(void 0,null,function*(){try{const{error:m}=yield S.from("fan_messages").update({status:"read"}).eq("id",h);if(m)throw m;s(t.map(N=>N.id===h?Re(Me({},N),{status:"read"}):N))}catch(m){console.error("Error marking as read:",m)}}),p=h=>ue(void 0,null,function*(){try{const{error:m}=yield S.from("fan_messages").update({is_prayed_for:!0}).eq("id",h);if(m)throw m;s(t.map(N=>N.id===h?Re(Me({},N),{is_prayed_for:!0}):N))}catch(m){console.error("Error marking as prayed:",m)}}),j=()=>ue(void 0,null,function*(){if(!(!i||!c.trim()))try{const{error:h}=yield S.from("fan_messages").update({status:"responded",response:c,responded_at:new Date().toISOString()}).eq("id",i.id);if(h)throw h;s(t.map(m=>m.id===i.id?Re(Me({},m),{status:"responded",response:c,responded_at:new Date().toISOString()}):m)),o(null),u(""),alert("Response sent!")}catch(h){console.error("Error sending response:",h),alert("Failed to send response")}}),$=h=>({prayer_request:Ft,testimony:Bt,song_request:Se,booking_inquiry:We,general:Ne})[h]||Ne,b=h=>({prayer_request:"pink",testimony:"green",song_request:"purple",booking_inquiry:"blue",general:"gray"})[h]||"gray",d=h=>ue(void 0,null,function*(){if(confirm("Are you sure you want to delete this message? This action cannot be undone."))try{const{error:m}=yield S.from("fan_messages").delete().eq("id",h);if(m)throw m;s(t.filter(N=>N.id!==h)),(i==null?void 0:i.id)===h&&o(null),alert("Message deleted successfully")}catch(m){console.error("Error deleting message:",m),alert("Failed to delete message")}}),a=t.filter(h=>n==="all"?!0:n==="unread"?h.status==="unread":h.message_type===n),f=t.filter(h=>h.status==="unread").length;return r?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Fan Messages"}),e.jsxs("p",{className:"text-sm text-purple-300",children:[f," unread messages"]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 w-full md:w-auto scrollbar-hide",children:["all","unread","prayer_request","testimony"].map(h=>e.jsx("button",{onClick:()=>x(h),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all whitespace-nowrap ".concat(n===h?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:h.replace("_"," ")},h))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.map(h=>{const m=$(h.message_type),N=b(h.message_type);return e.jsx("div",{className:"p-4 md:p-6 rounded-xl border transition-all cursor-pointer ".concat(h.status==="unread"?"bg-purple-900/30 border-purple-500/50":"bg-purple-500/10 border-purple-500/20"),onClick:()=>{const C=document.querySelector(".flex-1.overflow-y-auto");C&&k(C.scrollTop),o(h),h.status==="unread"&&y(h.id)},children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("div",{className:"p-3 rounded-lg bg-".concat(N,"-100 flex-shrink-0"),children:e.jsx(m,{size:24,className:"text-".concat(N,"-600")})}),e.jsxs("div",{className:"sm:hidden flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white line-clamp-1",children:h.subject||"No Subject"}),e.jsx("p",{className:"text-xs text-purple-400",children:new Date(h.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex-1 min-w-0 w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize bg-".concat(N,"-100 text-").concat(N,"-700"),children:h.message_type.replace("_"," ")}),h.status==="unread"&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"New"}),h.is_prayed_for&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",children:"ðŸ™ Prayed"}),h.is_featured&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-700",children:"â­ Featured"})]}),e.jsx("h3",{className:"hidden sm:block text-lg font-bold mb-1 text-white",children:h.subject||"No Subject"}),e.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["From: ",h.is_anonymous?"Anonymous":h.from_name]}),e.jsx("p",{className:"text-sm line-clamp-2 text-purple-200",children:h.message}),e.jsx("p",{className:"hidden sm:block text-xs mt-2 text-purple-400",children:new Date(h.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex sm:flex-col gap-2 w-full sm:w-auto mt-2 sm:mt-0 justify-end",children:[h.message_type==="prayer_request"&&!h.is_prayed_for&&e.jsx("button",{onClick:C=>{C.stopPropagation(),p(h.id)},className:"flex-1 sm:flex-none px-3 py-2 sm:py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 text-center",children:"Mark Prayed"}),e.jsx("button",{onClick:C=>{C.stopPropagation(),d(h.id)},className:"p-2 rounded hover:bg-red-500/20 transition-colors self-end",title:"Delete message",children:e.jsx(le,{size:18,className:"text-red-400 hover:text-red-300"})})]})]})},h.id)}),a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ne,{size:48,className:"mx-auto mb-4 text-purple-400"}),e.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No messages yet"})]})]})]}),i&&he.createPortal(e.jsx("div",{className:"message-modal-overlay fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] overflow-y-auto",children:e.jsx("div",{className:"flex justify-center",style:{paddingTop:"".concat(P,"px"),paddingBottom:"2rem"},children:e.jsx("div",{className:"w-full max-w-2xl bg-[#2d1b4e] backdrop-blur-xl rounded-2xl shadow-xl border border-purple-500/30",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:i.subject||"Message Details"}),e.jsx("button",{onClick:()=>o(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:e.jsx(B,{size:20,className:"text-purple-300"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"From"}),e.jsxs("p",{className:"text-white",children:[i.is_anonymous?"Anonymous":i.from_name,i.from_email&&" (".concat(i.from_email,")")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Message"}),e.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:i.message})]}),i.response&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Your Response"}),e.jsx("p",{className:"whitespace-pre-wrap text-purple-100",children:i.response})]}),i.status!=="responded"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Send Response"}),e.jsx("textarea",{value:c,onChange:h=>u(h.target.value),rows:4,className:"w-full px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg resize-none text-white placeholder-purple-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Type your response..."}),e.jsxs("button",{onClick:j,disabled:!c.trim(),className:"mt-2 flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50",children:[e.jsx(bt,{size:16}),"Send Response"]})]})]}),e.jsx("div",{className:"flex gap-3 mt-6",children:e.jsx("button",{onClick:()=>o(null),className:"flex-1 px-4 py-2 border border-purple-500/30 rounded-lg text-purple-200 hover:bg-purple-500/20 transition-colors",children:"Close"})})]})})})}),document.body)]})};var Gr=Object.defineProperty,Hr=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,Jr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable,ut=(t,s,r)=>s in t?Gr(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,te=(t,s)=>{for(var r in s||(s={}))Jr.call(s,r)&&ut(t,r,s[r]);if(ct)for(var r of ct(s))Yr.call(s,r)&&ut(t,r,s[r]);return t},re=(t,s)=>Hr(t,Wr(s)),pe=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const Qr=()=>{const[t,s]=g.useState([]),[r,l]=g.useState(!0),[i,o]=g.useState(null),[c,u]=g.useState("all"),[n,x]=g.useState("votes");g.useEffect(()=>{P()},[]);const P=()=>pe(void 0,null,function*(){l(!0);try{const{data:a,error:f}=yield S.from("song_requests").select("*").order("votes",{ascending:!1});if(f)throw f;s(a||[])}catch(a){console.error("Error loading song requests:",a)}l(!1)}),k=(a,f)=>pe(void 0,null,function*(){try{const{error:h}=yield S.from("song_requests").update({status:f,updated_at:new Date().toISOString()}).eq("id",a);if(h)throw h;s(t.map(m=>m.id===a?re(te({},m),{status:f}):m))}catch(h){console.error("Error updating status:",h)}}),E=a=>pe(void 0,null,function*(){try{const f=t.find(m=>m.id===a);if(!f)return;const{error:h}=yield S.from("song_requests").update({votes:f.votes+1,priority_score:f.priority_score+1,updated_at:new Date().toISOString()}).eq("id",a);if(h)throw h;s(t.map(m=>m.id===a?re(te({},m),{votes:m.votes+1,priority_score:m.priority_score+1}):m))}catch(f){console.error("Error voting:",f)}}),y=()=>pe(void 0,null,function*(){if(i)try{const{error:a}=yield S.from("song_requests").update(i).eq("id",i.id);if(a)throw a;s(t.map(f=>f.id===i.id?i:f)),o(null)}catch(a){console.error("Error saving request:",a),alert("Failed to save request")}}),p=a=>pe(void 0,null,function*(){if(confirm("Delete this song request?"))try{const{error:f}=yield S.from("song_requests").delete().eq("id",a);if(f)throw f;s(t.filter(h=>h.id!==a))}catch(f){console.error("Error deleting request:",f)}}),j=a=>({new:"blue",considering:"yellow",planned:"purple",recording:"orange",completed:"green",declined:"red"})[a]||"gray",$=a=>a==="easy"?"text-green-500":a==="medium"?"text-yellow-500":a==="hard"?"text-red-500":"text-gray-500",d=[...t.filter(a=>c==="all"?!0:a.status===c)].sort((a,f)=>n==="votes"?f.votes-a.votes:n==="priority"?f.priority_score-a.priority_score:new Date(f.created_at).getTime()-new Date(a.created_at).getTime());return r?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Song Requests"}),e.jsx("p",{className:"text-sm text-purple-300",children:"Manage fan song requests"})]}),e.jsx("div",{className:"flex gap-2",children:["all","new","considering","planned"].map(a=>e.jsx("button",{onClick:()=>u(a),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all ".concat(c===a?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 border border-purple-500/30"),children:a},a))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-sm text-purple-300",children:"Sort by:"}),["votes","recent","priority"].map(a=>e.jsx("button",{onClick:()=>x(a),className:"px-3 py-1 rounded text-sm font-medium capitalize ".concat(n===a?"bg-purple-600 text-white":"bg-purple-500/10 text-purple-300 border border-purple-500/30"),children:a},a))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.map(a=>e.jsxs("div",{className:"p-6 rounded-xl border transition-all bg-black/40 backdrop-blur-xl border-purple-500/30 hover:border-purple-500/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Se,{size:20,className:"text-purple-500"}),e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize bg-".concat(j(a.status),"-100 text-").concat(j(a.status),"-700"),children:a.status}),a.difficulty&&e.jsx("span",{className:"text-xs font-medium ".concat($(a.difficulty)),children:a.difficulty})]}),e.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:a.song_title}),a.original_artist&&e.jsxs("p",{className:"text-sm mb-2 text-purple-300",children:["by ",a.original_artist]}),a.reason&&e.jsxs("p",{className:"text-sm mb-3 text-purple-200",children:['"',a.reason,'"']}),a.requested_by_name&&e.jsxs("p",{className:"text-xs mb-2 text-purple-400",children:["Requested by ",a.requested_by_name]}),a.genre_tags&&a.genre_tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:a.genre_tags.map((f,h)=>e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",children:f},h))}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>E(a.id),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700",children:[e.jsx(Ut,{size:16}),e.jsx("span",{className:"font-bold",children:a.votes}),e.jsx("span",{children:"votes"})]}),a.priority_score>0&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-yellow-600",children:[e.jsx(Gt,{size:16}),e.jsx("span",{children:a.priority_score})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>o(a),className:"p-2 rounded hover:bg-purple-500/20 transition-colors",children:e.jsx(Ie,{size:16,className:"text-purple-300"})}),e.jsx("button",{onClick:()=>p(a.id),className:"p-2 rounded hover:bg-red-100",children:e.jsx(le,{size:16,className:"text-red-600"})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[a.status==="new"&&e.jsx("button",{onClick:()=>k(a.id,"considering"),className:"flex-1 px-3 py-1 text-xs bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Consider"}),a.status==="considering"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(a.id,"planned"),className:"flex-1 px-3 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:"Plan"}),e.jsx("button",{onClick:()=>k(a.id,"declined"),className:"flex-1 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Decline"})]}),a.status==="planned"&&e.jsx("button",{onClick:()=>k(a.id,"recording"),className:"flex-1 px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Start Recording"}),a.status==="recording"&&e.jsx("button",{onClick:()=>k(a.id,"completed"),className:"flex-1 px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Complete"})]})]},a.id)),d.length===0&&e.jsxs("div",{className:"col-span-2 text-center py-12",children:[e.jsx(Se,{size:48,className:"mx-auto mb-4 text-purple-500/50"}),e.jsx("p",{className:"text-lg font-medium text-purple-300",children:"No song requests yet"})]})]}),i&&he.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-lg bg-black/95 backdrop-blur-xl rounded-lg shadow-xl max-h-[90vh] overflow-y-auto border border-purple-500/30",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Edit Song Request"}),e.jsx("button",{onClick:()=>o(null),className:"p-1 rounded hover:bg-purple-500/20 transition-colors",children:e.jsx(B,{size:20,className:"text-purple-300"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Status"}),e.jsxs("select",{value:i.status,onChange:a=>o(re(te({},i),{status:a.target.value})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"considering",children:"Considering"}),e.jsx("option",{value:"planned",children:"Planned"}),e.jsx("option",{value:"recording",children:"Recording"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"declined",children:"Declined"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Difficulty"}),e.jsxs("select",{value:i.difficulty||"",onChange:a=>o(re(te({},i),{difficulty:a.target.value})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Not set"}),e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Priority Score"}),e.jsx("input",{type:"number",value:i.priority_score,onChange:a=>o(re(te({},i),{priority_score:Number(a.target.value)})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Estimated Production Days"}),e.jsx("input",{type:"number",value:i.estimated_production_days||"",onChange:a=>o(re(te({},i),{estimated_production_days:Number(a.target.value)||void 0})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., 7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"YouTube Reference"}),e.jsx("input",{type:"url",value:i.youtube_reference_url||"",onChange:a=>o(re(te({},i),{youtube_reference_url:a.target.value})),className:"w-full px-3 py-2 border rounded-lg bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"https://youtube.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-purple-200",children:"Notes"}),e.jsx("textarea",{value:i.notes||"",onChange:a=>o(re(te({},i),{notes:a.target.value})),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none bg-black/50 border-purple-500/30 text-white focus:outline-none focus:border-purple-500",placeholder:"Add notes about this request..."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>o(null),className:"flex-1 px-4 py-2 border rounded-lg border-purple-500/30 text-purple-300 hover:bg-purple-500/20 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:y,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700",children:[e.jsx(ie,{size:16}),"Save Changes"]})]})]})})}),document.body)]})};var Zr=Object.defineProperty,Kr=Object.defineProperties,Xr=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,pt=(t,s,r)=>s in t?Zr(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,Q=(t,s)=>{for(var r in s||(s={}))kt.call(s,r)&&pt(t,r,s[r]);if(Ee)for(var r of Ee(s))St.call(s,r)&&pt(t,r,s[r]);return t},Z=(t,s)=>Kr(t,Xr(s)),es=(t,s)=>{var r={};for(var l in t)kt.call(t,l)&&s.indexOf(l)<0&&(r[l]=t[l]);if(t!=null&&Ee)for(var l of Ee(t))s.indexOf(l)<0&&St.call(t,l)&&(r[l]=t[l]);return r},Le=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const ts=()=>{const{theme:t}=Ue(),[s,r]=g.useState([]),[l,i]=g.useState(!0),[o,c]=g.useState(null),[u,n]=g.useState(!1),[x,P]=g.useState("all");g.useState("list"),g.useEffect(()=>{k()},[]);const k=()=>Le(void 0,null,function*(){i(!0);try{const{data:d,error:a}=yield S.from("content_calendar").select("*").order("target_publish_date",{ascending:!0});if(a)throw a;r(d||[])}catch(d){console.error("Error loading content calendar:",d)}i(!1)}),E=()=>{const d={id:"",title:"",content_type:"cover",platforms:[],status:"idea",priority:"medium",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c(d),n(!0)},y=()=>Le(void 0,null,function*(){if(!(!o||!o.title.trim()))try{if(u){const d=o,{id:a,created_at:f,updated_at:h}=d,m=es(d,["id","created_at","updated_at"]),{data:N,error:C}=yield S.from("content_calendar").insert([m]).select().single();if(C)throw C;N&&r([...s,N])}else{const{error:d}=yield S.from("content_calendar").update(o).eq("id",o.id);if(d)throw d;r(s.map(a=>a.id===o.id?o:a))}c(null),n(!1)}catch(d){console.error("Error saving item:",d),alert("Failed to save item")}}),p=d=>Le(void 0,null,function*(){if(confirm("Delete this content item?"))try{const{error:a}=yield S.from("content_calendar").delete().eq("id",d);if(a)throw a;r(s.filter(f=>f.id!==d))}catch(a){console.error("Error deleting item:",a)}}),j=d=>({idea:"gray",planning:"blue",recording:"purple",editing:"yellow",review:"orange",scheduled:"green",published:"emerald",cancelled:"red"})[d]||"gray",$=d=>d==="urgent"?"ðŸ”´":d==="high"?"ðŸŸ ":d==="medium"?"ðŸŸ¡":"ðŸŸ¢",b=s.filter(d=>x==="all"?!0:x==="upcoming"?d.target_publish_date&&new Date(d.target_publish_date)>new Date:x==="in-progress"?["planning","recording","editing","review"].includes(d.status):!0);return l?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Content Calendar"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Plan and schedule your content"})]}),e.jsxs("div",{className:"flex gap-2",children:[["all","upcoming","in-progress"].map(d=>e.jsx("button",{onClick:()=>P(d),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all ".concat(x===d?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":t==="dark"?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:d.replace("-"," ")},d)),e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[e.jsx(He,{size:20}),"Add Content"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[b.map(d=>{const a=d.target_publish_date?Math.ceil((new Date(d.target_publish_date).getTime()-new Date().getTime())/864e5):null;return e.jsx("div",{className:"p-6 rounded-xl border transition-all ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:$(d.priority)}),e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize bg-".concat(j(d.status),"-100 text-").concat(j(d.status),"-700"),children:d.status}),e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize ".concat(t==="dark"?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:d.content_type.replace("_"," ")})]}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:d.title}),d.scripture_reference&&e.jsxs("p",{className:"text-sm mb-2 ".concat(t==="dark"?"text-purple-400":"text-purple-600"),children:["ðŸ“– ",d.scripture_reference]}),d.notes&&e.jsx("p",{className:"text-sm mb-3 text-gray-400",children:d.notes}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:d.platforms.map(f=>e.jsx("span",{className:"px-2 py-1 rounded text-xs ".concat(t==="dark"?"bg-gray-700 text-gray-300":"bg-gray-800/50 text-gray-300"),children:f},f))}),d.target_publish_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($e,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-gray-400",children:[new Date(d.target_publish_date).toLocaleDateString(),a!==null&&e.jsxs("span",{className:a<0?"text-red-500":a<7?"text-orange-500":"",children:[" ","(",a>0?"in ".concat(a," days"):a===0?"today":"".concat(Math.abs(a)," days overdue"),")"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{c(d),n(!1)},className:"p-2 rounded ".concat(t==="dark"?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:e.jsx(Ie,{size:16,className:"text-gray-400"})}),e.jsx("button",{onClick:()=>p(d.id),className:"p-2 rounded hover:bg-red-100",children:e.jsx(le,{size:16,className:"text-red-600"})})]})]})},d.id)}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(We,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium text-gray-400",children:"No content planned yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Content" to start planning'})]})]}),o&&he.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-2xl ".concat(t==="dark"?"bg-gray-800":"bg-gray-900/80"," rounded-lg shadow-xl max-h-[90vh] overflow-y-auto"),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:u?"Add Content":"Edit Content"}),e.jsx("button",{onClick:()=>{c(null),n(!1)},className:"p-1 rounded ".concat(t==="dark"?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:e.jsx(B,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Title *"}),e.jsx("input",{type:"text",value:o.title,onChange:d=>c(Z(Q({},o),{title:d.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Amazing Grace Cover"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Content Type"}),e.jsxs("select",{value:o.content_type,onChange:d=>c(Z(Q({},o),{content_type:d.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[e.jsx("option",{value:"cover",children:"Cover"}),e.jsx("option",{value:"original",children:"Original"}),e.jsx("option",{value:"worship_moment",children:"Worship Moment"}),e.jsx("option",{value:"testimony",children:"Testimony"}),e.jsx("option",{value:"bts",children:"Behind the Scenes"}),e.jsx("option",{value:"live",children:"Live Performance"}),e.jsx("option",{value:"collaboration",children:"Collaboration"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Status"}),e.jsxs("select",{value:o.status,onChange:d=>c(Z(Q({},o),{status:d.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[e.jsx("option",{value:"idea",children:"Idea"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"recording",children:"Recording"}),e.jsx("option",{value:"editing",children:"Editing"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),e.jsxs("select",{value:o.priority,onChange:d=>c(Z(Q({},o),{priority:d.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),e.jsx("input",{type:"date",value:o.target_publish_date||"",onChange:d=>c(Z(Q({},o),{target_publish_date:d.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Scripture Reference"}),e.jsx("input",{type:"text",value:o.scripture_reference||"",onChange:d=>c(Z(Q({},o),{scripture_reference:d.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Psalm 23:1-6"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Platforms"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["YouTube","Instagram","TikTok","Facebook"].map(d=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o.platforms.includes(d),onChange:a=>{a.target.checked?c(Z(Q({},o),{platforms:[...o.platforms,d]})):c(Z(Q({},o),{platforms:o.platforms.filter(f=>f!==d)}))},className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-300",children:d})]},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),e.jsx("textarea",{value:o.notes||"",onChange:d=>c(Z(Q({},o),{notes:d.target.value})),rows:4,className:"w-full px-3 py-2 border rounded-lg resize-none ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or ideas..."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{c(null),n(!1)},className:"flex-1 px-4 py-2 border rounded-lg ".concat(t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),e.jsxs("button",{onClick:y,disabled:!o.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{size:16}),u?"Add Content":"Save Changes"]})]})]})})}),document.body)]})};var ae=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const rs=()=>ae(void 0,null,function*(){try{const{data:t,error:s}=yield S.from("goals").select("*").order("created_at",{ascending:!1});if(s)throw s;return t||[]}catch(t){return console.error("Error fetching goals:",t),[]}}),ss=t=>ae(void 0,null,function*(){try{const{data:s,error:r}=yield S.from("goals").insert([t]).select().single();if(r)throw r;return s}catch(s){return console.error("Error adding goal:",s),null}}),xt=(t,s)=>ae(void 0,null,function*(){try{const{error:r}=yield S.from("goals").update(s).eq("id",t);if(r)throw r;return!0}catch(r){return console.error("Error updating goal:",r),!1}}),as=t=>ae(void 0,null,function*(){try{const{error:s}=yield S.from("goals").delete().eq("id",t);if(s)throw s;return!0}catch(s){return console.error("Error deleting goal:",s),!1}}),$t=(t,s)=>ae(void 0,null,function*(){try{let r=S.from("revenue_expenses").select("*").order("transaction_date",{ascending:!1});t&&(r=r.gte("transaction_date",t));const{data:l,error:i}=yield r;if(i)throw i;return l||[]}catch(r){return console.error("Error fetching revenue/expenses:",r),[]}}),ls=t=>ae(void 0,null,function*(){try{const{data:s,error:r}=yield S.from("revenue_expenses").insert([t]).select().single();if(r)throw r;return s}catch(s){return console.error("Error adding transaction:",s),null}}),ns=t=>ae(void 0,null,function*(){try{const{error:s}=yield S.from("revenue_expenses").delete().eq("id",t);if(s)throw s;return!0}catch(s){return console.error("Error deleting transaction:",s),!1}}),os=(t,s)=>ae(void 0,null,function*(){try{const r=yield $t(t,s),l=r.filter(x=>x.type==="revenue"),i=r.filter(x=>x.type==="expense"),o=l.reduce((x,P)=>x+P.amount,0),c=i.reduce((x,P)=>x+P.amount,0),u={};l.forEach(x=>{u[x.category]=(u[x.category]||0)+x.amount});const n={};return i.forEach(x=>{n[x.category]=(n[x.category]||0)+x.amount}),{totalRevenue:o,totalExpenses:c,netProfit:o-c,revenueByCategory:u,expensesByCategory:n}}catch(r){return console.error("Error calculating financial summary:",r),{totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}}}});var is=Object.defineProperty,ds=Object.defineProperties,cs=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,mt=(t,s,r)=>s in t?is(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,ve=(t,s)=>{for(var r in s||(s={}))Pt.call(s,r)&&mt(t,r,s[r]);if(Oe)for(var r of Oe(s))Ct.call(s,r)&&mt(t,r,s[r]);return t},je=(t,s)=>ds(t,cs(s)),us=(t,s)=>{var r={};for(var l in t)Pt.call(t,l)&&s.indexOf(l)<0&&(r[l]=t[l]);if(t!=null&&Oe)for(var l of Oe(t))s.indexOf(l)<0&&Ct.call(t,l)&&(r[l]=t[l]);return r},qe=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const ps=()=>{const{theme:t}=Ue(),[s,r]=g.useState([]),[l,i]=g.useState(!0),[o,c]=g.useState(null),[u,n]=g.useState(!1),[x,P]=g.useState("all"),[k,E]=g.useState("30d"),[y,p]=g.useState({totalRevenue:0,totalExpenses:0,netProfit:0,revenueByCategory:{},expensesByCategory:{}});g.useEffect(()=>{j()},[k]);const j=()=>qe(void 0,null,function*(){i(!0);try{const m=k==="30d"?30:k==="90d"?90:365,N=new Date;N.setDate(N.getDate()-m);const C=yield $t(N.toISOString().split("T")[0]);r(C);const _=yield os(N.toISOString().split("T")[0]);p(_)}catch(m){console.error("Error loading financial data:",m)}i(!1)}),$=m=>{const N={id:"",transaction_date:new Date().toISOString().split("T")[0],type:m,category:"",amount:0,currency:"NGN",is_recurring:!1,created_at:new Date().toISOString()};c(N),n(!0)},b=()=>qe(void 0,null,function*(){if(!o||!o.category||o.amount<=0){alert("Please fill in all required fields");return}try{if(u){const m=o,{id:N,created_at:C}=m,_=us(m,["id","created_at"]),A=yield ls(_);A&&(r([A,...s]),yield j())}c(null),n(!1)}catch(m){console.error("Error saving transaction:",m),alert("Failed to save transaction")}}),d=m=>qe(void 0,null,function*(){if(!confirm("Delete this transaction?"))return;(yield ns(m))&&(r(s.filter(C=>C.id!==m)),yield j())}),a=s.filter(m=>x==="all"?!0:m.type===x),f=["YouTube Ad Revenue","Bookings","Donations","Merchandise","Streaming","Teaching","Sponsorships"],h=["Equipment","Software","Studio Rental","Travel","Marketing","Website","Production","Costumes","Professional Services"];return l?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Financial Dashboard"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Track revenue and expenses"})]}),e.jsx("div",{className:"flex gap-2",children:["30d","90d","year"].map(m=>e.jsx("button",{onClick:()=>E(m),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(k===m?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":t==="dark"?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:m==="30d"?"30 Days":m==="90d"?"90 Days":"Year"},m))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-6 rounded-xl border ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Revenue"}),e.jsx(Pe,{size:20,className:"text-green-500"})]}),e.jsxs("p",{className:"text-3xl font-bold text-green-500",children:["â‚¦",y.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"p-6 rounded-xl border ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Total Expenses"}),e.jsx(Ht,{size:20,className:"text-red-500"})]}),e.jsxs("p",{className:"text-3xl font-bold text-red-500",children:["â‚¦",y.totalExpenses.toLocaleString()]})]}),e.jsxs("div",{className:"p-6 rounded-xl border ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Net Profit"}),e.jsx(vt,{size:20,className:y.netProfit>=0?"text-green-500":"text-red-500"})]}),e.jsxs("p",{className:"text-3xl font-bold ".concat(y.netProfit>=0?"text-green-500":"text-red-500"),children:["â‚¦",y.netProfit.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-xl border ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Revenue by Category"}),e.jsxs("div",{className:"space-y-3",children:[Object.entries(y.revenueByCategory).map(([m,N])=>{const C=y.totalRevenue>0?N/y.totalRevenue*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:m}),e.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["â‚¦",N.toLocaleString()," (",C.toFixed(1),"%)"]})]}),e.jsx("div",{className:"h-2 rounded-full overflow-hidden ".concat(t==="dark"?"bg-gray-700":"bg-gray-200"),children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600",style:{width:"".concat(C,"%")}})})]},m)}),Object.keys(y.revenueByCategory).length===0&&e.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No revenue recorded yet"})]})]}),e.jsxs("div",{className:"p-6 rounded-xl border ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Expenses by Category"}),e.jsxs("div",{className:"space-y-3",children:[Object.entries(y.expensesByCategory).map(([m,N])=>{const C=y.totalExpenses>0?N/y.totalExpenses*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:m}),e.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["â‚¦",N.toLocaleString()," (",C.toFixed(1),"%)"]})]}),e.jsx("div",{className:"h-2 rounded-full overflow-hidden ".concat(t==="dark"?"bg-gray-700":"bg-gray-200"),children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600",style:{width:"".concat(C,"%")}})})]},m)}),Object.keys(y.expensesByCategory).length===0&&e.jsx("p",{className:"text-sm text-center py-4 text-gray-500",children:"No expenses recorded yet"})]})]})]}),e.jsxs("div",{className:"p-6 rounded-xl border ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Recent Transactions"}),e.jsxs("div",{className:"flex gap-2",children:[["all","revenue","expense"].map(m=>e.jsx("button",{onClick:()=>P(m),className:"px-3 py-1 rounded text-sm font-medium capitalize ".concat(x===m?"bg-purple-600 text-white":t==="dark"?"bg-gray-800 text-gray-100":"bg-black text-gray-100"),children:m},m)),e.jsx("button",{onClick:()=>$("revenue"),className:"px-3 py-1 rounded text-sm font-medium bg-green-600 text-white hover:bg-green-700",children:"+ Revenue"}),e.jsx("button",{onClick:()=>$("expense"),className:"px-3 py-1 rounded text-sm font-medium bg-red-600 text-white hover:bg-red-700",children:"+ Expense"})]})]}),e.jsxs("div",{className:"space-y-2",children:[a.slice(0,20).map(m=>e.jsxs("div",{className:"p-4 rounded-lg border flex items-center justify-between ".concat(t==="dark"?"bg-gray-700 border-gray-600":"bg-gray-800/50 border-purple-500/20"),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(m.type==="revenue"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:m.type}),e.jsx("span",{className:"text-sm font-medium text-white",children:m.category})]}),m.description&&e.jsx("p",{className:"text-sm text-gray-400",children:m.description}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(m.transaction_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-lg font-bold ".concat(m.type==="revenue"?"text-green-500":"text-red-500"),children:[m.type==="revenue"?"+":"-","â‚¦",m.amount.toLocaleString()]}),e.jsx("button",{onClick:()=>d(m.id),className:"p-2 rounded hover:bg-red-100",children:e.jsx(le,{size:16,className:"text-red-600"})})]})]},m.id)),a.length===0&&e.jsx("p",{className:"text-center py-8 text-gray-500",children:"No transactions yet"})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"w-full max-w-md ".concat(t==="dark"?"bg-gray-800":"bg-gray-900/80"," rounded-lg shadow-xl"),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Add ",o.type==="revenue"?"Revenue":"Expense"]}),e.jsx("button",{onClick:()=>{c(null),n(!1)},className:"p-1 rounded ".concat(t==="dark"?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:e.jsx(B,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category *"}),e.jsxs("select",{value:o.category,onChange:m=>c(je(ve({},o),{category:m.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[e.jsx("option",{value:"",children:"Select category"}),(o.type==="revenue"?f:h).map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Amount (â‚¦) *"}),e.jsx("input",{type:"number",value:o.amount,onChange:m=>c(je(ve({},o),{amount:Number(m.target.value)})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Date"}),e.jsx("input",{type:"date",value:o.transaction_date,onChange:m=>c(je(ve({},o),{transaction_date:m.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Description"}),e.jsx("textarea",{value:o.description||"",onChange:m=>c(je(ve({},o),{description:m.target.value})),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add details..."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{c(null),n(!1)},className:"flex-1 px-4 py-2 border rounded-lg ".concat(t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),e.jsxs("button",{onClick:b,disabled:!o.category||o.amount<=0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{size:16}),"Save"]})]})]})})})]})};var xs=Object.defineProperty,ms=Object.defineProperties,gs=Object.getOwnPropertyDescriptors,De=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,gt=(t,s,r)=>s in t?xs(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,K=(t,s)=>{for(var r in s||(s={}))Et.call(s,r)&&gt(t,r,s[r]);if(De)for(var r of De(s))Ot.call(s,r)&&gt(t,r,s[r]);return t},X=(t,s)=>ms(t,gs(s)),hs=(t,s)=>{var r={};for(var l in t)Et.call(t,l)&&s.indexOf(l)<0&&(r[l]=t[l]);if(t!=null&&De)for(var l of De(t))s.indexOf(l)<0&&Ot.call(t,l)&&(r[l]=t[l]);return r},we=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const fs=()=>{const{theme:t}=Ue(),[s,r]=g.useState([]),[l,i]=g.useState(!0),[o,c]=g.useState(null),[u,n]=g.useState(!1),[x,P]=g.useState("all");g.useEffect(()=>{k()},[]);const k=()=>we(void 0,null,function*(){i(!0);const a=yield rs();r(a),i(!1)}),E=()=>{const a={id:"",title:"",category:"content",target_value:0,current_value:0,start_date:new Date().toISOString().split("T")[0],priority:"medium",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c(a),n(!0)},y=()=>we(void 0,null,function*(){if(!(!o||!o.title.trim()))try{if(u){const a=o,{id:f,created_at:h,updated_at:m}=a,N=hs(a,["id","created_at","updated_at"]),C=yield ss(N);C&&r([C,...s])}else(yield xt(o.id,o))&&r(s.map(f=>f.id===o.id?o:f));c(null),n(!1)}catch(a){console.error("Error saving goal:",a),alert("Failed to save goal")}}),p=a=>we(void 0,null,function*(){if(!confirm("Delete this goal?"))return;(yield as(a))&&r(s.filter(h=>h.id!==a))}),j=(a,f)=>we(void 0,null,function*(){const h=X(K({},a),{current_value:f});f>=a.target_value&&a.status==="active"&&(h.status="completed"),(yield xt(a.id,h))&&r(s.map(N=>N.id===a.id?h:N))}),$=s.filter(a=>x==="all"?!0:a.status===x),b=a=>({content:"purple",growth:"blue",ministry:"pink",financial:"green",engagement:"orange",learning:"indigo",personal:"red"})[a]||"gray",d=a=>({low:"text-gray-500",medium:"text-yellow-500",high:"text-red-500"})[a]||"text-gray-500";return l?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Goals Tracker"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Set and track your ministry goals"})]}),e.jsxs("div",{className:"flex gap-2",children:[["all","active","completed"].map(a=>e.jsx("button",{onClick:()=>P(a),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all ".concat(x===a?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":t==="dark"?"bg-gray-800 text-gray-100 hover:bg-gray-700":"bg-black text-gray-100 hover:bg-gray-900"),children:a},a)),e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:[e.jsx(He,{size:20}),"Add Goal"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.map(a=>{const f=a.target_value>0?a.current_value/a.target_value*100:0,h=a.status==="completed",m=a.target_date?Math.ceil((new Date(a.target_date).getTime()-new Date().getTime())/(1e3*60*60*24)):null;return e.jsxs("div",{className:"p-6 rounded-xl border transition-all ".concat(t==="dark"?"bg-gray-800 border-gray-700":"bg-gray-900/80 border-purple-500/20"," ").concat(h?"opacity-75":""),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium capitalize bg-".concat(b(a.category),"-100 text-").concat(b(a.category),"-700"),children:a.category}),e.jsx("span",{className:"text-xs font-medium ".concat(d(a.priority)),children:a.priority})]}),e.jsx("h3",{className:"text-lg font-bold text-white",children:a.title}),a.notes&&e.jsx("p",{className:"text-sm mt-1 text-gray-400",children:a.notes})]}),e.jsx("div",{className:"flex items-center gap-2",children:h?e.jsx(Wt,{size:24,className:"text-green-500"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{c(a),n(!1)},className:"p-2 rounded ".concat(t==="dark"?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:e.jsx(Ie,{size:16,className:"text-gray-400"})}),e.jsx("button",{onClick:()=>p(a.id),className:"p-2 rounded hover:bg-red-100",children:e.jsx(le,{size:16,className:"text-red-600"})})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Progress"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[a.current_value," / ",a.target_value," ",a.unit||""]})]}),e.jsx("div",{className:"h-3 rounded-full overflow-hidden ".concat(t==="dark"?"bg-gray-700":"bg-gray-200"),children:e.jsx("div",{className:"h-full transition-all ".concat(h?"bg-green-500":"bg-gradient-to-r from-purple-600 to-pink-600"),style:{width:"".concat(Math.min(f,100),"%")}})}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[f.toFixed(1),"% complete"]}),!h&&e.jsx("input",{type:"number",value:a.current_value,onChange:N=>j(a,Number(N.target.value)),className:"w-20 px-2 py-1 text-xs rounded border ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),m!==null&&!h&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($e,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:m>0?"".concat(m," days left"):m===0?"Due today":"".concat(Math.abs(m)," days overdue")})]})]},a.id)}),$.length===0&&e.jsxs("div",{className:"col-span-2 text-center py-12",children:[e.jsx(jt,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsxs("p",{className:"text-lg font-medium text-gray-400",children:["No ",x!=="all"?x:""," goals yet"]}),e.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add Goal" to create your first goal'})]})]}),o&&he.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-lg ".concat(t==="dark"?"bg-gray-800":"bg-gray-900/80"," rounded-lg shadow-xl max-h-[90vh] overflow-y-auto"),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:u?"Add New Goal":"Edit Goal"}),e.jsx("button",{onClick:()=>{c(null),n(!1)},className:"p-1 rounded ".concat(t==="dark"?"hover:bg-gray-700":"hover:bg-gray-800/50"),children:e.jsx(B,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Goal Title *"}),e.jsx("input",{type:"text",value:o.title,onChange:a=>c(X(K({},o),{title:a.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., Upload 10 videos this month"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Category"}),e.jsxs("select",{value:o.category,onChange:a=>c(X(K({},o),{category:a.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[e.jsx("option",{value:"content",children:"Content"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"ministry",children:"Ministry"}),e.jsx("option",{value:"financial",children:"Financial"}),e.jsx("option",{value:"engagement",children:"Engagement"}),e.jsx("option",{value:"learning",children:"Learning"}),e.jsx("option",{value:"personal",children:"Personal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Priority"}),e.jsxs("select",{value:o.priority,onChange:a=>c(X(K({},o),{priority:a.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Value"}),e.jsx("input",{type:"number",value:o.target_value,onChange:a=>c(X(K({},o),{target_value:Number(a.target.value)})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Current Value"}),e.jsx("input",{type:"number",value:o.current_value,onChange:a=>c(X(K({},o),{current_value:Number(a.target.value)})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Unit (optional)"}),e.jsx("input",{type:"text",value:o.unit||"",onChange:a=>c(X(K({},o),{unit:a.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"e.g., videos, subscribers, â‚¦"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Target Date"}),e.jsx("input",{type:"date",value:o.target_date||"",onChange:a=>c(X(K({},o),{target_date:a.target.value})),className:"w-full px-3 py-2 border rounded-lg ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Notes"}),e.jsx("textarea",{value:o.notes||"",onChange:a=>c(X(K({},o),{notes:a.target.value})),rows:3,className:"w-full px-3 py-2 border rounded-lg resize-none ".concat(t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-900/80 border-purple-500/30 text-white"),placeholder:"Add any notes or strategy..."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{c(null),n(!1)},className:"flex-1 px-4 py-2 border rounded-lg ".concat(t==="dark"?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-purple-500/30 text-gray-300 hover:bg-gray-800/50"),children:"Cancel"}),e.jsxs("button",{onClick:y,disabled:!o.title.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{size:16}),u?"Add Goal":"Save Changes"]})]})]})})}),document.body)]})};var bs=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});function ys(){const[t,s]=g.useState("7d"),[r,l]=g.useState({pageViews:[],topPages:[],userLocations:[],deviceBreakdown:[],peakHours:[],userRetention:[]}),[i,o]=g.useState(!0),[c,u]=g.useState(!1);g.useEffect(()=>{n(),setTimeout(()=>u(!0),100)},[t]);const n=()=>bs(this,null,function*(){try{const y=yield dr(),p=(y==null?void 0:y.total_visits)||0,j=t==="7d"?7:t==="30d"?30:90,$=Math.floor(p/j);l({pageViews:x(j,$),topPages:[{page:"/home",views:Math.floor(p*.35)},{page:"/videos",views:Math.floor(p*.28)},{page:"/about",views:Math.floor(p*.2)},{page:"/contact",views:Math.floor(p*.12)},{page:"/gallery",views:Math.floor(p*.05)}],userLocations:[{country:"United States",users:Math.floor(p*.32)},{country:"United Kingdom",users:Math.floor(p*.18)},{country:"Canada",users:Math.floor(p*.12)},{country:"Australia",users:Math.floor(p*.1)},{country:"Germany",users:Math.floor(p*.08)}],deviceBreakdown:[{device:"Mobile",percentage:65},{device:"Desktop",percentage:28},{device:"Tablet",percentage:7}],peakHours:P(),userRetention:k()})}catch(y){console.error("Error loading analytics:",y)}finally{o(!1)}}),x=(y,p)=>Array.from({length:y},(j,$)=>{const b=new Date;b.setDate(b.getDate()-(y-$-1));const d=Math.floor(p*.3);return{date:b.toLocaleDateString("en-US",{month:"short",day:"numeric"}),views:Math.max(10,p+Math.floor(Math.random()*d*2-d))}}),P=()=>Array.from({length:24},(y,p)=>({hour:p,activity:Math.floor(Math.random()*80)+(p>=8&&p<=22?40:10)})),k=()=>Array.from({length:8},(y,p)=>({week:"Week ".concat(p+1),rate:Math.max(30,100-p*8-Math.random()*10)})),E=(y,p)=>{const j=Math.max(...y.map(a=>a.views),1),$=y.map((a,f)=>{const h=f/(y.length-1||1)*100,m=100-a.views/j*80;return{x:h,y:m}}),b=$.map((a,f)=>"".concat(f===0?"M":"L"," ").concat(a.x,",").concat(a.y)).join(" "),d="".concat(b," L ").concat($[$.length-1].x,",100 L 0,100 Z");return e.jsx("div",{className:"relative h-64",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"analytics-gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:p,stopOpacity:"0.4"}),e.jsx("stop",{offset:"100%",stopColor:p,stopOpacity:"0.05"})]})}),e.jsx("path",{d,fill:"url(#analytics-gradient)",style:{animation:c?"drawPath 1.5s ease-out forwards":"none",opacity:c?1:0}}),e.jsx("path",{d:b,fill:"none",stroke:p,strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:c?"drawLine 1.5s ease-out forwards":"none",strokeDasharray:"1000",strokeDashoffset:c?"0":"1000"}}),$.map((a,f)=>e.jsx("circle",{cx:a.x,cy:a.y,r:"1.5",fill:p,style:{animation:c?"fadeInScale 0.3s ease-out ".concat(.5+f*.05,"s forwards"):"none",opacity:c?1:0}},f))]})})};return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:"\n        @keyframes drawLine {\n          to {\n            stroke-dashoffset: 0;\n            opacity: 1;\n          }\n        }\n        @keyframes drawPath {\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: scale(0);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n      "}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Advanced Analytics"}),e.jsx("p",{className:"text-purple-300 mt-1",children:"Deep insights into user behavior and engagement"})]}),e.jsxs("select",{value:t,onChange:y=>s(y.target.value),className:"px-4 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-4 border border-purple-500/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-300 text-sm",children:"Total Page Views"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.pageViews.reduce((y,p)=>y+p.views,0).toLocaleString()}),e.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 12.5% vs last period"})]}),e.jsx(Fe,{className:"w-8 h-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-4 border border-blue-500/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-300 text-sm",children:"Unique Visitors"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:r.userLocations.reduce((y,p)=>y+p.users,0).toLocaleString()}),e.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 8.3% vs last period"})]}),e.jsx(yt,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-4 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-300 text-sm",children:"Avg Session Time"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"4m 32s"}),e.jsx("p",{className:"text-green-400 text-xs mt-1",children:"â†‘ 15.2% vs last period"})]}),e.jsx($e,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-4 border border-orange-500/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-300 text-sm",children:"Bounce Rate"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:"32.4%"}),e.jsx("p",{className:"text-red-400 text-xs mt-1",children:"â†“ 5.1% vs last period"})]}),e.jsx(Jt,{className:"w-8 h-8 text-orange-400"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Page Views Over Time"}),E(r.pageViews,"#9333ea")]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 backdrop-blur-xl rounded-xl p-6 border border-purple-500/20",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Top Pages"]}),e.jsx("div",{className:"space-y-3",children:r.topPages.map((y,p)=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-white font-medium",children:y.page}),e.jsxs("span",{className:"text-purple-300 text-sm",children:[y.views.toLocaleString()," views"]})]}),e.jsx("div",{className:"w-full bg-purple-500/20 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 h-2 rounded-full transition-all",style:{width:"".concat(y.views/r.topPages[0].views*100,"%"),animation:c?"slideIn 0.5s ease-out ".concat(p*.1,"s forwards"):"none"}})})]})},p))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 backdrop-blur-xl rounded-xl p-6 border border-blue-500/20",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-5 h-5"}),"Top Locations"]}),e.jsx("div",{className:"space-y-3",children:r.userLocations.map((y,p)=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-white font-medium",children:y.country}),e.jsxs("span",{className:"text-blue-300 text-sm",children:[y.users.toLocaleString()," users"]})]}),e.jsx("div",{className:"w-full bg-blue-500/20 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2 rounded-full transition-all",style:{width:"".concat(y.users/r.userLocations[0].users*100,"%"),animation:c?"slideIn 0.5s ease-out ".concat(p*.1,"s forwards"):"none"}})})]})},p))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 backdrop-blur-xl rounded-xl p-6 border border-green-500/20",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"}),"Device Breakdown"]}),e.jsx("div",{className:"space-y-4",children:r.deviceBreakdown.map((y,p)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-white",children:y.device}),e.jsxs("span",{className:"text-green-300",children:[y.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-green-500/20 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 h-3 rounded-full transition-all",style:{width:"".concat(y.percentage,"%"),animation:c?"slideIn 0.5s ease-out ".concat(p*.1,"s forwards"):"none"}})})]},p))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 backdrop-blur-xl rounded-xl p-6 border border-orange-500/20",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Peak Activity Hours"]}),e.jsx("div",{className:"h-48 flex items-end justify-between gap-1",children:r.peakHours.filter((y,p)=>p%2===0).map((y,p)=>{const j=Math.max(...r.peakHours.map($=>$.activity));return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full bg-gradient-to-t from-orange-600 to-orange-700 rounded-t hover:from-orange-500 hover:to-orange-600 transition-all cursor-pointer",style:{height:"".concat(y.activity/j*100,"%"),animation:c?"slideUp 0.5s ease-out ".concat(p*.05,"s forwards"):"none",opacity:c?1:0}}),e.jsxs("span",{className:"text-xs text-orange-300",children:[y.hour,":00"]})]},p)})})]})]})]}),e.jsx("style",{children:"\n        @keyframes slideIn {\n          from {\n            width: 0;\n          }\n        }\n        @keyframes slideUp {\n          from {\n            height: 0;\n            opacity: 0;\n          }\n        }\n      "})]})}var vs=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const js=()=>{const[t,s]=g.useState(null),[r,l]=g.useState(!1),[i,o]=g.useState(!1),[c,u]=g.useState(!1),[n,x]=g.useState(!1);g.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){o(!0);return}const k=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;u(k);const E=y=>{y.preventDefault(),s(y),l(!0)};return window.addEventListener("beforeinstallprompt",E),window.addEventListener("appinstalled",()=>{o(!0),l(!1)}),()=>{window.removeEventListener("beforeinstallprompt",E)}},[]);const P=()=>vs(void 0,null,function*(){if(c){x(!0);return}if(!t){alert('To install this app:\n\n1. Click the menu button (â‹®) in your browser\n2. Select "Install App" or "Add to Home Screen"\n3. Follow the prompts');return}t.prompt();const{outcome:k}=yield t.userChoice;k==="accepted"&&(console.log("User accepted the install prompt"),o(!0)),s(null),l(!1)});return i?null:e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:P,className:"w-full mt-4 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold text-sm transition-all hover:shadow-lg hover:shadow-green-500/50 hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2",children:[e.jsx(Qt,{size:18}),"Install App"]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#2d1b4e] to-[#1a0a2e] rounded-2xl p-6 max-w-md w-full border border-purple-500/30 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{size:24,className:"text-purple-300"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Install on iOS"})]}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-purple-500/20 rounded-lg transition-colors",children:e.jsx(B,{size:20,className:"text-purple-300"})})]}),e.jsxs("div",{className:"space-y-4 text-purple-200",children:[e.jsx("p",{className:"text-sm",children:"To install this app on your iPhone or iPad:"}),e.jsxs("ol",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),e.jsxs("span",{children:["Tap the ",e.jsx("strong",{className:"text-white",children:"Share"})," button at the bottom of Safari"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),e.jsxs("span",{children:["Scroll down and tap ",e.jsx("strong",{className:"text-white",children:'"Add to Home Screen"'})]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),e.jsxs("span",{children:["Tap ",e.jsx("strong",{className:"text-white",children:'"Add"'})," in the top right corner"]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-purple-500/10 rounded-lg border border-purple-500/20",children:e.jsx("p",{className:"text-xs text-purple-300",children:"ðŸ’¡ The app icon will appear on your home screen and work like a native app!"})})]}),e.jsx("button",{onClick:()=>x(!1),className:"w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Got it!"})]})}),!c&&!t&&r&&e.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Zt,{size:18,className:"text-blue-300 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Install this app:"}),e.jsx("p",{children:'Click the menu (â‹®) â†’ "Install App" or "Add to Home Screen"'})]})]})}),e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-4 text-xs text-purple-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wt,{size:14}),e.jsx("span",{children:"Mobile"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Kt,{size:14}),e.jsx("span",{children:"Desktop"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{size:14}),e.jsx("span",{children:"iOS"})]})]})]})};var ws=Object.defineProperty,ht=Object.getOwnPropertySymbols,Ns=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,ft=(t,s,r)=>s in t?ws(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,ks=(t,s)=>{for(var r in s||(s={}))Ns.call(s,r)&&ft(t,r,s[r]);if(ht)for(var r of ht(s))_s.call(s,r)&&ft(t,r,s[r]);return t},se=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});class Ss{constructor(){this.audio=null,this.notificationCount=0,this.initializeAudio(),this.requestPermission()}initializeAudio(){}requestPermission(){return se(this,null,function*(){"Notification"in window&&Notification.permission==="default"&&(yield Notification.requestPermission())})}playSound(){try{const s=new(window.AudioContext||window.webkitAudioContext),r=s.createOscillator(),l=s.createGain();r.connect(l),l.connect(s.destination),r.frequency.value=800,r.type="sine",l.gain.setValueAtTime(.3,s.currentTime),l.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),r.start(s.currentTime),r.stop(s.currentTime+.5)}catch(s){console.error("Error playing notification sound:",s)}}showNotification(s,r){return se(this,null,function*(){if("Notification"in window&&Notification.permission==="granted")try{const l=new Notification(s,ks({icon:"/icon-192x192.png",badge:"/icon-192x192.png"},r));return setTimeout(()=>l.close(),5e3),l}catch(l){console.error("Error showing notification:",l)}})}updateBadge(s){return se(this,null,function*(){if(this.notificationCount=s,console.log("ðŸ”” Updating badge to:",s),"setAppBadge"in navigator)try{s>0?(yield navigator.setAppBadge(s),console.log("âœ… Badge set via navigator.setAppBadge")):(yield navigator.clearAppBadge(),console.log("âœ… Badge cleared via navigator.clearAppBadge"))}catch(r){console.error("âŒ navigator.setAppBadge error:",r)}if("serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage({type:"UPDATE_BADGE",count:s}),console.log("âœ… Badge update message sent to service worker")}catch(r){console.error("âŒ Service worker message error:",r)}this.updateFaviconBadge(s),console.log("âœ… Favicon badge updated")})}updateFaviconBadge(s){const r=document.createElement("canvas");r.width=32,r.height=32;const l=r.getContext("2d");if(!l)return;l.fillStyle="#a855f7",l.beginPath(),l.arc(16,16,16,0,2*Math.PI),l.fill(),s>0&&(l.fillStyle="#ff0000",l.beginPath(),l.arc(24,8,8,0,2*Math.PI),l.fill(),l.fillStyle="#ffffff",l.font="bold 10px Arial",l.textAlign="center",l.textBaseline="middle",l.fillText(s>99?"99+":s.toString(),24,8));const i=document.querySelector("link[rel*='icon']")||document.createElement("link");i.type="image/x-icon",i.rel="shortcut icon",i.href=r.toDataURL(),document.getElementsByTagName("head")[0].appendChild(i)}clearBadge(){return se(this,null,function*(){yield this.updateBadge(0)})}notifyNewMessage(s,r){return se(this,null,function*(){this.playSound(),yield this.showNotification("New Message",{body:"From ".concat(s,": ").concat(r),tag:"new-message"})})}notifyNewSongRequest(s,r){return se(this,null,function*(){this.playSound(),yield this.showNotification("New Song Request",{body:"".concat(r," requested: ").concat(s),tag:"new-song-request"})})}notifyUserLogin(s,r){return se(this,null,function*(){this.playSound(),yield this.showNotification("User Logged In",{body:"".concat(s," (").concat(r,") has logged in"),tag:"user-login"})})}notifyNewFanMessage(s,r){return se(this,null,function*(){this.playSound(),yield this.showNotification("New Fan Message",{body:"".concat(s," from ").concat(r),tag:"new-fan-message"})})}}const _e=new Ss;var $s=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const Ps=t=>{const[s,r]=g.useState(0);g.useEffect(()=>{if(!t)return;const i=S.channel("fan_messages_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"fan_messages"},c=>{const u=c.new;_e.notifyNewFanMessage(u.message_type,u.from_name||"Anonymous"),l()}).subscribe(),o=S.channel("song_requests_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"song_requests"},c=>{const u=c.new;_e.notifyNewSongRequest(u.song_title,u.requested_by_name||"Anonymous"),l()}).subscribe();return l(),()=>{i.unsubscribe(),o.unsubscribe()}},[t]);const l=()=>$s(void 0,null,function*(){try{const{count:i}=yield S.from("fan_messages").select("*",{count:"exact",head:!0}).eq("status","unread"),{count:o}=yield S.from("song_requests").select("*",{count:"exact",head:!0}).eq("status","new"),c=(i||0)+(o||0);r(c),yield _e.updateBadge(c)}catch(i){console.error("Error updating unread count:",i)}});return{unreadCount:s,updateUnreadCount:l}};var xe=(t,s,r)=>new Promise((l,i)=>{var o=n=>{try{u(r.next(n))}catch(x){i(x)}},c=n=>{try{u(r.throw(n))}catch(x){i(x)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(o,c);u((r=r.apply(t,s)).next())});const Is=({onClose:t})=>{var s;const{profilePicture:r}=Be(),[l,i]=g.useState(!1),[o,c]=g.useState(null),[u,n]=g.useState(""),[x,P]=g.useState(""),[k,E]=g.useState(!1),[y,p]=g.useState(!1),[j,$]=g.useState(""),[b,d]=g.useState(!1),[a,f]=g.useState("dashboard"),[h,m]=g.useState([]),[N,C]=g.useState({total_visitors:0,page_visits:{},artist_logins:0,last_updated:new Date().toISOString()}),[_,A]=g.useState({videoUpdates:[],loginFrequency:[],siteVisits:[]}),[R,W]=g.useState(!1),{unreadCount:U}=Ps(o);g.useEffect(()=>(document.body.classList.add("admin-panel-active"),()=>{document.body.classList.remove("admin-panel-active")}),[]),g.useEffect(()=>{W(!1)},[a]),g.useEffect(()=>{xe(void 0,null,function*(){var q;try{const{data:F}=yield S.auth.getUser();if(F!=null&&F.user){const O=F.user.email||"";let V=null;if(O){const{data:H}=yield S.from("users").select("*").eq("email",O).maybeSingle();H&&(V={id:H.id,email:H.email,role:H.role,phone:H.phone||"",name:H.full_name,profilePicture:r||localStorage.getItem("admin_profile_picture")||void 0})}const G=((q=F.user.email)==null?void 0:q.split("@")[0])||"Admin",Y=V||{id:F.user.id,email:O,role:"artist",phone:"",name:G,profilePicture:r||localStorage.getItem("admin_profile_picture")||void 0};c(Y),i(!0),localStorage.setItem("admin_session",JSON.stringify({user:Y}))}else{const O=localStorage.getItem("admin_session");if(O){const V=JSON.parse(O),G=r||localStorage.getItem("admin_profile_picture");G&&!V.user.profilePicture&&(V.user.profilePicture=G),c(V.user),i(!0)}}}catch(F){console.error("Error restoring admin session:",F)}finally{J()}})},[r]);const J=()=>xe(void 0,null,function*(){const{getVideos:D,getSettings:q}=yield ke(()=>import("./supabaseData-ByrMHVQX.js"),__vite__mapDeps([0,1,2,3,4])),[F,O]=yield Promise.all([D(),q()]);m(F),C({total_visitors:(O==null?void 0:O.total_visits)||0,page_visits:{home:(O==null?void 0:O.total_visits)||0},artist_logins:(O==null?void 0:O.artist_logins)||0,last_updated:new Date().toISOString()});const V=(Y,H=2)=>{const w=[];for(let z=6;z>=0;z--){const I=new Date;I.setDate(I.getDate()-z);const L=Math.max(0,Y+Math.floor(Math.random()*H*2-H));w.push({date:I.toISOString(),value:L})}return w},G=F.filter(Y=>Y.status==="completed").length;A({videoUpdates:V(Math.floor(G/7),1),loginFrequency:V(Math.floor((O==null?void 0:O.artist_logins)/7||1),1),siteVisits:V(Math.floor(((O==null?void 0:O.total_visits)||0)/7),3)})}),de=D=>xe(void 0,null,function*(){D.preventDefault();try{const{data:q,error:F}=yield S.auth.signInWithPassword({email:u,password:x});if(F||!q.user){alert("Invalid email or password. Please check your credentials.");return}let O=null;const{data:V}=yield S.from("users").select("*").eq("email",u).maybeSingle();V&&(O=V);const G={id:(O==null?void 0:O.id)||q.user.id,email:u,role:(O==null?void 0:O.role)||"artist",phone:(O==null?void 0:O.phone)||"",name:(O==null?void 0:O.full_name)||u.split("@")[0]||"Admin",profilePicture:localStorage.getItem("admin_profile_picture")||void 0};c(G),i(!0),localStorage.setItem("admin_session",JSON.stringify({user:G})),_e.notifyUserLogin(G.name,G.role);const{getSettings:Y,updateSettings:H}=yield ke(()=>import("./supabaseData-ByrMHVQX.js"),__vite__mapDeps([0,1,2,3,4])),v=yield Y(),w=(v==null?void 0:v.artist_logins)||0;yield H({artist_logins:w+1})}catch(q){console.error("Error during admin login:",q),alert("Login failed due to a server error. Please try again.")}}),fe=D=>xe(void 0,null,function*(){D.preventDefault(),["artist@estherreign.com","editor@estherreign.com"].includes(j)?(d(!0),setTimeout(()=>{alert("Password reset instructions have been sent to ".concat(j,".\n\nFor demo purposes:\n- Artist password: artist2024\n- Editor password: editor2024")),p(!1),d(!1),$("")},1500)):alert("Email not found. Please check your email address.")}),be=()=>xe(void 0,null,function*(){try{yield S.auth.signOut()}catch(D){console.error("Error signing out from Supabase:",D)}i(!1),c(null),localStorage.removeItem("admin_session")});return l?e.jsxs("div",{className:"admin-panel fixed inset-0 bg-black overflow-hidden z-50 flex flex-col",children:[e.jsxs("div",{className:"fixed inset-0 z-0",children:[e.jsx(Ye,{}),e.jsx("div",{className:"absolute inset-0 bg-black/60 z-[1]"})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] lg:hidden",onClick:()=>W(!1)}),e.jsx("nav",{className:"flex-shrink-0 bg-black/95 backdrop-blur-xl border-b border-purple-500/30 relative z-[90]",style:{zIndex:90,position:"relative"},children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>W(!0),className:"lg:hidden p-2 text-purple-200 hover:bg-purple-500/10 rounded-lg",children:e.jsx(er,{size:24})}),e.jsxs("div",{className:"flex items-center gap-4",children:[r||o!=null&&o.profilePicture?e.jsx("img",{src:r||(o==null?void 0:o.profilePicture)||"",alt:"Profile",className:"w-10 h-10 md:w-12 md:h-12 rounded-xl object-cover shadow-lg shadow-purple-500/30"}):e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:e.jsx("span",{className:"text-white font-black text-xl",children:(s=o==null?void 0:o.name)==null?void 0:s.charAt(0)})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-black text-white",children:"Esther Reign Admin"}),e.jsxs("p",{className:"text-sm text-purple-300",children:[o==null?void 0:o.name," â€¢ ",(o==null?void 0:o.role)==="artist"?"Artist":"Editor"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx(_r,{currentUser:o,externalUnreadCount:U}),e.jsxs("button",{onClick:t,className:"px-3 py-2 md:px-4 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all text-purple-200 border border-purple-500/20 flex items-center gap-1.5 md:gap-2 touch-manipulation min-h-[44px]",children:[e.jsx(Fe,{size:16,className:"md:w-[18px] md:h-[18px]"}),e.jsx("span",{className:"hidden md:inline",children:"View Site"})]}),e.jsxs("button",{onClick:be,className:"px-3 py-2 md:px-4 bg-red-500/10 hover:bg-red-500/20 rounded-xl transition-all text-red-300 border border-red-500/20 flex items-center gap-1.5 md:gap-2 touch-manipulation min-h-[44px]",children:[e.jsx(tr,{size:16,className:"md:w-[18px] md:h-[18px]"}),e.jsx("span",{className:"hidden md:inline",children:"Logout"})]})]})]})}),e.jsxs("div",{className:"flex-1 overflow-hidden flex relative z-[50]",children:[e.jsxs("aside",{className:"\n          fixed lg:static inset-y-0 left-0 z-[70] w-64 bg-[#2d1b4e]/95 backdrop-blur-xl border-r border-purple-500/20 overflow-y-auto transition-transform duration-300 ease-in-out\n          ".concat(R?"translate-x-0":"-translate-x-full lg:translate-x-0","\n        "),children:[e.jsxs("div",{className:"p-4 flex items-center justify-between lg:hidden border-b border-purple-500/20",children:[e.jsx("span",{className:"font-bold text-white",children:"Menu"}),e.jsx("button",{onClick:()=>W(!1),className:"text-purple-300",children:e.jsx(B,{size:20})})]}),e.jsx("div",{className:"p-4 space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:rr},{id:"videos",label:"Videos",icon:ge},{id:"messages",label:"Messages",icon:Ne},{id:"songs",label:"Song Requests",icon:Se},{id:"calendar",label:"Calendar",icon:We},{id:"financial",label:"Financial",icon:vt},{id:"goals",label:"Goals",icon:jt},{id:"analytics",label:"Analytics",icon:Pe},{id:"settings",label:"Settings",icon:sr}].map(D=>{const q=D.icon;return e.jsxs("button",{onClick:()=>f(D.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all ".concat(a===D.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg shadow-purple-500/30":"text-purple-200 hover:bg-purple-500/10 hover:text-white"),children:[e.jsx(q,{size:20}),e.jsx("span",{children:D.label})]},D.id)})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto relative z-[30]",children:e.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 relative z-[30]",children:[a==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Dr,{videoUpdates:_.videoUpdates,loginFrequency:_.loginFrequency,siteVisits:_.siteVisits}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-6 border border-purple-500/30 bg-black/40",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-500/30 rounded-xl flex items-center justify-center",children:e.jsx(ge,{size:24,className:"text-purple-400"})})}),e.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:h.length}),e.jsx("p",{className:"text-purple-200 text-shadow text-sm font-semibold",children:"Total Videos"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 backdrop-blur-xl rounded-2xl p-6 border border-blue-500/30 bg-black/40",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center",children:e.jsx(Pe,{size:24,className:"text-blue-400"})})}),e.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:N.total_visitors}),e.jsx("p",{className:"text-blue-200 text-shadow text-sm font-semibold",children:"Total Visitors"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/20 backdrop-blur-xl rounded-2xl p-6 border border-green-500/30 bg-black/40",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-500/30 rounded-xl flex items-center justify-center",children:e.jsx(Ge,{size:24,className:"text-green-400"})})}),e.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:h.filter(D=>D.status==="completed").length}),e.jsx("p",{className:"text-green-200 text-shadow text-sm font-semibold",children:"Published"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500/20 to-orange-600/20 backdrop-blur-xl rounded-2xl p-6 border border-orange-500/30 bg-black/40",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Ve,{size:24,className:"text-orange-400"})})}),e.jsx("h3",{className:"text-3xl font-black text-white text-shadow-strong mb-1",children:N.artist_logins}),e.jsx("p",{className:"text-orange-200 text-shadow text-sm font-semibold",children:"Admin Logins"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl p-8 border border-purple-500/30 bg-black/40",children:[e.jsxs("h2",{className:"text-2xl font-black text-white text-shadow-strong mb-2",children:["Welcome back, ",o==null?void 0:o.name,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-purple-100 text-shadow mb-6 font-medium",children:"Here's what's happening with your platform today."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[e.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Active Videos"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:h.filter(D=>D.status==="completed").length})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[e.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:h.filter(D=>D.status==="pending").length})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/20",children:[e.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Total Views"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:N.total_visitors})]})]})]})]}),a==="videos"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(Or,{})}),a==="messages"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(Ur,{})}),a==="songs"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(Qr,{})}),a==="calendar"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(ts,{})}),a==="financial"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(ps,{})}),a==="goals"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(fs,{})}),a==="analytics"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(ys,{})}),a==="settings"&&e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20",children:e.jsx(Rr,{})})]})})]}),o&&e.jsx(br,{currentUser:o,videos:h})]}):e.jsxs("div",{className:"admin-panel fixed inset-0 bg-black flex items-center justify-center z-50 overflow-y-auto p-4",children:[e.jsx(Ye,{}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-3 bg-purple-500/10 hover:bg-purple-500/20 rounded-xl transition-all border border-purple-500/20 backdrop-blur-sm z-10",children:e.jsx(B,{size:24,className:"text-white"})}),e.jsx("div",{className:"max-w-lg w-full my-auto relative z-10",children:e.jsxs("div",{className:"bg-black/90 backdrop-blur-2xl rounded-3xl p-6 md:p-8 border border-purple-500/30 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/50",children:e.jsx(Ve,{size:48,className:"text-white"})}),e.jsx("h2",{className:"text-4xl font-black text-white mb-3",children:"Admin Panel"}),e.jsx("p",{className:"text-purple-200",children:"Enter your credentials to access the admin dashboard"})]}),y?e.jsxs("form",{onSubmit:fe,className:"space-y-5",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Ze,{size:32,className:"text-purple-300"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-purple-200",children:"Enter your email to receive reset instructions"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:j,onChange:D=>$(D.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),$("")},className:"flex-1 bg-purple-500/10 border border-purple-500/30 text-purple-200 px-6 py-3 rounded-xl font-semibold transition-all hover:bg-purple-500/20",children:"Back"}),e.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all hover:shadow-lg hover:shadow-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Sending...":"Send Reset Link"})]})]}):e.jsxs("form",{onSubmit:de,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:u,onChange:D=>n(D.target.value),className:"w-full px-4 py-3 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-purple-200 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:k?"text":"password",value:x,onChange:D=>P(D.target.value),className:"w-full px-4 py-3 pr-12 bg-purple-500/10 border border-purple-500/30 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all text-white placeholder-purple-400",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>E(!k),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 text-purple-300 hover:text-purple-200 transition-colors",children:k?e.jsx(Xt,{size:20}):e.jsx(Fe,{size:20})})]})]}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("button",{type:"button",onClick:()=>p(!0),className:"text-purple-300 hover:text-purple-200 transition-colors flex items-center gap-1",children:[e.jsx(Ze,{size:16}),"Forgot Password?"]})}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all hover:shadow-lg hover:shadow-purple-500/50 hover:scale-[1.02] active:scale-[0.98]",children:"Sign In"}),e.jsx(js,{})]})]})})]})};export{Is as default};
